<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2017-02-26 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Jakarta Cactus &#x2013; RunServerTests Ant Task</title>
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../../../" id="bannerLeft">
                                                <img src="../../images/logocactus.gif" alt="Cactus" />
                </a>
                              <a href="http://jakarta.apache.org/" id="bannerRight">
                                                <img src="../../images/jakarta-logo.gif" alt="Apache" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                <div class="xleft">
        <span id="publishDate">Last Published: 2017-02-26</span>
                  &nbsp;| <span id="projectVersion">Version: 1.8.2-SNAPSHOT</span>
                          |                           <a href="http://www.apache.org/" class="externalLink" title="Apache">Apache</a>
        &gt;
                          <a href="http://www.jakarta.apache.org/" class="externalLink" title="Jakarta">Jakarta</a>
        &gt;
                          <a href="../../../" title="Cactus">Cactus</a>
        &gt;
    RunServerTests Ant Task
              </div>
            <div class="xright">      
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>About</h5>
                  <ul>
                  <li class="none">
                          <a href="../../index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../../goals.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
                          <a href="../../features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../../news.html" title="News">News</a>
            </li>
                  <li class="none">
                          <a href="../../downloads.html" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/sheeper/jakarta-cactus/issues" class="externalLink" target="_blank" title="Bug Database">Bug Database</a>
            </li>
                  <li class="none">
                          <a href="../../mail-lists.html" title="Mailing Lists">Mailing Lists</a>
            </li>
                  <li class="none">
                          <a href="../../faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/jakarta-cactus/FrontPage" class="externalLink" target="_blank" title="Wiki">Wiki</a>
            </li>
                  <li class="none">
                          <a href="../../license.html" title="License">License</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="../../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                            <li class="collapsed">
                          <a href="../../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="../../getting_started.html" title="Getting started">Getting started</a>
            </li>
                  <li class="none">
                          <a href="../../how_it_works.html" title="How it works">How it works</a>
            </li>
                                                                                                                                                                                                                                      <li class="collapsed">
                          <a href="../../writing/howto_ejb.html" title="Writing tests">Writing tests</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li class="expanded">
                          <a href="../../integration/index.html" title="Running tests">Running tests</a>
                    <ul>
                      <li class="none">
                          <a href="../../integration/manual/index.html" title="Manual">Manual</a>
            </li>
                      <li class="none">
                          <a href="../../integration/eclipse/index.html" title="Eclipse">Eclipse</a>
            </li>
                                                                                                                                                                                                                                                    <li class="expanded">
                          <a href="../../integration/ant/index.html" title="Ant">Ant</a>
                    <ul>
                      <li class="none">
                          <a href="../../integration/ant/howto_ant_cactus.html" title="Howto Ant-Cactus">Howto Ant-Cactus</a>
            </li>
                      <li class="none">
                          <a href="../../integration/ant/howto_ant_install.html" title="Howto Ant-Install">Howto Ant-Install</a>
            </li>
                      <li class="none">
                          <a href="../../integration/ant/howto_ant_primer.html" title="Howto Ant-Primer">Howto Ant-Primer</a>
            </li>
                      <li class="none">
                          <a href="../../integration/ant/task_cactifyear.html" title="CactifyEar Task">CactifyEar Task</a>
            </li>
                      <li class="none">
                          <a href="../../integration/ant/task_cactifywar.html" title="CactifyWar Task">CactifyWar Task</a>
            </li>
                      <li class="none">
                          <a href="../../integration/ant/task_cactus.html" title="Cactus Task">Cactus Task</a>
            </li>
                      <li class="none">
                          <a href="../../integration/ant/task_cactus1.8.html" title="Cactus Task 1.8">Cactus Task 1.8</a>
            </li>
                      <li class="none">
                          <a href="../../integration/ant/task_resin.html" title="Resin Task">Resin Task</a>
            </li>
                      <li class="none">
            <strong>RunServerTests Task</strong>
          </li>
                      <li class="none">
                          <a href="../../integration/ant/task_webxmlmerge.html" title="WebXmlMerge Task">WebXmlMerge Task</a>
            </li>
              </ul>
        </li>
                      <li class="none">
                          <a href="../../integration/integration_browser.html" title="Browser">Browser</a>
            </li>
                      <li class="none">
                          <a href="../../integration/howto_tomcat.html" title="Tomcat">Tomcat</a>
            </li>
                                                                                                                                                <li class="collapsed">
                          <a href="../../integration/maven/index.html" title="Maven">Maven</a>
                  </li>
                                                                                          <li class="collapsed">
                          <a href="../../integration/maven2/index.html" title="Maven2">Maven2</a>
                  </li>
                      <li class="none">
                          <a href="../../integration/integration_jetty.html" title="Jetty">Jetty</a>
            </li>
                      <li class="none">
                          <a href="../../integration/howto_ide.html" title="Various IDEs">Various IDEs</a>
            </li>
                      <li class="none">
                          <a href="../../integration/howto_junitee.html" title="JUnitEE">JUnitEE</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                                                                    <li class="collapsed">
                          <a href="../../participating/index.html" title="Participating">Participating</a>
                  </li>
          </ul>
                       <h5>Miscellaneous</h5>
                  <ul>
                  <li class="none">
                          <a href="../../cactusname.html" title="Why the name">Why the name</a>
            </li>
                  <li class="none">
                          <a href="../../mock_vs_cactus.html" title="Mock vs Container">Mock vs Container</a>
            </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/jakarta-cactus/TestedOn" class="externalLink" title="Tested On...">Tested On...</a>
            </li>
                                                                                                                                            <li class="collapsed">
                          <a href="../../resources/index.html" title="Resources">Resources</a>
                  </li>
          </ul>
                       <h5>Translations</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.ressources-java.net/cactus" class="externalLink" target="_blank" title="French">French</a>
            </li>
                  <li class="none">
                          <a href="http://jakarta.apache-korea.org/cactus/index.html" class="externalLink" target="_blank" title="Korean">Korean</a>
            </li>
                  <li class="none">
                          <a href="http://www.jajakarta.org/cactus/" class="externalLink" target="_blank" title="Japanese">Japanese</a>
            </li>
          </ul>
                       <h5>See also</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.apachebookstore.com/" class="externalLink" target="_blank" title="Apache Bookstore">Apache Bookstore</a>
            </li>
                  <li class="none">
                          <a href="http://www.planetapache.org/" class="externalLink" target="_blank" title="Planet Apache">Planet Apache</a>
            </li>
                  <li class="none">
                          <a href="http://apache.org/foundation/thanks.html" class="externalLink" target="_blank" title="Apache Sponsors">Apache Sponsors</a>
            </li>
          </ul>
                                                                                                                                     <a href="../../../" title="Jakarta Cactus" class="poweredBy">
        <img class="poweredBy"  alt="Jakarta Cactus" src="../../images/cactusbanner.gif"     />
      </a>
                     
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        

    

        <div class="section">
<h2><a name="RunServerTests_Task"></a>RunServerTests Task</h2>

            
<p>
                The <b>runservertests</b> task provides support for starting up
                a servlet container to run in-container tests, and shutting it down again
                after the tests have completed.
            </p>
            
<p>
                This task will perform several actions, in the following order:
            </p>
            
<ul>
                
<li>
                    Check if a server is already started by constantly trying to
                    call the test URL defined by the <tt>testurl</tt> attribute.
                </li>
                
<li>
                    If a server is not running, call the Ant target defined by the
                    <tt>starttarget</tt>
                    attribute. This target is supposed to start
                    your container. The <b>runservertests</b> task will then
                    constantly poll the server by calling the test URL until the server
                    answers back.
                </li>
                
<li>
                    It will then call the Ant target defined by the
                    <tt>testtarget</tt>
                    attribute. This target is supposed to run the unit tests. This is
                    usually implemented by using the Ant <tt>junit</tt> task.
                </li>
                
<li>
                    Once the tests are finished (i.e. when the
                    <tt>testtarget</tt>
                    has finished executing), it will then
                    call the Ant target defined by the <tt>stoptarget</tt> attribute.
                    This target is supposed to stop the container. The
                    <b>runservertests</b>
                    task will then constantly poll the
                    server by calling the test URL until the server stops answering, at
                    which point it will consider the server to be stopped. Note that the
                    <tt>stoptarget</tt>
                    will only get called if the server was not
                    already started when the <b>runservertests</b> task began
                    executing. This is to allow keeping running servers for intensive
                    debugging phases.
                </li>
            </ul>
            
<p>
                The <b>runservertests</b> task is generic in the sense that you
                are free to define the <tt>starttarget</tt>,
                <tt>testtarget</tt>
                and <tt>stoptarget</tt> as you wish and they will get called at the
                right time.
            </p>

             
<blockquote class="info infomark">
                Since Ant 1.5, the effects of this task can also be achieved by using a
                combination of the built-in Ant tasks <tt>waitfor</tt> (with the
                <tt>http</tt>
                condition), <tt>parallel</tt>,
                <tt>sequential</tt>
                and <tt>antcall</tt>.
            </blockquote>

            
<div class="section">
<h3><a name="Parameters"></a>Parameters</h3>

                
<table border="0" class="bodyTable">
                    
<tr class="a">
                        
<th>Name</th>
                        
<th>Description</th>
                        
<th>Required</th>
                    </tr>
                    
<tr class="b">
                        
<td>testurl</td>
                        
<td>
                            The HTTP URL to check whether the server is running.
                        </td>
                        
<td>Yes</td>
                    </tr>
                    
<tr class="a">
                        
<td>starttarget</td>
                        
<td>
                            The target that is called when the server needs to be started.
                        </td>
                        
<td>Yes</td>
                    </tr>
                    
<tr class="b">
                        
<td>stoptarget</td>
                        
<td>
                            The target that is called when the server should be shut down.
                        </td>
                        
<td>Yes</td>
                    </tr>
                    
<tr class="a">
                        
<td>testtarget</td>
                        
<td>
                            The target that is called once the server is running. This target
                            will normally perform the actual unit tests.
                        </td>
                        
<td>Yes</td>
                    </tr>
                    
<tr class="b">
                        
<td>timeout</td>
                        
<td>
                            The timeout in seconds. If the server could not be started before
                            the timeout is reached, the task will terminate and report a
                            failure.
                        </td>
                        
<td>No</td>
                    </tr>
                </table>

            </div>

            
<div class="section">
<h3><a name="Examples"></a>Examples</h3>

                
<p>
                    In the following example, the target <tt>start.tomcat.40</tt> will
                    be called if the specified test URL is not available. After the server
                    has started up so that requests to the test URL return successful HTTP
                    status codes, the target <tt>test</tt> is called. Finally, after the
                    <tt>test</tt>
                    target has completed, the target
                    <tt>stop.tomcat.40</tt>
                    is called to shut down the servlet
                    container.
                </p>

                
<div class="source">
<pre>
&lt;runservertests
    testurl=&quot;http://localhost:${test.port}/test/ServletRedirector?Cactus_Service=RUN_TEST&quot;
    starttarget=&quot;start.tomcat.40&quot;
    stoptarget=&quot;stop.tomcat.40&quot;
    testtarget=&quot;test&quot;/&gt;
</pre></div>

            </div>

        </div>

    

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2001&#x2013;2017
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All rights reserved.    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
