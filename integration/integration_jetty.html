<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2017-02-26 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Jakarta Cactus &#x2013; Jetty Integration</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../../" id="bannerLeft">
                                                <img src="../images/logocactus.gif" alt="Cactus" />
                </a>
                              <a href="http://jakarta.apache.org/" id="bannerRight">
                                                <img src="../images/jakarta-logo.gif" alt="Apache" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                <div class="xleft">
        <span id="publishDate">Last Published: 2017-02-26</span>
                  &nbsp;| <span id="projectVersion">Version: 1.8.2-SNAPSHOT</span>
                          |                           <a href="http://www.apache.org/" class="externalLink" title="Apache">Apache</a>
        &gt;
                          <a href="http://www.jakarta.apache.org/" class="externalLink" title="Jakarta">Jakarta</a>
        &gt;
                          <a href="../../" title="Cactus">Cactus</a>
        &gt;
    Jetty Integration
              </div>
            <div class="xright">      
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>About</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../goals.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
                          <a href="../features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../news.html" title="News">News</a>
            </li>
                  <li class="none">
                          <a href="../downloads.html" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/sheeper/jakarta-cactus/issues" class="externalLink" target="_blank" title="Bug Database">Bug Database</a>
            </li>
                  <li class="none">
                          <a href="../mail-lists.html" title="Mailing Lists">Mailing Lists</a>
            </li>
                  <li class="none">
                          <a href="../faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/jakarta-cactus/FrontPage" class="externalLink" target="_blank" title="Wiki">Wiki</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                            <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="../getting_started.html" title="Getting started">Getting started</a>
            </li>
                  <li class="none">
                          <a href="../how_it_works.html" title="How it works">How it works</a>
            </li>
                                                                                                                                                                                                                                      <li class="collapsed">
                          <a href="../writing/howto_ejb.html" title="Writing tests">Writing tests</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li class="expanded">
                          <a href="../integration/index.html" title="Running tests">Running tests</a>
                    <ul>
                      <li class="none">
                          <a href="../integration/manual/index.html" title="Manual">Manual</a>
            </li>
                      <li class="none">
                          <a href="../integration/eclipse/index.html" title="Eclipse">Eclipse</a>
            </li>
                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="../integration/ant/index.html" title="Ant">Ant</a>
                  </li>
                      <li class="none">
                          <a href="../integration/integration_browser.html" title="Browser">Browser</a>
            </li>
                      <li class="none">
                          <a href="../integration/howto_tomcat.html" title="Tomcat">Tomcat</a>
            </li>
                                                                                                                                                <li class="collapsed">
                          <a href="../integration/maven/index.html" title="Maven">Maven</a>
                  </li>
                                                                                          <li class="collapsed">
                          <a href="../integration/maven2/index.html" title="Maven2">Maven2</a>
                  </li>
                      <li class="none">
            <strong>Jetty</strong>
          </li>
                      <li class="none">
                          <a href="../integration/howto_ide.html" title="Various IDEs">Various IDEs</a>
            </li>
                      <li class="none">
                          <a href="../integration/howto_junitee.html" title="JUnitEE">JUnitEE</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                                                                    <li class="collapsed">
                          <a href="../participating/index.html" title="Participating">Participating</a>
                  </li>
          </ul>
                       <h5>Miscellaneous</h5>
                  <ul>
                  <li class="none">
                          <a href="../cactusname.html" title="Why the name">Why the name</a>
            </li>
                  <li class="none">
                          <a href="../mock_vs_cactus.html" title="Mock vs Container">Mock vs Container</a>
            </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/jakarta-cactus/TestedOn" class="externalLink" title="Tested On...">Tested On...</a>
            </li>
                                                                                                                                            <li class="collapsed">
                          <a href="../resources/index.html" title="Resources">Resources</a>
                  </li>
          </ul>
                       <h5>Translations</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.ressources-java.net/cactus" class="externalLink" target="_blank" title="French">French</a>
            </li>
                  <li class="none">
                          <a href="http://jakarta.apache-korea.org/cactus/index.html" class="externalLink" target="_blank" title="Korean">Korean</a>
            </li>
                  <li class="none">
                          <a href="http://www.jajakarta.org/cactus/" class="externalLink" target="_blank" title="Japanese">Japanese</a>
            </li>
          </ul>
                       <h5>See also</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.apachebookstore.com/" class="externalLink" target="_blank" title="Apache Bookstore">Apache Bookstore</a>
            </li>
                  <li class="none">
                          <a href="http://www.planetapache.org/" class="externalLink" target="_blank" title="Planet Apache">Planet Apache</a>
            </li>
                  <li class="none">
                          <a href="http://apache.org/foundation/thanks.html" class="externalLink" target="_blank" title="Apache Sponsors">Apache Sponsors</a>
            </li>
          </ul>
                                                                                                                                     <a href="../../" title="Jakarta Cactus" class="poweredBy">
        <img class="poweredBy"  alt="Jakarta Cactus" src="../images/cactusbanner.gif"     />
      </a>
                     
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        

    

        <div class="section">
<h2><a name="Forewords_and_Requirements"></a>Forewords and Requirements</h2>

            
<p>
                This page explains how to run Cactus tests with the Jetty servlet
                container. You will need the single
                <a class="externalLink" href="http://mortbay.org/jetty/">Jetty</a>
                jar, and if you are using JSPs you will also need the Jasper jars.
            </p>

        </div>

        
<div class="section">
<h2><a name="Setting_up_Jetty"></a>Setting up Jetty</h2>

            
<p>
                The idea is to use the
                <tt>org.apache.cactus.extension.jetty.JettyTestSetup</tt>
                JUnit
                TestSetup class provided by Cactus so that Jetty is started before the
                tests are run.
            </p>
            
<p>
                In order to use the TestSetup, you need to wrap your test suite in
                <tt>JettyTestSetup</tt>:
            </p>
            
<div class="source">
<pre>
public class TestJettyAll extends TestCase
{
    public static Test suite()
    {
        TestSuite suite = new TestSuite();
        suite.addTestSuite(MyTestClass1.class);
        [...]
        suite.addTestSuite(MyTestClassN.class);
        
        return new JettyTestSetup(suite);
    }        
</pre></div>

            
<p>
                You can configure the Jetty TestSetup either programatically or
                with system properties:
            </p>
            
<ul>
                
<li>
                    The method <tt>setConfigFile(File)</tt> or the system property
                    <tt>cactus.jetty.config</tt>
                    sets the location of an optional
                    jetty.xml file (see Jetty's documentation for details).
                </li>
                
<li>
                    The method <tt>setResourceDir(File)</tt> or the system property
                    <tt>cactus.jetty.resourceDir</tt>
                    sets the directory containing
                    the web-application resources (expanded WAR). If you omit this step,
                    you'll only be able to use the Servlet Redirector.
                </li>
            </ul>
            
<p>
                In both cases, the value set programatically takes precendence over the
                value of the corresponding system property.
            </p>
            
<blockquote class="info infomark">
                If you're using JSPs you'll need to add the Jasper jars to your
                runtime Classpath (in addition to the Jetty jar).
            </blockquote>

            
<div class="section">
<h3><a name="Example_1:_Running_from_Ant"></a>Example 1: Running from Ant</h3>

                
<p>
                    Let's assume we have a JUnit task that launches the tests.
                    We need to add the Jetty jar and optionally the Jasper jars
                    (if we use JSPs) to the runtime classpath. Then, all we have
                    to do is add the correct VM arguments to configure
                    the <tt>JettyTestSetup</tt> behavior. For example:
                </p>
                
<div class="source">
<pre>
&lt;junit&gt;

    [...]
    
    &lt;jvmarg value=&quot;-Dcactus.contextURL=http://localhost:${test.port}/test&quot;/&gt;
    &lt;jvmarg value=&quot;-Dcactus.jetty.resourceDir=${src.webapp.dir}&quot;/&gt;
    &lt;jvmarg value=&quot;-Dcactus.jetty.config=${src.webapp.dir}/test/jetty.xml&quot;/&gt;

    &lt;classpath&gt;
        [...]
        &lt;!-- Include Jetty jar and optionally Jasper jars in the classpath --&gt;
        &lt;pathelement location=&quot;${jetty.jar}&quot;/&gt;
        &lt;pathelement location=&quot;${jasper-compiler.jar}&quot;/&gt;
        &lt;pathelement location=&quot;${jasper-runtime.jar}&quot;/&gt;    
    &lt;/classpath&gt;
    
    &lt;test name=&quot;org.apache.cactus.sample.TestJettyAll&quot;/&gt;

&lt;/junit&gt;
</pre></div>

            </div>

            
<div class="section">
<h3><a name="Example_2:_Running_from_an_IDE"></a>Example 2: Running from an IDE</h3>

                
<p>
                    Again all you have to do is add the correct VM arguments, and the
                    Jetty and Jasper jars, to the JUnit launch.
                </p>
                
<p>
                    For example in Eclipse you would add the jars, and create a JUnit
                    launch configuration as below:
                </p>
                <img src="../images/jetty_eclipse.png" alt="Eclipse configuration for Jetty" />

            </div>

        </div>
    

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2001&#x2013;2017
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All rights reserved.    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
