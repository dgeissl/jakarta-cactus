<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2017-02-16 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Jakarta Cactus &#x2013; Running Cactus tests from a browser</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../../" id="bannerLeft">
                                                <img src="../images/logocactus.gif" alt="Cactus" />
                </a>
                                            <a href="../../../" id="bannerRight">
                                                <img src="../images/jakarta-logo.gif" alt="Apache" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                <div class="xleft">
        <span id="publishDate">Last Published: 2017-02-16</span>
                  &nbsp;| <span id="projectVersion">Version: 1.8.2-SNAPSHOT</span>
                          |                           <a href="http://www.apache.org/" class="externalLink" title="Apache">Apache</a>
        &gt;
                          <a href="http://www.jakarta.apache.org/" class="externalLink" title="Jakarta">Jakarta</a>
        &gt;
                          <a href="../../" title="Cactus">Cactus</a>
        &gt;
    Running Cactus tests from a browser
              </div>
            <div class="xright">      
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>About</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../goals.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
                          <a href="../features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../news.html" title="News">News</a>
            </li>
                  <li class="none">
                          <a href="../downloads.html" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="http://issues.apache.org/jira/secure/BrowseProject.jspa?id=10471" class="externalLink" target="_blank" title="Bug Database">Bug Database</a>
            </li>
                  <li class="none">
                          <a href="../mail-lists.html" title="Mailing Lists">Mailing Lists</a>
            </li>
                  <li class="none">
                          <a href="../faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/jakarta-cactus/FrontPage" class="externalLink" target="_blank" title="Wiki">Wiki</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                            <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="../getting_started.html" title="Getting started">Getting started</a>
            </li>
                  <li class="none">
                          <a href="../how_it_works.html" title="How it works">How it works</a>
            </li>
                                                                                                                                                                                                                                      <li class="collapsed">
                          <a href="../writing/howto_ejb.html" title="Writing tests">Writing tests</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li class="expanded">
                          <a href="../integration/index.html" title="Running tests">Running tests</a>
                    <ul>
                      <li class="none">
                          <a href="../integration/manual/index.html" title="Manual">Manual</a>
            </li>
                      <li class="none">
                          <a href="../integration/eclipse/index.html" title="Eclipse">Eclipse</a>
            </li>
                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="../integration/ant/index.html" title="Ant">Ant</a>
                  </li>
                      <li class="none">
            <strong>Browser</strong>
          </li>
                      <li class="none">
                          <a href="../integration/howto_tomcat.html" title="Tomcat">Tomcat</a>
            </li>
                                                                                                                                                <li class="collapsed">
                          <a href="../integration/maven/index.html" title="Maven">Maven</a>
                  </li>
                                                                                          <li class="collapsed">
                          <a href="../integration/maven2/index.html" title="Maven2">Maven2</a>
                  </li>
                      <li class="none">
                          <a href="../integration/integration_jetty.html" title="Jetty">Jetty</a>
            </li>
                      <li class="none">
                          <a href="../integration/howto_ide.html" title="Various IDEs">Various IDEs</a>
            </li>
                      <li class="none">
                          <a href="../integration/howto_junitee.html" title="JUnitEE">JUnitEE</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                                                                    <li class="collapsed">
                          <a href="../participating/index.html" title="Participating">Participating</a>
                  </li>
          </ul>
                       <h5>Miscellaneous</h5>
                  <ul>
                  <li class="none">
                          <a href="../cactusname.html" title="Why the name">Why the name</a>
            </li>
                  <li class="none">
                          <a href="../mock_vs_cactus.html" title="Mock vs Container">Mock vs Container</a>
            </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/jakarta-cactus/TestedOn" class="externalLink" title="Tested On...">Tested On...</a>
            </li>
                                                                                                                                            <li class="collapsed">
                          <a href="../resources/index.html" title="Resources">Resources</a>
                  </li>
          </ul>
                       <h5>Translations</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.ressources-java.net/cactus" class="externalLink" target="_blank" title="French">French</a>
            </li>
                  <li class="none">
                          <a href="http://jakarta.apache-korea.org/cactus/index.html" class="externalLink" target="_blank" title="Korean">Korean</a>
            </li>
                  <li class="none">
                          <a href="http://www.jajakarta.org/cactus/" class="externalLink" target="_blank" title="Japanese">Japanese</a>
            </li>
          </ul>
                       <h5>See also</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.apachebookstore.com/" class="externalLink" target="_blank" title="Apache Bookstore">Apache Bookstore</a>
            </li>
                  <li class="none">
                          <a href="http://www.planetapache.org/" class="externalLink" target="_blank" title="Planet Apache">Planet Apache</a>
            </li>
                  <li class="none">
                          <a href="http://apache.org/foundation/thanks.html" class="externalLink" target="_blank" title="Apache Sponsors">Apache Sponsors</a>
            </li>
          </ul>
                                                                                                                                     <a href="../../" title="Jakarta Cactus" class="poweredBy">
        <img class="poweredBy"  alt="Jakarta Cactus" src="../images/cactusbanner.gif"     />
      </a>
                     
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        

    

        <div class="section">
<h2><a name="Running_Cactus_tests_from_a_browser"></a>Running Cactus tests from a browser</h2>

            
<blockquote>
                This section only applies for Cactus 1.4 and greater.
            </blockquote>

            
<div class="section">
<h3><a name="Step_1:_Setting_up_the_classpath"></a>Step 1: Setting up the classpath</h3>

                
<p>
                    In order to run Cactus tests from a browser you need to have a webapp
                    containing your classes to test and your test classes. In addition,
                    both Cactus client side and server side jar classes must be able to be
                    loaded from your webapp (i.e located in your
                    <tt>WEB-INF/lib</tt>
                    directory or in a location available through your container Context
                    class loader (refer to your container documentation).
                </p>

                
<blockquote>
                    Refer to the
                    <a href="manual/howto_classpath.html">Classpath Howto</a>
                    guide for the exact list of jars.
                </blockquote>

            </div>

            
<div class="section">
<h3><a name="Step_2:_Mapping_the_Cactus_Servlet_Test_Runner"></a>Step 2: Mapping the Cactus Servlet Test Runner</h3>

                
<p>
                    Then, in addition to the Cactus redirectors that you have mapped in
                    your <tt>web.xml</tt> (see the
                    <a href="manual/howto_config.html">Configuration howto</a>), you also
                    need to map the Cactus Servlet Test Runner, as follows:
                </p>

                
<div class="source">
<pre>
[...]
&lt;servlet&gt;
    &lt;servlet-name&gt;ServletTestRunner&lt;/servlet-name&gt;
    &lt;servlet-class&gt;
        org.apache.cactus.server.runner.ServletTestRunner
    &lt;/servlet-class&gt;
&lt;/servlet&gt;
[...]
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;ServletTestRunner&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/ServletTestRunner&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
[...]
</pre></div>

            </div>

            
<div class="section">
<h3><a name="Step_3:_Executing_the_tests"></a>Step 3: Executing the tests</h3>

                
<p>
                    Open a browser and type
                    <tt>http://server:port/mywebapp/ServletTestRunner?suite=mytestcase</tt>
                    where:
                </p>
                
<ul>
                    
<li>
                        <tt>server:port</tt>
                        is the name of your server machine and
                        port on which your container is running
                    </li>
                    
<li>
                        <tt>mywebapp</tt>
                        is the name of your webapp (usually the name
                        of your war file)
                    </li>
                    
<li>
                        <tt>mytestcase</tt>
                        is the fully qualified name (i.e. with
                        packages) of your <tt>TestCase</tt> class containing a
                        <tt>suite()</tt>
                        method listing all the tests, in standard
                        JUnit fashion.
                    </li>
                </ul>

                
<p class="image">
                    Here is an example of what you will get:
                    <br />
                    <img src="../images/servlettestrunner_xml.jpg" alt="XML output of ServletTestRunner" />
                </p>

                
<blockquote>
                    If you see a blank page, click on the View source option of your
                    browser. It means your browser doesn't know how to display XML data.
                </blockquote>

                
<p>
                    Ok, that's nice ... But what if I want HTML instead of XML? Don't
                    worry there is a solution. Grab the following
                    <a href="../misc/cactus-report.xsl">XSLT stylesheet</a>
                    (based on the stylesheet used by the
                    <b>&lt;junitreport&gt;</b>
                    Ant task), drop it in your
                    webapp and name it <tt>cactus-report.xsl</tt> (in the root
                    directory for example). Then, open a browser and type
                    <tt>
                        http://server:port/mywebapp/ServletTestRunner?suite=mytestcase&amp;xsl=cactus-report.xsl</tt>.
                    You should see the following:
                </p>
                
<p class="image">
                    <img src="../images/servlettestrunner_html.jpg" alt="HTML output of ServletTestRunner" />
                </p>
                
<blockquote>
                    This will work with Internet Explorer as the XSL transformation is
                    performed on the client side (i.e by the browser). I'm not sure
                    about other browsers.
                </blockquote>

            </div>

            
<div class="section">
<h3><a name="Enabling_Server-Side_XSLT_Transformations"></a>Enabling Server-Side XSLT Transformations</h3>

                
<p>
                    In the previous section, the XSLT transformation was performed on the
                    client. This requires a browser capable of doing XSLT transformations
                    in a standards-compliant manner, and requires adding the location of
                    the stylesheet as a request parameter.
                </p>

                
<p>
                    Since Cactus 1.5, the ServletTestRunner can also perform the
                    transformation on the server-side. To enable that feature, make sure
                    that a JAXP compliant XSLT processor (such as
                    <a class="externalLink" href="http://xml.apache.org/xalan-j/">Xalan</a>) is available to the
                    web-application.
                </p>

                
<p>
                    In addition, the location of the XSLT stylesheet needs to specified as
                    initialization parameter of the ServletTestRunner. For example:
                </p>

                
<div class="source">
<pre>
[...]
&lt;servlet&gt;
    &lt;servlet-name&gt;ServletTestRunner&lt;/servlet-name&gt;
    &lt;servlet-class&gt;
        org.apache.cactus.server.runner.ServletTestRunner
    &lt;/servlet-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;xsl-stylesheet&lt;/param-name&gt;
        &lt;param-value&gt;styles/cactus-report.xsl&lt;/param-value&gt;
    &lt;/init-param&gt;
&lt;/servlet&gt;
[...]
</pre></div>

                
<p>
                    The specified path is relative to the root of the web-application. Of
                    course, the stylesheet needs to exist at that location. In contrast to
                    client-side transformations, the stylesheet may be placed somewhere
                    inside the <tt>WEB-INF</tt> directory, because clients do not need
                    to access it directly.
                </p>

                
<p>
                    If all of the above is correctly set up, you can enable the actual
                    transformation by including a <tt>transform</tt> parameter with
                    the request (the value of the parameter does not matter). For example
                </p>

                
<div class="source">
<pre>
http://server:port/mywebapp/ServletTestRunner?suite=mytestcase&amp;transform=yes
</pre></div>

                
<blockquote>
                    The stylesheet specified as initialization parameter is loaded when
                    the ServletTestRunner gets initialized. Changes to the stylesheet will
                    not get picked up until the web-application is reloaded.
                </blockquote>

            </div>

        </div>

    

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2001&#x2013;2017
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All rights reserved.    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
