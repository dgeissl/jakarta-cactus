<?xml version="1.0"?>

<!DOCTYPE changes SYSTEM "./dtd/changes-v10.dtd">

<changes title="Changes">

  <s1 title="Summary of changes">
    <ul>
      <li>
        <link href="news.html">News and Events</link>
      </li>
      <li>
        <jump anchor="website_changes">Last 15 days web site changes</jump>
      </li>
      <li>
        <jump anchor="release_changes">Release changes</jump>
      </li>
    </ul>
  </s1>

  <!-- ================================================================= -->
  <!-- Last 15 days web site changes -->
  <!-- ================================================================= -->

  <anchor id="website_changes"/>
  <cvslogs title="Last 15 days web site changes">

    <p>
      These are the changes that happened to the Cactus web site for the past
      15 days since the last site update (excluding the todo and changes pages
      which are modified too often) :
    </p>

    &cvslog;

  </cvslogs>

  <!-- ================================================================= -->
  <!-- Release changes -->
  <!-- ================================================================= -->

  <anchor id="release_changes"/>
  <releases title="Release changes">

    <devs>
      <person name="Vincent Massol" email="vmassol@apache.org" id="VMA"/>
      <person name="Nicholas Lesiecki" email="ndlesiecki@yahoo.com" id="NDL"/>
    </devs>

    <release version="1.5" date="- in CVS">
      <action dev="VMA" type="add">
        Added automated Ant scripts for JBoss/Jetty 3.x.
      </action>
      <action dev="VMA" type="add" due-to="Christopher Lenz" due-to-email="cmlenz@gmx.de">
        Added new extension class to help unit test JSP Taglibs. See the
        <code>TestJspTagLifecycle</code> test class in the sample-servlet
        application for help on using it.
      </action>
      <action dev="VMA" type="update">
        Improved error handling when dealing with invalid Cookies.
      </action>
      <action dev="VMA" type="fix" due-to="Roumen B. Antonov" due-to-email="rantonov@fourthgen.com">
        Fixed a potential bug with classloaders. On the server side, Cactus 
        looks for the TestCase class by searching first the WebApp Classloader
        and then the Context ClassLoader. However, the Context ClassLoader is 
        only searched if an Exception (subclass of <code>Exception</code>) is 
        raised. Thus, if a <code>NoClassDefFoundError</code> had been raised, 
        Cactus would not have searched in the Context ClassLoader.
      </action>
      <action dev="VMA" type="update">
        Updated to the latest <code>junit-noframes.xsl</code> from Ant.
      </action>
      <action dev="VMA" type="add" due-to="Atsushi Hasegawa" due-to-email="ahasegawa@borland.com">
        Added support for internationalisation (double byte characters) for 
        sending back test results. This allows Cactus to be used with any
        character set.
      </action>
      <action dev="VMA" type="fix" due-to="Pranab Dhar" due-to-email="Pranab.Dhar@dfa.state.ny.us">
        Fixed bug where a redirector overriden by calling 
        <code>WebRequest.setRedirectorName()</code> was not used to fetch the
        Cactus test result (the default redirector specified in the Cactus
        configuration was used instead).
      </action>
      <action dev="VMA" type="fix" due-to="Stephan Merker" due-to-email="Stephan.Merker@cegedim.fr">
        Fixed bug where Cactus was using the deprecated HttpClient 
        <code>PostMethod.setRequestBody(String)</code> which had some bug 
        related to char to byte encoding. Now using the
        <code>PostMethod.setRequestBody(InputStream)</code> signature.
      </action>
      <action dev="VMA" type="add">
        Added links to Japanese and Korean translations of Cactus.
      </action>
      <action dev="VMA" type="add">
        Ability to get a real HTTP Session cookie before the start of the 
        test. This is achieved by calling the new
        <code>WebRequest.getSessionCookie()</code> method which returns
        a <code>HttpSessionCookie</code> object that you then add to the
        HTTP request. Initially suggested by
        <link href="mailto:kyle.w.willkomm@accenture.com">Kyle W.
        Willkomm</link>.
      </action>
      <action dev="VMA" type="add">
        New <code>WebResponse.getCookieIgnoreCase(cookieName)</code> to get
        the first cookie matching <code>cookieName</code> whatever the case
        (case-insensitive).
      </action>
      <action dev="VMA" type="add" due-to="Jason Robertson" due-to-email="Jason.Robertson@acs-inc.com">
        Added Form-based authentication support (Submitted by Jason Robertson).
      </action>
      <action dev="VMA" type="add">
        Added a <link href="howto_build.html">tutorial</link> that explains how
        to build Cactus from the sources.
      </action>
      <action dev="VMA" type="add">
        Added a Jetty Sample application to demonstrate how to use the new
        Jetty initializer.
      </action>
      <action dev="VMA" type="add">
        Added a Jetty initializer. This is the first implementation of the 
        new initializer feature. This initializer starts Jetty before Cactus 
        tests are run. This is really nice to quickly run tests inside any 
        IDE or even from a simple <code>&lt;junit&gt;</code> Ant taks without 
        the need to package and deploy a WAR. In addition, it is real nice to 
        debug tests this way. Moreover, Jetty starts in less than 1 second, 
        making it completely seamless and transparent! We are now at the same 
        order of magnitude as pure JUnit tests in term of speed ... :-). Of 
        course, this is only for Servlet tests ... I am still waiting for an
        embeddable EJB container that starts in less than 1 second ...
      </action>
      <action dev="VMA" type="add">
		Added notion of Initializer. This is an optional class that you can 
		specify in <code>cactus.properties</code> or as a System property (
		the property name is <code>cactus.initializer</code>). It will be run
		once per JVM only. The initializer class must implement the
		<code>org.apache.cactus.util.Initializable</code> interface.
      </action>
      <action dev="VMA" type="update">
        Update of jars bundled in the Cactus distribution: Commons Logging
        1.0.1, Log4j 1.2.6, HttpClient 2.0alpha1 built on 29/08/2002,
        HttpUnit 1.4.5 and JUnit 3.8.1.
      </action>
      <action dev="VMA" type="add">
        Added support for client side <code>begin(...)</code>
        and <code>end(...)</code> methods. They are called on the
        client side, before and after every test in the same way as the
        JUnit <code>setUp()</code> and <code>tearDown()</code> are called
        before and after each test, but on the server side. <em>Note: web site
        documentation is not yet up to date</em>.
      </action>
      <action dev="VMA" type="add">
        Added a new <code>CheckPropertiesTask</code> Ant task to check
        properties in build files.
      </action>
    </release>

    <release version="1.4.1" date="31 August 2002">
      <action dev="VMA" type="add" due-to="Hirsch Richard" due-to-email="richard.hirsch@siemens.com">
        Added a sample (and thus a test for Cactus) for HttpUnit integration
        as part of the Cactus sample.
      </action>
      <action dev="VMA" type="fix" due-to="Hirsch Richard" due-to-email="richard.hirsch@siemens.com">
        Fixed bug in new HttpClient wrapper in Cactus with regards to the 
        headers returned in the HTTP response (they were offset by one and
        the status line was not returned as a header).
      </action>
      <action dev="VMA" type="fix" due-to="Micah Williams" due-to-email="backOffice@thirdmillenniumvisions.com">
        Fixed bug where <code>NullPointerException</code> would be thrown by Cactus
        <code>ServletTestRunner</code> if an exception raised in a test case had not
        specified a message (i.e. <code>getMessage()</code> returning 
        <code>null</code>).
      </action>
      <action dev="VMA" type="fix" due-to="Gerhard Kreutzer" due-to-email="g.kreutzer@kreutzersoft.de">
        Some JDK implementation return "null" when Class.getClassLoader() is 
        called to indicate that the given class has been loaded by the 
        bootstrap class loader. This was leading to 
        <code>NullPointerException</code> being thrown by Cactus in some
        cases.
      </action>
      <action dev="VMA" type="fix" due-to="Ville SkyttÃ¤" due-to-email="ville.skytta@iki.fi">
        Fixed import bug in sample-servlet which prevented building Cactus
        from the sources on JDK 1.4.
      </action>
      <action dev="VMA" type="fix" due-to="Hirsch Richard" due-to-email="richard.hirsch@siemens.com">
        Fixed default properties for the sample application so that it points 
        to the correct HttpClient jar which is packaged with Cactus (the one 
        built on 06/06/2002).
      </action>
      <action dev="VMA" type="fix" due-to="Larry Tambascio" due-to-email="ltambascio@charter.net">
        Fixed a bug that was preventing having several POST parameters added in 
        the request in <code>beginXXX()</code> methods.
      </action>
      <action dev="VMA" type="fix" due-to="Dave Hoover" due-to-email="dave@redsquirrel.com">
        The encoding in the sample <code>junit-noframes</code> XSL 
        stylesheet was set to be "US-ASCII". It is now set to "UTF-8". 
        Apparently, XSLT processors are only required to support utf-8 
        and utf-16, the rest is processor specific. For example your 
        processor might support US-ASCII-7 and others might support 
        US-ASCII. Thanks to Robert Koberg for the explanation!
      </action>
    </release>
	
    <release version="1.4" date="25 August 2002">
      <action dev="VMA" type="add">
        Added a <link href="howto_jsp.html">tutorial</link> that explains how
        to test JSPs with Cactus.
      </action>
      <action dev="VMA" type="fix" due-to="David George" due-to-email="david.off@voila.fr">
        Fixed JDK 1.2 compatibility (broken in 1.4b1).
      </action>
      <action dev="VMA" type="fix" due-to="Felipe Hoffa" due-to-email="felipehoffa@yahoo.com">
		According to the XML definitions (at least the definitions Mozilla 1.0
		got implemented), the &lt;?xml version...&gt; tag should go before the 
		&lt;?xml-stylesheet...&gt; tag. Using them in the wrong order produces 
		an error when Mozilla tries to render it.
	  </action>
    </release>

    <release version="1.4b1" date="July 31 2002">
      <action dev="VMA" type="add">
        It is now possible to assert response codes in
        <code>endXXX()</code>. For example, you can verify that you servlet
        has returned a 500 response code. See the tests provided in the Sample
        Servlet application which is part of the Cactus distribution. This
        change was possible because we moved the underlying implementation from
        <code>HttpURLConnection</code> to Jakarta Commons
        <link href="http://jakarta.apache.org/commons/httpclient">
        HttpClient</link>. Note: It is still not possible to test a 401
        response code (this limitation has been raised to the HttpClient team).
      </action>
      <action dev="VMA" type="update">
        Refactored internal code to be able to use different HTTP connection
        implementation. 2 are currently provided : one using the JDK
        <code>HttpURLConnection</code> and one using Jakarta Commons
        <link href="http://jakarta.apache.org/commons/httpclient">
        HttpClient</link> (the default one). It can be modified by setting
        the following System property :
        <code>cactus.connectionHelper.classname =
        org.apache.cactus.client.JdkConnectionHelper</code> (for the JDK
        <code>HttpURLConnection</code>). Note that the Servlet Sample test
        that assert response code will fail with the JDK
        <code>HttpURLConnection</code> implementation.
      </action>
      <action dev="VMA" type="add">
        Cactus now requires the Commons Logging library
        (<code>commons-logging.jar</code>). It is needed as Commons HttpClient
        is now using Commons Logging for logging and Cactus depends on
        HttpClient. Cactus is also now using Commons HttpClient for all its
        internal logs. This lets us use any underlying logging implementation :
        Log4j, LogKit, JDK 1.4 Logging, No Logging or SimpleLog (provided with
        Commons Logging - logs to the console). Check the
        <link href="howto_config.html">Config Howto</link> for how
        to configure logging in Cactus.
      </action>
      <action dev="VMA" type="remove">
        Removed deprecated <code>org.apache.cactus.ServletTestRequest</code>
        class (was deprecated in Cactus 1.2).
      </action>
      <action dev="VMA" type="remove">
        Removed deprecated <code>org.apache.cactus.util.ClientCookie</code>
        class (was deprecated in Cactus 1.2).
      </action>
      <action dev="VMA" type="remove">
        Removed deprecated <code>org.apache.cactus.util.AssertUtils</code>
        class (was deprecated in Cactus 1.2).
      </action>
      <action dev="VMA" type="add">
        Added automatic script support for Orion 1.6.
      </action>
      <action dev="VMA" type="fix">
        Ant scripts for Resin, Orion, Tomcat 3.2.4, WebLogic 6.1 and WebLogic
        7.0 now correctly configured for Cactus BASIC authentication tests.
      </action>
      <action dev="VMA" type="add">
        Added automatic script support for WebLogic 7.0.
      </action>
      <action dev="VMA" type="fix" due-to="Daniel Dennison" due-to-email="dennison@mitec.net">
        (<link href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=9544">
         Bug #9544</link>. It seems that it is possible that the test result
         contain an end of line character and the Cactus
         <code>WebTestResultParser</code> was choking on this and seeing
         the returned result as invalid. This has been fixed.
      </action>
      <action dev="VMA" type="add">
        Added Test Coverage Reports as part of the Web Site generation.
      </action>
      <action dev="VMA" type="update">
        Renamed all external jars used in Cactus by suffixing them with their
        versions. This is so that Cactus users will know exactly what jars
        Cactus is packaging. You are of course free to use your own jars and
        Cactus only packages these jars for your convenience. Cactus nows
        packages Log4j 1.2.3, AspectJ Runtime 1.0.4, JUnit 3.7,
        HttpClient 2.0alpha1 built on 6/6/2002, HttpUnit 1.4 and (new) the
        Servlet API 2.2 and 2.3 jars. The Cactus jars have also been renamed
        to include the version number in their names.
      </action>
      <action dev="VMA" type="fix">
        Cactus Sample can be built using Ant 1.4 (support for Ant 1.4 was
        broken by a line introduced in Cactus 1.3 that would only work with
        Ant 1.5. However, this line can easily be commented out).
      </action>
      <action dev="VMA" type="fix" due-to="Marc Brette" due-to-email="Marc.Brette@mkms.xerox.com">
        (<link href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=8640">
         Bug #8640</link>. It also solves bug
         <link href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=8640">
         Bug #4167</link> reported by
         <link href="mailto:eqwalker@yahoo.com">Eric Walker</link>).
         Modified the <code>jspRedirector.jsp</code> so that
         it initializes an HTTP Session (<code>session="true"</code>). There
         is no way I know to make this parameter dynamic so we set it to true
         as this is the most used case. If one of your test must not have a
         session created for it, then you can always use the Redirector
         overriding feature (<code>WebRequest.setRedirectorName(String
         redirectorName)</code>).
      </action>
      <action dev="VMA" type="fix" due-to="Patrick Lightbody" due-to-email="plightbo@hotmail.com">
        Fixed bug where the Test Result object which is put in the Servlet
        Context was not serializable. This might cause some trouble with some
        containers.
      </action>
      <action dev="VMA" type="add" due-to="Marc Brette" due-to-email="Marc.Brette@mkms.xerox.com">
        Added simulation of Remote IP address and Remote Host Name, i.e. you
        can now control what <code>request.getRemoteAddr()</code> and
        <code>request.getRemoteHost()</code> will return. That is useful if
        your code depends on these values.
      </action>
      <action dev="VMA" type="update">
        It is now possible to specify the Cactus properties as System
        properties (the property names are the same as the ones in
        <code>cactus.properties</code>). Also if not specified, redirector
        names are set by default to "ServletRedirector", "JspRedirector" and
        "FilterRedirector".
      </action>
      <action dev="VMA" type="add">
        New <link href="howto_tomcat.html">Quick start tutorial</link> that
        explains how to run Cactus tests quickly in Tomcat.
      </action>
      <action dev="VMA" type="add">
        A cool new way to quickly execute your test cases : Cactus now has
        a JUnit Test Runner called ServletTestRunner (it is a servlet) that
        you start using your browser. See the
        <link href="howto_runner.html">TestRunner Howto</link> tutorial.
      </action>
      <action dev="VMA" type="fix">
        Test classes are now first looked for using the Current classloader
        (the webapp one for Servlets) and if not found using the context
        class loader. Previously the order was the revert, which was not
        logical and could lead to issues.
      </action>
      <action dev="VMA" type="update">
        Improved debugging of <code>runservertests</code> task. Simply run
        Ant in debug mode (<code>ant -debug xxx</code>) and the task will
        print information. Very useful to know why the
        <code>runservertests</code> task seems to hang after starting your
        server ...
      </action>
    </release>

    <release version="1.3" date="April 21 2002">
      <action dev="VMA" type="update">
        Improved classloader support on the server side : Cactus first tries
        to load the Class to test using the Context class loader (thus, if you
        container has set the context class loader to point to the webapp
        classloader you'll be able to use Cactus as an extension and share it
        between projects). If the class cannot be loaded through the context
        class loader, Cactus then tries to load it using the Webapp classloader
        (in that case you'll need to have <code>cactus.jar</code> in your
        <code>WEB-INF/lib</code> directory).
      </action>
      <action dev="VMA" type="fix" due-to="Kjeld" due-to-email="kfr@eos.dk">
       (<link href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=6093">
        Bug #6093</link>). Modified the mechanism to get test result from the
        Server side. Previously Cactus was using a serialized object whereas
        now Cactus sends back XML data.
      </action>
      <action dev="VMA" type="add">
        Added a <link href="testedon.html">Tested On ...</link> page that gives
        the list of Servers/Versions on which Cactus has been tested. Please
        contribute if you have a working configuration not listed there.
      </action>
      <action dev="VMA" type="add">
        Added a <link href="users.html">"Cactus users"</link> page so that
        Cactus users can describe what they are doing with Cactus and share
        that with others.
      </action>
      <action dev="VMA" type="add">
        Added support for Resin 2.1.0. The <code>ResinRun</code> Cactus Ant
        task that is used to start/stop Resin has been modified to support
        both Resin 2.0 and Resin 2.1 (Resin 2.1 has changed its API to start
        it).
      </action>
      <action dev="VMA" type="add">
        Added a Security Howto tutorial to explain how to unit test secure
        Servlet code.
      </action>
      <action dev="VMA" type="update">
        Updated the whole web site for Cactus 1.3 and added some FAQ entries.
      </action>
      <action dev="VMA" type="update">
        Improved Cactus logging. Cactus logging is now enabled by a
        <code>cactus.enableLogging=true</code> property that needs to be either
        defined in <code>cactus.properties</code> (which also needs to be part
        of the server WAR if you wish to turn on logging on the server side) or
        by using a java parameter (<code>-Dcactus.enableLogging=true</code>).
        If Log4J is not in the classpath, then logging is disabled.
      </action>
      <action dev="VMA" type="add">
        Added a <link href="news.html">"News"</link> page with all news and
        events regarding Cactus. It is also supposed to act as a history page.
      </action>
      <action dev="VMA" type="fix" due-to="Steven L. Youtsey" due-to-email="syoutsey@unwiredexpress.com">
        (<link href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=4563">
        Bug #4563</link>).
        <code>HttpServletContextWrapper.getRequestDispatcher()</code> now throws
        <code>null</code> when the wrapped servlet context returns 
        <code>null</code> when asked for a request dispatcher.
      </action>
      <action dev="VMA" type="fix" due-to="Kim Madsen" due-to-email="kim.madsen@inceptor.com">
        Wrapped <code>HttpServletRequest.getRequestURL()</code> (Servlet API
        2.3 only) to take into account the simulated URL (if any).
      </action>
      <action dev="VMA" type="update">
        Completely reworked the internal Cactus build scripts and directory
        structure to make it more flexible and to prepare for the upcoming
        J2EE Sample application (we only have a Servlet Sample so far).
      </action>
      <action dev="VMA" type="fix" due-to="Aslak Hellesoy" due-to-email="aslak.hellesoy@netcom.no">
        Corrected bug that prevented using testURL in runservertests with a URL
        that returned nothing. Also added some verbose logs.
      </action>
      <action dev="VMA" type="add">
        New <link href="http://jakarta.apache.org/cactus/stats/index.html">Web
        site Statistics</link> page, using Webalizer.
      </action>
      <action dev="VMA" type="fix" due-to="Kim Madsen" due-to-email="kim.madsen@inceptor.com">
        Corrected issue with <code>getNamedDispatcher()</code> not returning
        <code>null</code> when called with a servlet name that cannot be found,
        as is expected by the spec. Added test cases to verify the behaviour.
      </action>
      <action dev="VMA" type="add">
        <link href="howto_migration.html">Migration tutorial</link> that
        explains how to move from Cactus 1.2 to Cactus 1.3
      </action>
      <action dev="VMA" type="add">
        Cactus now supports JDK 1.4. Actually the only change made to support it
        was to use the <code>assertXXX()</code> methods of JUnit instead of
        the <code>assert()</code> one, which is now a reserved keyword in
        JDK 1.4.
      </action>
      <action dev="VMA" type="update">
        Updated coding conventions and added target to Ant build file for
        automatic checking of conventions using
        <link href="checkstyle.sf.net">Checkstyle</link>.
      </action>
      <action dev="VMA" type="update">
        Reformatted all sources to be compliant with our coding conventions
        (checked using
        <link href="http://sf.net/projects/checkstyle">Checkstyle</link>).
      </action>
      <action dev="VMA" type="add" due-to="Sean Zhang" due-to-email="sean.zhang@verizon.com">
        New <link href="howto_ide_jbuilder5.html">JBuilder5 integration
        tutorial</link>.
      </action>
      <action dev="VMA" type="add">
        Added support for BASIC authentication. Thanks to
        <link href="mailto:Jason.Robertson@acs-inc.com">Jason Robertson</link>
        and
        <link href="mailto:pwong@sct.com">Peter Wong</link>. See class
        <code>TestServletTestCase_Authentication</code> in the sample unit
        tests for an example on how to use it.
      </action>
      <action dev="VMA" type="add">
        Added <code>WebRequest.setRedirectorName(String redirectorName)</code>
        to override default <code>cactus.servletRedirectorName</code> parameter
        that you define in <code>cactus.properties</code>. This lets you
        define a redirector per test case if you wish. It is useful when you
        want to test some servlet methods that are secured and others that are
        not, for example.
      </action>
      <action dev="VMA" type="update">
        Modified <code>cactus.properties</code> configuration parameters. For
        example, where you previously were writing
        <code>cactus.servletRedirectorURL = http://localhost:8080/test/ServletRedirector</code>
        you would now have 2 parameters :
        <code>cactus.contextURL = http://localhost:8080/test</code> and
        <code>cactus.servletRedirectorName = ServletRedirector</code>.
      </action>
      <action dev="VMA" type="fix" due-to="Balki Nakshatrala" due-to-email="Balki@Yodlee.com">
        Cactus is now working again with JDK 1.2.
      </action>
      <action dev="VMA" type="add">
        Added LICENSE file to all Cactus jars, in <code>META-INF/</code>
        directory.
      </action>
      <action dev="VMA" type="fix" due-to="Larry Isaacs" due-to-email="Larry.Isaacs@sas.com">
        Improved Tomcat 3.3 configuration that is bundled with the Cactus
        sample application and added <code>delaySocketClose="true"</code>,
        which is a new attribute of Tomcat 3.3.1. The reason is that on fast
        CPU Tomcat 3.3.0 is releasing too quickly opened sockets and the Cactus
        client side gets a "socket closed by peer" exception.
      </action>
      <action dev="VMA" type="add">
        Added automatic script support for WebLogic 6.1.
      </action>
      <action dev="VMA" type="fix">
        Corrected bug in
        <code>AbstractHttpServletRequestWrapper.getPathTranslated()</code> which
        was not returning <code>null</code> when <code>getRealPath("/")</code>
        was returning <code>null</code>. It is allowed by the spec. to return
        <code>null</code> upon certain conditions (see section SRV.4.5 of the
        Servlet 2.3 spec.).
      </action>
      <action dev="VMA" type="add" due-to="Jim Young" due-to-email="Jim.Young@cibc.com">
        Add a tutorial for setting up Cactus in VAJava with Tomcat environment.
      </action>
      <action dev="VMA" type="fix" due-to="Piyush Asthana" due-to-email="piyush.asthana@patni.com">
        Compatibility with JDK 1.2 was broken by using the
        <code>URL.getPath()</code> in <code>HttpClientHelper</code>. It is now
        fixed and should work both for JDK 1.2 and 1.3.
      </action>
      <action dev="VMA" type="add">
        Added a <code>AbstractTestCase.getLogger()</code> method that lets any
        test case class get access to a logger to perform its own logging. Logs
        will go into the Cactus log files.
      </action>
      <action dev="VMA" type="update">
        By default, the Cactus log4j configuration file defines a root category
        that logs to the Cactus log file with a DEBUG Priority. There is another
        category for the Cactus classes with a Priority of WARN so that no
        debug logs will be printed by default.
      </action>
      <action dev="VMA" type="add">
        Cactus is now using AspectJ under the hood to provide automatic logging
        of entries and exits of methods (for debugging purpose) and to
        automatically initialise the logging subsystem. The next step is to add
        automatic configuration checking using AspectJ. The consequence for end
        users if that they now need to include the <code>aspectjrt.jar</code>
        jar in their classpaths (both client side and server side). It is a
        small jar (25ko) that is packaged in the cactus distribution.
      </action>
      <action dev="VMA" type="add">
        Added new java property "<code>cactus.config</code>" to specify location
        of cactus properties file (you pass it on the command line, ex:
        "<code>java -Dcactus.config=conf/mycactus.properties</code>"). If not
        specified, Cactus will look for a "<code>cactus.properties</code>" file
        in the classpath.
      </action>
      <action dev="VMA" type="add" due-to="Kaarle Kaila" due-to-email="kaarle.kaila@iki.fi">
        New howto that explains how to use JUnitEE as a Test Runner for
        executing Cactus tests from within the container (i.e. Cactus client
        and server sides live in the same JVM in the container).
      </action>
      <action dev="VMA" type="fix">
        Fixed bug in <code>MockHttpURLConnection</code> that was triggered by
        some modification in HttpUnit. It means that some Cactus 1.2 unit tests
        will fail if run with HttpUnit 1.2.8 (still in CVS on the 12/11/01).
      </action>
      <action dev="VMA" type="update">
        Moved the Jyve FAQ to an internal FAQ - because Jyve was not always up
        and also so that we can have our FAQ in CVS along with the rest of the
        documentation.
      </action>
      <action dev="VMA" type="fix" due-to="Chris Hazen" due-to-email="cjkchazen@earthlink.net">
        (<link href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=4563">
        Bug #4563</link>).
        The <code>getHost()</code> method of the <code>ServletURL</code> class
        returns the ":" signifing the start of the port number of the host.
        This has side effects in Cactus in that passing
        in the host name and port into the WebRequest method as "127.0.0.1:7001"
        will cause Cactus to use this url "http://127.0.0.1::7001".
      </action>
      <action dev="VMA" type="update">
        Added support for JUnit 3.8 (which has replaced the <code>name()</code>
        method by a <code>getName()</code> one). Note that Cactus is still
        supporting earlier versions of JUnit.
      </action>
      <action dev="VMA" type="add">
        Added a new method : <code>WebRequest.setContentType(String)</code>
        (if you don't specify anything it default to
        "application/x-www-form-urlencoded"). This will set the
        content type HTTP header for the request. You can get this value from
        your server code by calling
        <code>HttpServletRequest.getContentType()</code>.
      </action>
      <action dev="VMA" type="add">
        Added new method : <code>WebRequest.setUserData(InputStream)</code> to
        allow sending arbitrary data in the request body. Note that calling this
        method will invalidate any parameters that were set to be sent in the
        request body.
      </action>
      <action dev="VMA" type="add">
        Added support for testing code which uses
        <code>HttpServletRequest.getReader()</code>. Note: there seems to be
        a bug in Orion 1.4 for using <code>getReader()</code>. It runs fine
        on Orion 1.5 however.
      </action>
      <action dev="VMA" type="remove">
        The <code>WebRequest.setMethod()</code> has been removed as deprecating
        it would have led to potential error difficult to locate (as Cactus
        default behaviour is now to pass parameter using GET, whereas before
        it was passing them using POST).
      </action>
      <action dev="VMA" type="update">
        The existing <code>WebRequest.addParameter(name, value)</code> is
        now passing the parameter in the URL query string by default (same as
        calling <code>WebRequest.addParameter(name, value,
        WebRequest.GET_METHOD)</code>.
      </action>
      <action dev="VMA" type="add">
        Added a new <code>WebRequest.addParameter(name, value, method)</code>
        where method is either "GET" or "POST". This let you choose on a fine
        grain level, which method you'd like to use to pass a given parameter.
      </action>
      <action dev="VMA" type="update">
        Changed the way Cactus passes internal parameters to the redirectors.
        They were previously passed as POST parameters (in the request body).
        They are now passed in the query string of the URL. This is to prepare
        the path for supporting unit testing binary data sent to servlets
        (like files, ...). Thanks to
        <link href="mailto:kevinj@develop.com">Kevin Jones</link> for raising
        awareness of the issue and thanks to
        <link href="mailto:alvins@dsl.ab.ca">Alvin</link> for providing a fix.
      </action>
      <action dev="VMA" type="remove">
        Removed <code>ServletTestRequest</code>. It was deprecated in version
        1.2 and is now removed in 1.3. You should use <code>WebRequest</code>
        instead.
      </action>
    </release>

    <release version="1.2" date="September 25 2001">
      <action dev="NDL" type="add">
        Added code sample for unit testing tag libs.
      </action>
      <action dev="VMA" type="add">
        Tutorial for unit testing EJBs. Thanks to
        <link href="mailto:hudsoncwwong@yahoo.com">Hudson Wong</link>.
      </action>
      <action dev="NDL" type="add">
        Tutorial for unit testing Taglibs.
      </action>
      <action dev="VMA" type="add">
        Tutorial for unit testing Servlet Filters.
      </action>
      <action dev="VMA" type="add">
        <code>HttpServletRequestWrapper.getPathTranslated()</code> now takes
        into account any path info set up in <code>WebRequest.setURL()</code>.
      </action>
      <action dev="VMA" type="fix">
        Transform the <code>WebResponse.getText()</code> and
        <code>WebResponse.getTestAsArray()</code> so that they can be called
        repeatably and produce the same results. Previously the data were
        read from the server output stream and thus the second read was not
        returning anything (as it has already been read).
      </action>
      <action dev="VMA" type="update">
        <strong>Cactus is now a top level Jakarta project. The package names
        have been changed from <code>org.apache.commons.cactus</code> to
        <code>org.apache.cactus</code></strong>.
      </action>
      <action dev="VMA" type="fix" due-to="Nicholas Lesiecki" due-to-email="nick@eblox.com">
        Bug fix: <code>getRequest()</code>, <code>getServletContext()</code>
        and <code>getServletConfig()</code> methods on the
        <code>pageContext</code> implicit object (available in
        <code>JspTestCase</code>) now returns the Cactus wrapped versions of
        these objects, thus taking into account the simulated URL.
      </action>
      <action dev="VMA" type="add">
        Added support for unit testing Servlet Filters (Servlet API 2.3 only)
        by providing a new <code>FilterTestCase</code> test case class. Also
        added some filter unit testing samples in the distribution.
      </action>
      <action dev="VMA" type="fix" due-to="Tony Payne" due-to-email="anthonyp@petsmart.com">
        (<link href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=3427">
        Bug #3427</link>).
        The Cactus HTTP client was following redirects.
        This is wrong for unit tests as we should be able to assert returned
        headers, cookies, ... even for a redirect response.
      </action>
      <action dev="VMA" type="add">
        New <code>WebRequest.addCookie(String theDomain, String
        theName, String theValue)</code> and
        <code>WebRequest.addCookie(Cookie theCookie)</code> methods for
        adding cookies to the request.
      </action>
      <action dev="VMA" type="add">
       New <code>org.apache.cactus.Cookie</code> class that replaces
       the old <code>org.apache.cactus.util.ClientCookie</code> one
       which has been deprecated. The new Cookie class can be used in
       <code>beginXXX()</code> and <code>endXXX()</code> methods to
       manipulate cookies.
      </action>
      <action dev="VMA" type="update">
        Improved cookie handling and support for domains and paths. It means
        that the domain need to match either the redirector host name or
        the host specified in the call to <code>setURL()</code>, otherwise
        the cookie won't get sent. If no domain is used when adding a cookie
        to <code>WebRequest</code> then "locahost" domain is used. The cookie
        path is optional and can be null. If not null, the cookie is only
        sent for requests starting with the path URL.
      </action>
      <action dev="VMA" type="add">
        New dependency on the Jakarta Commons HttpClient component. It is
        used to manage client cookies, i.e. all Cactus code for managing
        cookies has been removed in favor of HttpClient. The consequence is
        that cookie handling now complies much better to the specifciation.
      </action>
      <action dev="VMA" type="fix" due-to="Ron Smith" due-to-email="rsmith7209@yahoo.com">
        Modified <code>cactus.properties</code> and <code>web.xml</code>
        mappings (by adding a trailing forward slash to redirector URL and
        mappings) to support test cases that returns an HTTP status code
        greater than 400. Otherwise <code>HttpURLConnection</code> returns
        a <code>FileNotFoundException</code>.
      </action>
      <action dev="VMA" type="add">
        Added a <code>Vector getLogs()</code> method to
        <code>ServletContextWrapper</code> that returns a vector of the log
        messages generated by calls to <code>ServletContext.log()</code>.
        This is to easily assert the content of these calls when writing
        test cases.
      </action>
      <action dev="VMA" type="update">
        Some major refactorings and clean up of code ...
      </action>
      <action dev="VMA" type="add">
        Added automatic Ant script support for Orion 1.5.x
      </action>
      <action dev="VMA" type="fix" due-to="Navjeet Chabbewal" due-to-email="navjeet@proxicom.com">
        The test result object that was placed in the
        <code>ServletContext</code> scope was not serializable, causing errors
        on IPlanet 6.x
      </action>
      <action dev="VMA" type="add">
        Added new end method signature that integrates with HttpUnit. You now
        have the possibility to use the full assertion power of HttpUnit in
        your end method. You simply need to define your end methods with the
        following signature :
        <code>endXXX(com.meterware.httpunit.WebResponse)</code>. If you don't
        need that power and only want to do simple asserts you can use the
        <code>endXXX(org.apache.cactus.WebResponse)</code> signature
        which will let you do simple assertions (cookies, headers, content as
        a String, ...).
      </action>
      <action dev="VMA" type="update">
        Deprecated the way to write end methods. The new correct way is
        <code>endXXX(org.apache.cactus.WebResponse theResponse)</code>
        (it was <code>endXXX(HttpURLConnection theConnection)</code>
        previously). All helper methods of <code>AssertUtils</code> have been
        included in <code>WebResponse</code> and <code>AssertUtils</code> is
        now deprecated.
      </action>
      <action dev="VMA" type="update">
        Deprecated <code>ServletTestRequest</code>. New correct way of writing
        a begin method is <code>beginXXX(WebRequest theRequest)</code>. The
        class methods are the same.
      </action>
      <action dev="VMA" type="update" due-to="Paul Dillon" due-to-email="paul.dillon@solnet.com.au">
        The Cactus <code>runservertests</code> custom Ant task will now not
        stop the server if it was running before the task was executed. This
        is to allow to run and rerun Cactus tests without starting/stopping
        the server every time you run the tests.
      </action>
      <action dev="VMA" type="update">
        Updated all Cactus documentation and reorganised it to better
        understand what Cactus is, how it works and how to use it.
      </action>
      <action dev="VMA" type="add">
        The port used to start the servlet engines when running the sample
        tests (using the provided Ant scripts) is now configurable. This allows
        for not interfering with other servers running on the same port.
      </action>
      <action dev="VMA" type="add">
        New tutorial for integration within JBuilder. Thanks to
        <link href="mailto:cchabanois@ifrance.com">Cedric Chabanois</link>
        and <link href="mailto:Kunal_Vaishnav@jdedwards.com">Kunal
        Vaishnav</link> for providing this tutorial.
      </action>
      <action dev="VMA" type="fix" due-to="Jari Worsley" due-to-email="jariw@hyperlink-interactive.co.uk">
        Log4j was not initialized on the server side when using JSP Redirector
        (it was initialized only when using the Servlet Redirector)
      </action>
      <action dev="VMA" type="fix" due-to="Jari Worsley" due-to-email="jariw@hyperlink-interactive.co.uk">
        <code>HttpServletRequestWrapper.getRequestDispatcher()</code> was not
        returning a wrapped request dispatcher, thus causing error when
        forward() or include() was used afterwards.
      </action>
      <action dev="VMA" type="add">
        New tutorial for integration within VisualAge for Java. Thanks to
        <link href="mailto:Todd_Idler@jdedwards.com">
        Todd Idler</link> and <link href="mailto:andrew.forman@wcom.com">
        Andrew B Forman</link> for providing the information for this tutorial.
      </action>
      <action dev="VMA" type="add">
        Added automatic Ant script support for Tomcat 3.3.
      </action>
      <action dev="VMA" type="add" due-to="Jari Worsley" due-to-email="jariw@hyperlink-interactive.co.uk">
        Now all HTTP parameters specified in the URL when using the
        <code>ServletTestRequest.setURL()</code> method are automatically
        passed as real HTTP parameters to the server side, meaning you don't
        have to manually call <code>addParameters()</code>.
      </action>
      <action dev="VMA" type="fix" due-to="Kunal Vaishnav" due-to-email="Kunal_Vaishnav@jdedwards.com">
        Fixed bug : URL encoding was applied to cookies so that when passing
        a special in a cookie it would get encoded when trying to retrieve it.
        Thanks to <link href="mailto:jariw@hyperlink-interactive.co.uk">
        Jari Worsley</link> for fixing it.
      </action>
    </release>

    <release version="1.1" date="June 18 2001">
      <action dev="VMA" type="add" due-to="Robert Leftwich" due-to-email="digital@ix.net.au">
        Added automatic script support for Enhydra 3.1
      </action>
      <action dev="VMA" type="update">
        Tested with JUnit 3.7.
      </action>
      <action dev="VMA" type="add">
        Added automatic script support for Resin 2.0
      </action>
      <action dev="VMA" type="add">
        Added logging facility to Cactus, using the Log4j logging framework.
        In order to make it easy on end users, Log4j is only required when
        building Cactus from the sources. It is however optional when running
        Cactus tests. If the log4j jar is present logs will be generated and if
        not, then no log will be generated.
      </action>
      <action dev="VMA" type="fix" due-to="Bob Davison" due-to-email="bob.davison@reuters.com">
        (<link href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=1612">
        Bug #1612</link>). With some servlet engines (like Tomcat) there is a
        risk that the test result will not be committed to the servlet
        application scope *before* the client requests the test result, thus
        getting a no result exception or, worse, getting the result from the
        previous test. Also, if the returned result is bigger than the default
        buffer the server would block until the client side reads the data,
        thus resulting in a deadlock with the above-mentionned bug.
      </action>
      <action dev="VMA" type="add">
        Added a new mehod <code>AssertUtils.getResponseAsStringArray()</code>
        that returns the servlet output stream as an array of string (each
        line terminated by a end of line is a string) in the
        same spirit as the <code>AssertUtils.getResponseAsString()</code>
        method which returnes the result as a single string.
      </action>
      <action dev="VMA" type="fix" due-to="Bob Davison" due-to-email="bob.davison@reuters.com">
        (<link href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=1610">
        Bug #1610</link>). Corrected handling of multi-line text in
        <code>AssertUtils.getResponseAsString()</code> which was not handling
        correctly line terminators (they were skipped).
      </action>
    </release>

    <release version="1.0" date="May 2 2001">
      <action dev="VMA" type="fix" due-to="Arun Katkere" due-to-email="katkere@praja.com">
        (<link href="http://nagoya.apache.org/bugzilla/show_bug.cgi?id=1582">
        Bug #1582</link>). Applied patch from Arun Katkere in order to prevent
        the "connexion reset by peer" error message that may appear in Tomcat
        when the connection is broken without reading the requested URL by the
        custom Ant tasks to start and stop a server.
      </action>
      <action dev="VMA" type="add">
        Added a contributing section that explains how to contribute to Cactus.
      </action>
      <action dev="VMA" type="add">
        Added a license page on the Cactus web site that explains that Cactus
        is under the APL license.
      </action>
      <action dev="VMA" type="add">
        Added a new target called <code>deploy-site</code> that automatically
        deploy the generated web site to it's home page on the Jakarta server.
        This will be very useful when integrated with GUMP nightly builds so
        that the web site is always up to date.
      </action>
      <action dev="VMA" type="update">
        Added a "assigned to" description for items assigned to someone on the
        todo page + lists all the developers already assigned to tasks.
      </action>
      <action dev="VMA" type="update">
        Make the <code>ChangeLogTask</code> work even when not connected to the
        Internet (i.e. use previous <code>cvslog.xml</code> file or generate
        an empty one if non already exists).
      </action>
      <action dev="VMA" type="add">
        Modified the Changes page so that users can see at a glance the list of
        pages that have been modified recently on the Cactus web site.
      </action>
      <action dev="VMA" type="add">
        Display the last updated date on the Cactus web site, in the left menu
      </action>
    </release>

    <release version="1.0b2" date="April 20 2001">
      <action dev="VMA" type="update">
        Some minor refactoring of code (added <code>AbstractTestCase</code>,
        modified <code>AbstractHttpClient</code>, <code>JspHttpClient</code>,
        <code>ServletHttpClient</code>).
      </action>
      <action dev="VMA" type="add" due-to="Hoani Cross" due-to-email="cross@tahiti-surf.com">
        Add handling of multivalued HTTP headers (same header name with different
        values) in <code>ServletTestRequest</code>.
      </action>
      <action dev="VMA" type="update">
        Made the methods <code>setUp()</code> and <code>tearDown()</code>
        protected on the server side so that it is consistent with JUnit.
      </action>
      <action dev="VMA" type="update" due-to="Philip Aston" due-to-email="paston@bea.com">
        Modified the Ant <code>runservertest</code> task so that it also works
        when a servlet engine is already up and running and when a server is
        already stopped prior. This is to support intensive debugging mode when
        we don't want to start/stop the server all the time.
      </action>
      <action dev="VMA" type="add">
        Added a "Cactus scope and status" page on the web
        site that explains the current scope and status of Cactus.
      </action>
      <action dev="VMA" type="add">
        Added a "Cactus goals" page on the web site that
        gives rough goals and guidelines for the future of Cactus.
      </action>
      <action dev="VMA" type="update" due-to="Jeff Turner" due-to-email="jeff@socialchange.net.au">
        Improved build process so that it nows works even if junit, stylebook, ..
        jars are not in the <code>CLASSPATH</code> prior to running the build.
      </action>
    </release>

    <release version="1.0b1" date="April 9 2001">
      <action dev="VMA" type="update">
        Updated the Cactus distribution so that everything is contained into one
        single file (doc + jars + sample). The sources are available separately
        in a second file.
      </action>
      <action dev="VMA" type="add">
        Added a section on the main web site page to explain the reason for the
        Cactus name.
      </action>
      <action dev="VMA" type="update">
        Tested with JUnit 3.6.
      </action>
      <action dev="VMA" type="update">
        Changed the web site skin to be the Jakarta skin and not the Apache XML
        skin. This is because Cactus is now part of the Jakarta Commons project.
      </action>
      <action dev="VMA" type="update">
        Updated the web site installation section to better explain the
        required steps to install Cactus. Namely, it covers
        installing Ant and installing the Cactus Sample application.
      </action>
      <action dev="VMA" type="remove">
        Removed the deliverable dependencies jar. Instead, provides a zipped
        installation of Ant containing the needed jars for tasks used by Cactus
        and Cactus Sample build files.
      </action>
      <action dev="VMA" type="update">
        Removed the <code>misc/</code> directory and JBuilder files from CVS
        and source distribution.
      </action>
      <action dev="VMA" type="update">
        Renamed the project from J2EEUnit to Cactus. Although it was a difficult
        decision to make, it had to be done as J2EE is a Sun trademark. Renamed
        all occurrences of J2EEUnit to Cactus and changed package names (from
        <code>j2eeunit.*</code> to <code>org.apache.commons.cactus.*</code>.
      </action>
      <action dev="VMA" type="fix">
        The sample application sources now contains all needed configuration
        files (the manifest and web.xml files were missing in the previous
        release).
      </action>
      <action dev="VMA" type="update">
        Donated the project to the Apache Software Foundation.
        Changed license from GPL to APL. Moved packages from
        <code>j2eeunit.*</code> to <code>org.apache.commons.j2eeunit.*</code>
        and changed copyrights
      </action>
    </release>

  </releases>

</changes>