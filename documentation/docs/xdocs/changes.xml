<?xml version="1.0"?>

<!--
 * ========================================================================
 * 
 * Copyright 2001-2005 The Apache Software Foundation.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 * ========================================================================
-->

<document id="changes">

  <properties>
    <title>Changes</title>
  </properties>

  <body>

    <section title="Summary of changes">
      <ul>
        <li>
          <link href="site:news">News and Events</link>
        </li>
        <li>
          <jump anchor="website_changes">Last 15 days web site changes</jump>
        </li>
        <li>
          <jump anchor="release_changes">Release changes</jump>
        </li>
      </ul>
    </section>

    <!-- ================================================================= -->
    <!-- Last 15 days web site changes -->
    <!-- ================================================================= -->

    <anchor id="website_changes"/>
    <section title="Last 15 days web site changes">

      <p>
        These are the changes that happened to the Cactus web site for the past
        15 days since the last site update (excluding the todo and changes 
        pages which are modified too often):
      </p>

      <!-- Note: The XSL stylesheet will include the CVS changelog here -->
      <cvschangelog/>
      
    </section>

    <!-- ================================================================= -->
    <!-- Release changes -->
    <!-- ================================================================= -->

    <anchor id="release_changes"/>
    <releases title="Release changes">

      <p>
        The changes below are important changes visible to the user. Small
        scale changes that are not externally visible are available from
        the Cactus CVS using the cvs log feature or using the ViewCVS
        interface.
      </p>
      <p>
      	Older release changes are <a href="site:changes_archive">archived</a>.
      </p>
      <p>
      	Changes to the Maven Cactus plugin can be found on the
      	<a href="ext:integration_maven_changes">Maven integration release 
      	changes page</a>.
      </p>

      <release version="versions newer than 1.7" date="...">
        <action dev="VMA" type="update">
          Since version 1.7.1 of Cactus all changes are now recorded using
          Apache's <a href="ext:jira">JIRA</a>. The list of changes for an 
          unreleased version is available in the 
          <strong><a href="ext:jira_roadmap">JIRA roadmap report</a></strong> 
          and the released version changes in the 
          <strong><a href="ext:jira_changelog">JIRA changelog 
          report</a></strong>.
        </action>
      </release>
      
      <release version="1.7" date="28 Jan 2005">
        <action dev="VMA" type="update">
          Tested with Orion 1.6.0b, Orion 2.0.4, Tomcat 4.1.31, Tomcat 5.0.29,
          Resin 2.1.14, Resin 3.0.9, JBoss 3.2.6.
        </action>
        <action dev="VMA" type="update">
          Added support for Resin 3.0.9 and above.
        </action>
        <action dev="VMA" type="update">
          Upgraded following dependencies: Commons BeanUtils to 1.7.0, Commons
          Collections to 3.1, Commons HttpClient to 2.0.2 and Commons Logging
          to 1.0.4.
        </action>
        <action dev="FAL" type="add" issue="CACTUS-158" due-to="Matheus Bianconi">
          Add attribute <code>jvmArgs</code> in the container tasks.
        </action>
        <action dev="VMA" type="fix">
          The <code>&lt;resin3x&gt;</code> element of the 
          <code>&lt;cactus&gt;</code> task is now correctly using the
          user-defined port (<code>port</code> attribute). The port was
          previously hardcoded to <code>8080</code>.
        </action>
        <action dev="VMA" type="fix">
          The Cactus Servlet Test Runner now re-initializes the Cactus 
          configuration when it is called the first time (in its 
          <code>init()</code> method). This allows testing several webapps
          in the same JVM (i.e without restarting the container).
        </action>
        <action dev="VMA" type="add" issue="CACTUS-119">
          The <code>&lt;jboss3x&gt;</code> container element now supports 
          running JBoss in a temporary directory, specified by the 
          <code>tmpdir</code> attribute. In addition, by using the
          <code>configDir</code> attribute, you can now specify a
          directory where you have stored a custom JBoss server configuration
          (identified by the <code>config</code> attribute).
          This configuration will be copied to the tmp directory and used
          to configure JBoss.
        </action>
        <action dev="VMA" type="fix" issue="CACTUS-123" due-to="Maxwell Grender-Jones">
          Cactus was failing with a <code>NullPointerException</code> if the 
          response was not returning any output stream (which happens if 
          <code>response.setStatus(HttpServletResponse.SC_NO_CONTENT)</code> is
          called for example).
        </action>
        <action dev="VMA" type="fix" issue="CACTUS-122" due-to="Raphael Philipe Mendes da Silva">
          Fixed "<code>java.lang.NumberFormatException: For input string: 
          "localhost"</code>" error that was happening when using the 
          &lt;cactus&gt; task with JBoss 3.0.8. It was due to the fact that 
          JBoss 3.0.8 does not support the new <code>--server</code> parameter 
          which works with newer versions of JBoss 3.x
        </action>
        <action dev="VMA" type="add">
          Added new <code>&lt;resin2x&gt;</code> and
          <code>&lt;resin3x&gt;</code> tasks to start/stop
          Resin 2.x/3.x instances.
        </action>
        <action dev="VMA" type="update">
          Building Cactus from the sources now requires Ant 1.6.1+ (Ant 1.6.2
          if you're using JDK 5). The Cactus build also been simplified a lot 
          and external libraries are automatically downloaded from ibiblio.org 
          if not present on the file system.
        </action>
        <action dev="VMA" type="update" issue="CACTUS-120">
          Ensure faster shutdown times with WebLogic 7.x by using the 
          <code>FORCESHUTDOWN</code> WebLogic command instead of the graceful
          one.
        </action>  
        <action dev="VMA" type="update" issue="CACTUS-118">
          The <code>JettyTestSetup</code> class now checks if the Jetty server
          is already started and only starts it if it isn't running. It also
          does not stops it if it was running before <code>JettyTestSetup</code>
          was called. This is useful when you have a master test suite and when
          you also wish to run your tests one by one.
        </action>
      </release>

      <release version="1.6.1" date="14 May 2004">
        <action dev="VMA" type="fix" issue="CACTUS-107">
          An error was introduced in the Servlet Test Runner during the 
          internal package refactoring that happened in Cactus 1.6. The
          <code>XMLTransformer</code> could not be loaded and it resulted
          in a <code>ClassNotFoundException</code> exception.
        </action>
      </release>

      <release version="1.6" date="08 May 2004">
        <action dev="VMA" type="update">
          The <code>ServletTestRunner</code> now looks for am optional 
          <code>cactus.properties</code> file and reads its properties. If
          not defined it sets default values for the context URL of the
          Cactus redirectors and for their mappings.
        </action>
        <action dev="VMA" type="update">
          Updated web site documentation for enabling Cactus logging.
        </action>
        <action dev="VMA" type="update">
          Due to some internal package restructuration (all non public API were
          moved to <code>internal</code> packages), the 
          <code>jspredirector.jsp</code> file was modified. If you have 
          installed this file manually somewhere, you'll need to remember to 
          update it.
        </action>
        <action dev="VMA" type="update">
          Big internal restructuration: we have moved all the non public API 
          classes to java packages with the name <code>internal</code>. For
          example the package <code>org.apache.cactus.internal</code> is a 
          package containing some internal implementation. You should not use
          any internal class in your own development as these classes may 
          change at any time in the future. If you find you need access to some
          internal class, please send an email to the Cactus mailing class
          explaining the reason and we may open up some API/SPI.
        </action>
        <action dev="VMA" type="remove">
          Removed <code>org.apache.cactus.util.HttpURLConnection</code> class.
          It was a Commons HttpClient wrapper on top of the 
          <code>java.net.HttpURLConnection</code> class. However, this class is
          now fully integrated in the Commons HttpClient jar.
        </action>
        <action dev="VMA" type="add">
          Added new optional nested <code>&lt;containerclasspath&gt;</code> 
          element for the <code>&lt;cactus&gt;</code> task. It allows 
          specifying additional jars that will be put in the classpath used to 
          start/stop the specified containers.
        </action>
        <action dev="VMA" type="remove">
          Removed ability to choose different HTTP connection helpers. The only
          one supported now is the Commons HttpClient one provided internally
          by Cactus. Thus the <code>cactus.connectionHelper.classname</code>
          property is now removed.
        </action>
        <action dev="VMA" type="remove">
          Removed deprecated classes in the
          <code>org.apache.cactus.ant</code> packages as they have been
          deprecated for a long time.
        </action>
        <action dev="VMA" type="fix">
          Fixed bug in <code>HttpServletRequestWrapper.include()</code> where
          the passed request was not the original request. The problem was 
          only apparent with Tomcat 3.x.
        </action>
        <action dev="VMA" type="add">
          Added support for Tomcat 3.3.2 (note that this required adding the
          commons-logging jar to the Tomcat bootstrap classpath).
        </action>
        <action dev="VMA" type="update" due-to="Kazuhito Suguri" due-to-email="suguri.kazuhito@lab.ntt.co.jp">
          In the Form authentication code, changed the response check logic 
          for the pre-authentication step to accept any status code less 
          than 400. It was previously only accepting a 302 code but different
          servers are implementing it differently.
        </action>
        <action dev="VMA" type="add">
          Added new <code>ServletContextWrapper.setInitParameters()</code>
          which allows to programatically define Context init parameters (as
          if they had been entered in <code>web.xml</code> using the
          <code>&lt;context-param&gt;</code> element.
        </action>
        <action dev="VMA" type="add">
          Added support in the Ant integration <code>webxmlmerge</code> task 
          for merging <code>&lt;context-param&gt;</code> elements.
        </action>
        <action dev="VMA" type="update">
          Updated the version of Commons HttpClient in the Cactus distribution 
          to 2.0 final.
        </action>
        <action dev="VMA" type="add" due-to="Kazuhito Suguri" due-to-email="suguri.kazuhito@lab.ntt.co.jp">
          Added new 
          <code>FormAuthentication.setExpectedAuthResponse(int)</code>
          that allows to set the expected HTTP response code for an
          authentication request which should be successful. If not 
          specified, it defaults to 
          <code>HttpURLConnection.HTTP_MOVED_TEMP</code>.
        </action>
        <action dev="VMA" type="add" due-to="Kazuhito Suguri" due-to-email="suguri.kazuhito@lab.ntt.co.jp">
          Added new <code>FormAuthentication.setSessionCookieName(String)</code>
          that allows to set the security cookie name to a name different than
          <code>JSESSIONID</code> (the default).
        </action>
        <action dev="VMA" type="fix" issue="CACTUS-37" due-to="Kazuhito Suguri" due-to-email="suguri.kazuhito@lab.ntt.co.jp">
          <code>FormAuthentication</code> no longer assumes "localhost" when 
          adding cookies.
        </action>
        <action dev="VMA" type="fix" due-to="Paul Green" due-to-email="Paul.Green@ons.gsi.gov.uk">
          Fixed bug in Cactus wrapper implementation of
          <code>request.getPathTranslated()</code> which was failing when there
          was no simulated URL defined (i.e. no call to 
          <code>WebRequest.setURL()</code>).
        </action>
        <action dev="VMA" type="update">
          Migrated to Apache license 2.0.
        </action>
        <action dev="VMA" type="update" issue="CACTUS-79" due-to="Daniel Rabe" due-to-email="drabe@opentext.com">
          The <code>&lt;cactus&gt;</code> task now also cleans custom tmp
          directories (passed using the <code>tmpdir</code> attribute).
        </action>
        <action dev="VMA" type="add" issue="CACTUS-85" due-to="James Carpenter" due-to-email="jacarpenter@ercot.com">
          Added support for specifying which JNDI port to use when shutting 
          down JBoss 3.x in the Cactus Ant integration. 
          The <code>&lt;jboss3x&gt;</code> nested element now supports the new
          <code>jndiport</code> attribute for specifying the port. If not
          specified, it defaults to 1099.
        </action>
        <action dev="VMA" type="add">
          Added new <code>encoding</code> HTTP parameter for the Cactus Servlet 
          TestRunner. By default the XML returned (when there is no server-side
          XSL transformation) is using the UTF-8 encoding. This 
          <code>encoding</code> parameters allows using a user-specified 
          encoding.
        </action>
        <action dev="VMA" type="fix" issue="CACTUS-89" due-to="Scott Leberknight" due-to-email="scott.leberknight@nearinfinity.com">
          Fixed <code>request.getRequestURL()</code> (J2EE 1.3 only) which was 
          not working properly when <code>WebRequest.setURL()</code> was called
          with a null pathinfo parameter.
        </action>
        <action dev="VMA" type="add">
          Added support for Resin 3.x in the Ant integration. Only Resin 3.0.5
          and above are supported (the reason is that it seems the configuration
          file format has changed between Resin 3.0.3 and 3.0.5). Note that
          Servlet API 2.4/JSP 2.0 are not yet supported by Cactus.
        </action>          
        <action dev="VMA" type="add">
          In the Ant integration, added new <code>contextxml</code> attributes
          to the <code>&lt;tomcat4x&gt;</code> nested elements of the 
          <code>&lt;cactus&gt;</code> task. This is to support the context xml 
          configuration file that appeared with Tomcat 4.1.x. Note that for
          Tomcat 5.x you need to use the existing nested 
          <code>&lt;conf&gt;</code> element (see the <code>&lt;cactus&gt;</code>
          task documentation for more details).
        </action>
        <action dev="VMA" type="fix" issue="CACTUS-84" due-to="Brian Topping" due-to-email="topping@digidemic.com">
          In the Ant integration, added support for web contexts defined in
          JBoss's <code>jboss-web.xml</code>.
        </action>
        <action dev="VMA" type="fix">
          Fixed the bug where a ServletException occurs, stating:
          <code>The request object passed to forward() must be the request 
          object you got from your Cactus test case (i.e. a Cactus request 
          wrapper object). Instead we got [...]</code>.
        </action>
        <action dev="VMA" type="add" issue="CACTUS-53">
          In the Ant integration module, added new <code>configXml</code> 
          attribute to the <code>&lt;weblogic7x&gt;</code> container 
          element of the <code>&lt;cactus&gt;</code> task.
        </action>
        <action dev="VMA" type="fix" due-to="Joe Germuska" due-to-email="Joe@Germuska.com">
          Make the <code>&lt;cactus&gt;</code> task work on Mac OSX by not 
          including the <code>tools.jar</code> file (on Mac OSX all classes
          are found in <code>classes.jar</code>).
        </action>
        <action dev="VMA" type="fix" due-to="Kazuhito Suguri" due-to-email="suguri.kazuhito@lab.ntt.co.jp">
          Prevent requiring <code>commons-httpclient</code> jar to be present
          on the server-side classpath.
        </action>
        <action dev="VMA" type="add">
          Added the Maven plugin. It was formerly hosted in the Maven project's
          own CVS. It is now in the Cactus CVS and is part of the Cactus
          distribution.
        </action>
      </release>

      <release version="1.5" date="23 November 2003">
        <action dev="VMA" type="fix">
          In the Cactus/Ant integration, user-defined <code>tomcat-users</code>
          and <code>web.xml</code> are now correctly replacing the default 
          version provided by Cactus. This is for the Tomcat 4.x and 5.x
          containers.
        </action>
        <action dev="VMA" type="fix" issue="CACTUS-63" due-to="James Stangler" due-to-email="jastangler@yahoo.com">
          The Jetty Test Setup was not shutting Jetty down if an error ocurred
          during setUp.
        </action>
      </release>
      
      <release version="1.5-rc1" date="26 October 2003">
        <action dev="VMA" type="fix" issue="CACTUS-58" due-to="Norbert Pabis" due-to-email="npabis@astercity.net">
          The Cactus Ant integration now reports the HTTP error code when it 
          fails to start the container and timeouts. It was previously doing 
          this but only in debug mode.
        </action>
        <action dev="VMA" type="update">
          Update the version of Commons HttpClient in the Cactus distribution to 
          2.0 rc2.
        </action>
        <action dev="VMA" type="fix">
          Fixed and improved logging. It now works with Log4j, JDK 1.4 logging
          and Commons Simple log. Check the sample servlet application for an
          example of how to set up Cactus logging.
        </action>
        <action dev="VMA" type="add">
          Added new optional <code>cactus.logging.config</code> Cactus 
          property. If specified Cactus will load the properties file pointed
          by this property and will set each property as a system property.
        </action>
        <action dev="VMA" type="update">
          Updated to use AspectJ 1.1.1. When you upgrade to Cactus 1.5-rc1
          make sure you update your <code>aspectjrt.jar</code> to version
          1.1.1 (the jar is provided in the Cactus distribution).
        </action>
        <action dev="VMA" type="add">
          Added an EJB sample application to demonstrate how to perform EJB
          unit testing with Cactus and how to automate it with the 
          Cactus/Ant integration.
        </action>
        <action dev="VMA" type="fix" due-to="Alexander Ananiev" due-to-email="alexander@myarch.com">
          When using the new <code>ServletTestSuite</code> wrapper around pure
          JUnit test cases, the <code>setUp()</code> and 
          <code>tearDown()</code> methods were not called.
        </action>
        <action dev="VMA" type="fix" issue="CACTUS-52" due-to="Jonathan Kovacs" due-to-email="jdk@jdk.ca">
          In the Ant integration, when using the &lt;cactus&gt; task with
          an EAR, the test webapp context was not correctly set.
        </action>
        <action dev="VMA" type="fix" issue="CACTUS-49" due-to="James Stangler" due-to-email="jastangler@yahoo.com">
          Fixed the <code>JettyTestSetup</code> class so that it stops the
          running Jetty server at the end of the test suite execution.
        </action>
        <action dev="VMA" type="update">
          The Cactus distribution now packages commons-httpclient 2.0 RC1
          (we were previously including version 2.0 beta2).
        </action>
        <action dev="VMA" type="fix">
          Support for WebLogic 7.x is now working fine. Fixed bugs in the 
          WebLogic 7.x configuration: the
          <code>weblogic.xml</code> file was not correctly copied
          in the <code>WEB-INF</code> directory of the cactified
          war, and an NPE happened when the bea home property was not 
          set. It now tries to guess it from the
          <code>cactus.home.weblogic7x</code> property if not set.
          In addition, the configuration has also been greatly simplified.
        </action>
        <action dev="VMA" type="update">
          In the cactifywar Ant task, changed the default realm name
          that is used when adding Cactus default configuration data.
          It was previously <code>Cactus test realm</code>. It is now 
          <code>myrealm</code>. The reas on is that the default WebLogic 
          configuration creates a <code>myrealm</code> realm and thus
          using this name makes our Cactus configuration for WebLogic 
          much simpler. It doesn't affect the other containers as they
          do not seem to check for the realm name.
        </action>
        <action dev="VMA" type="add" due-to="Florin Vancea" due-to-email="fvancea@maxiq.ro">
          Added the ability to define the JBoss port that will be used 
          in the Ant integration to poll if the JBoss server is up and
          running. Note: This value will not modify the port of the
          default JBoss configuration (it is still 8080). However, it
          is useful for users who have defined their own JBoss 
          configuration and are using a port other than 8080.
        </action>
        <action dev="VMA" type="fix" issue="CACTUS-47" due-to="Christopher Marshall" due-to-email="cmarshall@infoclarus.com">
          Fixed bug in Eclipse plugin build where the plugin version was not
          correctly resolved.
        </action>
      </release>
      	
      <release version="1.5-beta1" date="14 July 2003">
        <action dev="VMA" type="update">
          Support for WebLogic 7.x has not been tested with Cactus 1.5 and
          may not work.
        </action>
        <action dev="VMA" type="update">
          Support for WebLogic 6.x is still available in the Ant integration.
          However, it has not been tested as it is no longer possible to
          download WebLogic 6.x from the BEA web site. It is thus completely
          untested.
        </action>
        <action dev="VMA" type="update">
          Update of jars bundled in the Cactus distribution: Commons Logging
          1.0.3, Log4j 1.2.8, HttpClient 2.0beta2, HttpUnit 1.5.3 and 
          JUnit 3.8.1. In addition the requirements for the jars needed to 
          build Cactus were also updated: Checkstyle 3.1 (and the dependent
          jars: BeanUtils 1.6.1, Collections 2.1, Regexp 1.2 and Antlr 2.7.2).
        </action>
        <action dev="VMA" type="add">
          Added a <a href="site:resources_books">Cactus books</a> section
          for books covering the Cactus framework.
        </action>
        <action dev="VMA" type="update">
          Refactoring of <code>XXXTestCase</code> class hierarchy. Whereas 
          it was previously inheriting from <code>AbstractWebTestCase</code>
          and <code>AbstractTestCase</code> it is now simply inheriting
          from JUnit <code>TestCase</code>. Thus all non-public API are now
          not visible from user (as they should be). This has broken binary 
          compatibility. If you had some framework compiled with Cactus 1.4.1
          and using some methods from <code>AbstractWebTestCase</code>
          or <code>AbstractTestCase</code>, you'll need to recompile it 
          with Cactus 1.5.
        </action>
        <action dev="CML" type="add">
          Added a <code>HttpServletRequestWrapper.setRemoteUser()</code> method
          to simulate a remote user. Thus, there is now 2 methods to get a 
          remote user: by simulating it as above or by using real BASIC or 
          Form-based authentication.
        </action>
        <action dev="CML" type="update">
          Refactored the authentication support by introducing the interface
          <code>Authentication</code>, which the class
          <code>AbstractAuthentication</code> now implements.
        </action>
        <action dev="VMA" type="add">
          Added a quick tutorial for Cactus developers who want to 
          <a href="site:integration_eclipse_dev">set up their Eclipse 
          environment</a> to work on the Cactus plugins for Eclipse.
        </action>
        <action dev="CML" type="add">
          The <code>WebResponse</code> class now has a method to directly
          retrieve the status code.
        </action>
        <action dev="VMA" type="fix">
          When a simulation URL is used and null values are passed for the
          Server name, Context Path and Servlet Path parameters, calls to 
          Cactus <code>HttpServletRequestWrapper.getServerName()</code>,
          <code>HttpServletRequestWrapper.getServerPort()</code>,
          <code>HttpServletRequestWrapper.getContextPath()</code> and
          <code>HttpServletRequestWrapper.getServletPath()</code> now correctly
          return the values from the original Request object
          (and not the wrapped one), handled by the Servlet Redirector.
        </action>
        <action dev="VMA" type="update">
          Added verification code in Cactus to verify that the parameters 
          passed to the <code>WebRequest.setURL()</code> method have the
          correct format and throw an exception if not.
        </action>
        <action dev="VMA" type="add">
          Added a <link href="site:news_rdf">RSS feed</link> for Cactus news.
        </action>
        <action dev="CML" type="add">
          The Cactus web site has a new style that is heavily based on CSS.
          It should provide better printing capabilities and a more consistent
          look.
        </action>
        <action dev="VMA" type="fix" issue="CACTUS-22" due-to="Misak Boulatian" due-to-email="misak@vantra.com">
          Cactus was not correctly handling the <code>ComparisonFailure</code> 
          exception introduced by JUnit 3.8.1 and these exceptions were 
          reported as errors instead of failures.
        </action>
        <action dev="VMA" type="fix" due-to="Melissa White" due-to-email="mwhite@triactive.com">
          Fixed bug in Cactus exception handling where an invalid test result 
          could result in a <code>StringIndexOutOfBoundsException</code>, thus 
          hiding the real problem.
        </action>
        <action dev="CML" type="add">
          Added a new custom Ant task (WebXmlMerge) that merges the content of
          two web deployment descriptors into one. That includes the
          definitions of filters and servlets, as well as some security-related
          elements.
        </action>
        <action dev="VMA" type="add">
          Allows creating Cactus TestCase without the need for a constructor 
          that takes a String parameter (a default constructor is good enough).
          Obviously, this feature works only with JUnit 3.8.1 (but Cactus
          continues to support JUnit 3.7).
        </action>
        <action dev="VMA" type="add">
          Added ability to add any additional HTTP parameters to the request 
          used by Cactus to the Form-based authentication security URL.
        </action>
        <action dev="VMA" type="add">
          Added support for running pure JUnit TestCase on the server side
          using Cactus. This is possible by using a new 
          <code>ServletTestSuite</code> Test Suite.
        </action>
        <action dev="VMA" type="fix" due-to="Helen Rehn" due-to-email="hrehn@us.ibm.com">
          Fixed bug where a simulation URL would be used even when none has 
          been defined (Reminder: a simulation URL is defined by calling
          <code>WebRequest.setURL()</code>).
        </action>
        <action dev="VMA" type="add">
          Added a timeout for the <code>&lt;runservertests&gt;</code> Ant task
          so that the verification that the container is started is stopped if
          this timeout is reached (a build exception is raised).
        </action>
        <action dev="VMA" type="remove">
          Moved some Ant tasks that were previously in the Cactus Ant tasks;
          they are now in the Ant Integration project. They are the tasks used
          to start/stop the containers and the <code>runservertests</code>
          task. It is now recommended to use the Ant Integration.
        </action>
        <action dev="VMA" type="update">
          Improved (and normalized) build system. This change should not 
          affect nor be visible by Cactus end-users. However, Cactus power
          users building Cactus from sources will appreciate.
        </action>
        <action dev="VMA" type="update">
          Improved test classe names in the Servlet Sample application.
        </action>
        <action dev="VMA" type="update">
          The Servlet Sample build is now using the Cactus Ant Integration.
        </action>
        <action dev="CML" type="add">
          New Cactus Ant Integration. It provides new custom Ant tasks
          such as 
          <code>&lt;cactifywar&gt;</code>, <code>&lt;cactus&gt;</code>
          which makes executing Cactus tests from an Ant build script
          extremely easy.
        </action>
        <action dev="VMA" type="update">
          Modified the build process to generate the Cactus web site by 
          removing the use of Stylebook and replacing it with an XSL
          stylesheet. In addition, added several new features: support for
          subdirectories, support for dynamic menu items and sitemap 
          generation.
        </action>
        <action dev="VMA" type="fix">
          The Cactus <code>runservertests</code> custom Ant task has been
          improved and it is now propagating correctly Ant references to the
          targets you defined for starting the container, stopping it and 
          runnning the Cactus tests. Previously, it was only propagating
          the Ant properties.
        </action>
        <action dev="CML" type="update">
          Added stack trace filtering to the ServletTestRunner. Stack frames
          in the JUnit framework classes as well as in the Cactus base test 
          case classes are filtered out.
        </action>
        <action dev="VMA" type="add">
          The Cactus web site now provides online documentation for both the
          CVS HEAD version and the last released version.
        </action>
        <action dev="CML" type="fix">
          Enable the <code>ServletTestRunner</code> to run in an environment 
          where it is not allowed to set system properties. In such cases, the
          <code>cactus.properties</code> configuration file needs to be on the 
          server classpath.
        </action>
        <action dev="CML" type="update">
          Implemented server-side XSLT transformations in the
          <code>ServletTestRunner</code>. The code is based on the TraX API but
          uses reflection to avoid a direct runtime dependancy.
        </action>
        <action dev="VMA" type="add">
          Added automated Ant scripts for JBoss/Jetty 3.x.
        </action>
        <action dev="CML" type="fix">
          Fixed bug where users using a Locale which does not format numbers
          with dots (".") had issues with the JUnitReport Ant XSL stylesheet.
          The Servlet Test Runner code now forces a US Locale.
        </action>
        <action dev="VMA" type="add" due-to="Christopher Lenz" due-to-email="cmlenz@gmx.de">
          Added new extension class to help unit test JSP Taglibs. See the
          <code>TestJspTagLifecycle</code> test class in the sample-servlet
          application for help on using it.
        </action>
        <action dev="VMA" type="update">
          Improved error handling when dealing with invalid Cookies.
        </action>
        <action dev="VMA" type="fix" due-to="Roumen B. Antonov" due-to-email="rantonov@fourthgen.com">
          Fixed a potential bug with classloaders. On the server side, Cactus 
          looks for the TestCase class by searching first the WebApp 
          Classloader and then the Context ClassLoader. However, the Context 
          ClassLoader is only searched if an Exception (subclass of 
          <code>Exception</code>) is raised. Thus, if a 
          <code>NoClassDefFoundError</code> had been raised, Cactus would 
          not have searched in the Context ClassLoader.
        </action>
        <action dev="VMA" type="add" due-to="Atsushi Hasegawa" due-to-email="ahasegawa@borland.com">
          Added support for internationalization (double byte characters) for 
          sending back test results. This allows Cactus to be used with any
          character set.
        </action>
        <action dev="VMA" type="fix" due-to="Pranab Dhar" due-to-email="Pranab.Dhar@dfa.state.ny.us">
          Fixed bug where a redirector overriden by calling 
          <code>WebRequest.setRedirectorName()</code> was not used to fetch the
          Cactus test result (the default redirector specified in the Cactus
          configuration was used instead).
        </action>
        <action dev="VMA" type="fix" due-to="Stephan Merker" due-to-email="Stephan.Merker@cegedim.fr">
          Fixed bug where Cactus was using the deprecated HttpClient 
          <code>PostMethod.setRequestBody(String)</code> which had some bug
          related to char to byte encoding. Now using the
          <code>PostMethod.setRequestBody(InputStream)</code> signature.
        </action>
        <action dev="VMA" type="add">
          Added links to Japanese and Korean translations of Cactus.
        </action>
        <action dev="VMA" type="add">
          Ability to get a real HTTP Session cookie before the start of the 
          test. This is achieved by calling the new
          <code>WebRequest.getSessionCookie()</code> method which returns
          a <code>HttpSessionCookie</code> object that you then add to the
          HTTP request. Initially suggested by
          <link href="mailto:kyle.w.willkomm@accenture.com">Kyle W.
          Willkomm</link>.
        </action>
        <action dev="VMA" type="add">
          New <code>WebResponse.getCookieIgnoreCase(cookieName)</code> to get
          the first cookie matching <code>cookieName</code> whatever the case
          (case-insensitive).
        </action>
        <action dev="VMA" type="add" due-to="Jason Robertson" due-to-email="Jason.Robertson@acs-inc.com">
          Added Form-based authentication support.
        </action>
        <action dev="VMA" type="add">
          Added a <link href="site:howto_build">tutorial</link> that explains 
          how to build Cactus from the sources.
        </action>
        <action dev="VMA" type="add">
          Added a Jetty Sample application to demonstrate how to use the new
          <code>JettyTestSetup</code> that automatically starts Jetty before
          a test suite.
        </action>
        <action dev="JRU" type="add">
          Added a <link href="site:integration_jetty">Jetty integration 
          tutorial</link>.
        </action>
        <action dev="VMA" type="add">
          Added a <code>org.apache.cactus.extension.jetty.JettyTestSetup</code>
          JUnit TestSetup to automatically start Jetty before a test suite
          is executed. This is really nice to quickly run tests inside any 
          IDE or even from a simple <code>&lt;junit&gt;</code> Ant taks without 
          the need to package and deploy a WAR. In addition, it is real nice to 
          debug tests this way. Moreover, Jetty starts in less than 1 second, 
          making it completely seamless and transparent! We are now at the same
          order of magnitude as pure JUnit tests in term of speed ... :-). Of 
          course, this is only for Servlet tests ... I am still waiting for an
          embeddable EJB container that starts in less than 1 second ...
        </action>
        <action dev="VMA" type="add">
          Added support for client side <code>begin(...)</code>
          and <code>end(...)</code> methods. They are called on the
          client side, before and after every test in the same way as the
          JUnit <code>setUp()</code> and <code>tearDown()</code> are called
          before and after each test, but on the server side.
        </action>
      </release>

    <release version="1.4.1" date="31 August 2002">
      <action dev="VMA" type="add" due-to="Hirsch Richard" due-to-email="richard.hirsch@siemens.com">
        Added a sample (and thus a test for Cactus) for HttpUnit integration
        as part of the Cactus sample.
      </action>
      <action dev="VMA" type="fix" due-to="Hirsch Richard" due-to-email="richard.hirsch@siemens.com">
        Fixed bug in new HttpClient wrapper in Cactus with regards to the 
        headers returned in the HTTP response (they were offset by one and
        the status line was not returned as a header).
      </action>
      <action dev="VMA" type="fix" due-to="Micah Williams" due-to-email="backOffice@thirdmillenniumvisions.com">
        Fixed bug where <code>NullPointerException</code> would be thrown by Cactus
        <code>ServletTestRunner</code> if an exception raised in a test case had not
        specified a message (i.e. <code>getMessage()</code> returning 
        <code>null</code>).
      </action>
      <action dev="VMA" type="fix" due-to="Gerhard Kreutzer" due-to-email="g.kreutzer@kreutzersoft.de">
        Some JDK implementation return "null" when Class.getClassLoader() is 
        called to indicate that the given class has been loaded by the 
        bootstrap class loader. This was leading to 
        <code>NullPointerException</code> being thrown by Cactus in some
        cases.
      </action>
      <action dev="VMA" type="fix" due-to="Ville Skyttä" due-to-email="ville.skytta@iki.fi">
        Fixed import bug in sample-servlet which prevented building Cactus
        from the sources on JDK 1.4.
      </action>
      <action dev="VMA" type="fix" due-to="Hirsch Richard" due-to-email="richard.hirsch@siemens.com">
        Fixed default properties for the sample application so that it points 
        to the correct HttpClient jar which is packaged with Cactus (the one 
        built on 06/06/2002).
      </action>
      <action dev="VMA" type="fix" due-to="Larry Tambascio" due-to-email="ltambascio@charter.net">
        Fixed a bug that was preventing having several POST parameters added in 
        the request in <code>beginXXX()</code> methods.
      </action>
      <action dev="VMA" type="fix" due-to="Dave Hoover" due-to-email="dave@redsquirrel.com">
        The encoding in the sample <code>junit-noframes</code> XSL 
        stylesheet was set to be "US-ASCII". It is now set to "UTF-8". 
        Apparently, XSLT processors are only required to support utf-8 
        and utf-16, the rest is processor specific. For example your 
        processor might support US-ASCII-7 and others might support 
        US-ASCII. Thanks to Robert Koberg for the explanation!
      </action>
    </release>
	
    <release version="1.4" date="25 August 2002">
      <action dev="VMA" type="add">
        Added a <link href="site:howto_jsp">tutorial</link> that explains how
        to test JSPs with Cactus.
      </action>
      <action dev="VMA" type="fix" due-to="David George" due-to-email="david.off@voila.fr">
        Fixed JDK 1.2 compatibility (broken in 1.4b1).
      </action>
      <action dev="VMA" type="fix" due-to="Felipe Hoffa" due-to-email="felipehoffa@yahoo.com">
		According to the XML definitions (at least the definitions Mozilla 1.0
		got implemented), the &lt;?xml version...&gt; tag should go before the 
		&lt;?xml-stylesheet...&gt; tag. Using them in the wrong order produces 
		an error when Mozilla tries to render it.
	  </action>
    </release>

    <release version="1.4b1" date="July 31 2002">
      <action dev="VMA" type="add">
        It is now possible to assert response codes in
        <code>endXXX()</code>. For example, you can verify that you servlet
        has returned a 500 response code. See the tests provided in the Sample
        Servlet application which is part of the Cactus distribution. This
        change was possible because we moved the underlying implementation from
        <code>HttpURLConnection</code> to Jakarta
        <link href="ext:commons_httpclient">Commons HttpClient</link>. Note:
        It is still not possible to test a 401 response code (this limitation 
        has been raised to the HttpClient team).
      </action>
      <action dev="VMA" type="update">
        Refactored internal code to be able to use different HTTP connection
        implementation. 2 are currently provided: one using the JDK
        <code>HttpURLConnection</code> and one using Jakarta
        <link href="ext:commons_httpclient">Commons HttpClient</link> (the 
        default one). It can be modified by setting the following System
        property: <code>cactus.connectionHelper.classname =
        org.apache.cactus.client.JdkConnectionHelper</code> (for the JDK
        <code>HttpURLConnection</code>). Note that the Servlet Sample test
        that assert response code will fail with the JDK
        <code>HttpURLConnection</code> implementation.
      </action>
      <action dev="VMA" type="add">
        Cactus now requires the Commons Logging library
        (<code>commons-logging.jar</code>). It is needed as Commons HttpClient
        is now using Commons Logging for logging and Cactus depends on
        HttpClient. Cactus is also now using Commons HttpClient for all its
        internal logs. This lets us use any underlying logging implementation:
        Log4j, LogKit, JDK 1.4 Logging, No Logging or SimpleLog (provided with
        Commons Logging - logs to the console). Check the
        <link href="site:howto_config">Config Howto</link> for how
        to configure logging in Cactus.
      </action>
      <action dev="VMA" type="remove">
        Removed deprecated <code>org.apache.cactus.ServletTestRequest</code>
        class (was deprecated in Cactus 1.2).
      </action>
      <action dev="VMA" type="remove">
        Removed deprecated <code>org.apache.cactus.util.ClientCookie</code>
        class (was deprecated in Cactus 1.2).
      </action>
      <action dev="VMA" type="remove">
        Removed deprecated <code>org.apache.cactus.util.AssertUtils</code>
        class (was deprecated in Cactus 1.2).
      </action>
      <action dev="VMA" type="add">
        Added automatic script support for Orion 1.6.
      </action>
      <action dev="VMA" type="fix">
        Ant scripts for Resin, Orion, Tomcat 3.2.4, WebLogic 6.1 and WebLogic
        7.0 now correctly configured for Cactus BASIC authentication tests.
      </action>
      <action dev="VMA" type="add">
        Added automatic script support for WebLogic 7.0.
      </action>
      <action dev="VMA" type="fix" issue="CACTUS-22" due-to="Daniel Dennison" due-to-email="dennison@mitec.net">
         It seems that it is possible that the test result contain an end of 
         line character and the Cactus <code>WebTestResultParser</code> was 
         choking on this and seeing the returned result as invalid. This has 
         been fixed.
      </action>
      <action dev="VMA" type="add">
        Added Test Coverage Reports as part of the Web Site generation.
      </action>
      <action dev="VMA" type="update">
        Renamed all external jars used in Cactus by suffixing them with their
        versions. This is so that Cactus users will know exactly what jars
        Cactus is packaging. You are of course free to use your own jars and
        Cactus only packages these jars for your convenience. Cactus nows
        packages Log4j 1.2.3, AspectJ Runtime 1.0.4, JUnit 3.7,
        HttpClient 2.0alpha1 built on 6/6/2002, HttpUnit 1.4 and (new) the
        Servlet API 2.2 and 2.3 jars. The Cactus jars have also been renamed
        to include the version number in their names.
      </action>
      <action dev="VMA" type="fix">
        Cactus Sample can be built using Ant 1.4 (support for Ant 1.4 was
        broken by a line introduced in Cactus 1.3 that would only work with
        Ant 1.5. However, this line can easily be commented out).
      </action>
      <action dev="VMA" type="fix" issue="CACTUS-21" due-to="Marc Brette" due-to-email="Marc.Brette@mkms.xerox.com">
         Modified the <code>jspRedirector.jsp</code> so that
         it initializes an HTTP Session (<code>session="true"</code>). There
         is no way I know to make this parameter dynamic so we set it to true
         as this is the most used case. If one of your test must not have a
         session created for it, then you can always use the Redirector
         overriding feature (<code>WebRequest.setRedirectorName(String
         redirectorName)</code>).
      </action>
      <action dev="VMA" type="fix" due-to="Patrick Lightbody" due-to-email="plightbo@hotmail.com">
        Fixed bug where the Test Result object which is put in the Servlet
        Context was not serializable. This might cause some trouble with some
        containers.
      </action>
      <action dev="VMA" type="add" due-to="Marc Brette" due-to-email="Marc.Brette@mkms.xerox.com">
        Added simulation of Remote IP address and Remote Host Name, i.e. you
        can now control what <code>request.getRemoteAddr()</code> and
        <code>request.getRemoteHost()</code> will return. That is useful if
        your code depends on these values.
      </action>
      <action dev="VMA" type="update">
        It is now possible to specify the Cactus properties as System
        properties (the property names are the same as the ones in
        <code>cactus.properties</code>). Also if not specified, redirector
        names are set by default to "ServletRedirector", "JspRedirector" and
        "FilterRedirector".
      </action>
      <action dev="VMA" type="add">
        New <link href="site:howto_tomcat">Quick start tutorial</link> that
        explains how to run Cactus tests quickly in Tomcat.
      </action>
      <action dev="VMA" type="add">
        A cool new way to quickly execute your test cases: Cactus now has
        a JUnit Test Runner called ServletTestRunner (it is a servlet) that
        you start using your browser. See the
        <link href="site:howto_runner">TestRunner Howto</link> tutorial.
      </action>
      <action dev="VMA" type="fix">
        Test classes are now first looked for using the Current classloader
        (the webapp one for Servlets) and if not found using the context
        class loader. Previously the order was the revert, which was not
        logical and could lead to issues.
      </action>
      <action dev="VMA" type="update">
        Improved debugging of <code>runservertests</code> task. Simply run
        Ant in debug mode (<code>ant -debug xxx</code>) and the task will
        print information. Very useful to know why the
        <code>runservertests</code> task seems to hang after starting your
        server ...
      </action>
    </release>

  </releases>

  </body>

</document>
