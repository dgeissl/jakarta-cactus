<!--
   ==========================================================================
     Gump project descriptor for Cactus (see http://jakarta.apache.org/gump).
   ==========================================================================
  -->
<module name="jakarta-cactus">

  <url href="http://jakarta.apache.org/cactus/"/>

  <description>
    Unit test framework for server-side java code
  </description>
  
  <redistributable/>

  <cvs repository="jakarta"/>
     
  <!--
     ========================================================================
       Build the Cactus Ant Tasks
     ========================================================================
  -->
  <project name="jakarta-cactus-anttasks">

    <package>org.apache.cactus.ant</package>

    <ant buildfile="anttasks/build.xml" target="release">
      <property name="project.version" value="@@DATE@@"/>
    </ant>
  
    <depend project="ant" inherit="runtime"/>
    <depend project="xml-xerces"/>
    <option project="checkstyle" inherit="runtime"/>

    <home nested="anttasks/dist"/>
    <jar name="lib/cactus-anttasks.jar"/>
    <javadoc nested="anttasks/dist/doc/api" title="Cactus Ant tasks API"/>

    <deliver fromdir="anttasks/release" tosite="jakarta.apache.org"
      todir="builds/jakarta-cactus/nightly/@@DATE@@/" />

    <license name="LICENSE.cactus"/>

    <nag from="Vincent Massol &lt;vmassol@apache.org&gt;"
      to="cactus-dev@jakarta.apache.org"/>

  </project>

  <!--
     ========================================================================
       Build the Cactus Framework for J2EE 1.2
     ========================================================================
  -->
  <project name="jakarta-cactus-framework-12">

    <package>org.apache.cactus</package>

    <ant buildfile="framework/build.xml" target="release">

      <property name="project.version" value="@@DATE@@"/>

      <depend property="cactus.anttasks.jar" project="jakarta-cactus-anttasks"/>
      <depend property="j2ee.jar" project="jakarta-servletapi"/>
      <depend property="log4j.jar" project="jakarta-log4j" id="log4j"/>
      <depend property="commons.logging.jar" project="commons-logging" id="all"/>
      <depend property="commons.httpclient.jar" project="commons-httpclient"/>
      <depend property="httpunit.jar" project="httpunit"/>
      <depend property="aspectjrt.jar" project="aspectj" id="aspectjrt"/>
      <depend property="junit.jar" project="junit"/>

    </ant>
  
    <depend project="ant" inherit="runtime"/>
    <depend project="xml-xerces"/>
    <depend project="aspectj"/>
    <option project="checkstyle" inherit="runtime"/>

    <work nested="framework/target-12/classes/java"/>
    <work nested="framework/target-12/classes/test"/>

    <home nested="framework/dist-12"/>
    <jar name="lib/cactus-framework.jar"/>
    <javadoc nested="framework/dist-12/doc/api"
      title="Cactus Framework for J2EE 1.2 API"/>

    <license name="LICENSE.cactus"/>

    <nag from="Vincent Massol &lt;vmassol@apache.org&gt;"
      to="cactus-dev@jakarta.apache.org"/>

  </project>

  <!--
     ========================================================================
       Build the Cactus Framework for J2EE 1.3
     ========================================================================
  -->
  <project name="jakarta-cactus-framework-13">

    <package>org.apache.cactus</package>

    <ant buildfile="framework/build.xml" target="release">

      <property name="project.version" value="@@DATE@@"/>

      <depend property="cactus.anttasks.jar" project="jakarta-cactus-anttasks"/>
      <depend property="j2ee.jar" project="jakarta-servletapi-4"/>
      <depend property="log4j.jar" project="jakarta-log4j" id="log4j"/>
      <depend property="commons.logging.jar" project="commons-logging" id="all"/>
      <depend property="commons.httpclient.jar" project="commons-httpclient"/>
      <depend property="httpunit.jar" project="httpunit"/>
      <depend property="aspectjrt.jar" project="aspectj" id="aspectjrt"/>
      <depend property="junit.jar" project="junit"/>

    </ant>
  
    <depend project="ant" inherit="runtime"/>
    <depend project="xml-xerces"/>
    <depend project="aspectj"/>
    <option project="checkstyle" inherit="runtime"/>

    <work nested="framework/target-13/classes/java"/>
    <work nested="framework/target-13/classes/test"/>

    <home nested="framework/dist-13"/>
    <jar name="lib/cactus-framework.jar"/>
    <javadoc nested="framework/dist-13/doc/api"
      title="Cactus Framework for J2EE 1.3 API"/>

    <license name="LICENSE.cactus"/>

    <nag from="Vincent Massol &lt;vmassol@apache.org&gt;"
      to="cactus-dev@jakarta.apache.org"/>
        
  </project>

  <!--
     ========================================================================
       Build the Cactus Ant Integration for J2EE 1.2
     ========================================================================
  -->
  <project name="jakarta-cactus-integration-ant-12">

    <ant buildfile="integration/ant/build.xml" target="release">

      <property name="project.version" value="@@DATE@@"/>

      <depend property="j2ee.jar" project="jakarta-servletapi"/>
      <depend property="servlet.jar" project="jakarta-servletapi"/>
      <depend property="log4j.jar" project="jakarta-log4j" id="log4j"/>
      <depend property="commons.logging.jar" project="commons-logging" id="all"/>
      <depend property="commons.httpclient.jar" project="commons-httpclient"/>
      <depend property="httpunit.jar" project="httpunit"/>
      <depend property="aspectjrt.jar" project="aspectj" id="aspectjrt"/>
      <depend property="junit.jar" project="junit"/>
      <depend property="cactus.framework.jar" project="jakarta-cactus-framework-12"/>
      <depend property="cactus.anttasks.jar" project="jakarta-cactus-anttasks"/>

    </ant>
  
    <depend project="ant" inherit="runtime"/>
    <depend project="xml-xerces"/>
    <depend project="aspectj"/>

    <home nested="integration/ant/dist-12"/>
    <jar name="bin/cactus-integration-ant/lib/client/cactus-integration-ant-@@DATE@@.jar"/>
    	
    <license name="LICENSE.cactus"/>

    <nag from="Vincent Massol &lt;vmassol@apache.org&gt;"
      to="cactus-dev@jakarta.apache.org"/>

  </project>
  
  <!--
     ========================================================================
       Build the Cactus Ant Integration for J2EE 1.3
     ========================================================================
  -->
  <project name="jakarta-cactus-integration-ant-13">

    <ant buildfile="integration/ant/build.xml" target="release">

      <property name="project.version" value="@@DATE@@"/>

      <depend property="j2ee.jar" project="jakarta-servletapi-4"/>
      <depend property="servlet.jar" project="jakarta-servletapi-4"/>
      <depend property="log4j.jar" project="jakarta-log4j" id="log4j"/>
      <depend property="commons.logging.jar" project="commons-logging" id="all"/>
      <depend property="commons.httpclient.jar" project="commons-httpclient"/>
      <depend property="httpunit.jar" project="httpunit"/>
      <depend property="aspectjrt.jar" project="aspectj" id="aspectjrt"/>
      <depend property="junit.jar" project="junit"/>
      <depend property="cactus.framework.jar" project="jakarta-cactus-framework-13"/>
      <depend property="cactus.anttasks.jar" project="jakarta-cactus-anttasks"/>

    </ant>
  
    <depend project="ant" inherit="runtime"/>
    <depend project="xml-xerces"/>
    <depend project="aspectj"/>

    <home nested="integration/ant/dist-13"/>
    <jar name="bin/cactus-integration-ant/lib/client/cactus-integration-ant-@@DATE@@.jar"/>

    <license name="LICENSE.cactus"/>

    <nag from="Vincent Massol &lt;vmassol@apache.org&gt;"
      to="cactus-dev@jakarta.apache.org"/>

  </project>

  <!--
     ========================================================================
       Build the Cactus Eclipse Integration for J2EE 1.2
     ========================================================================
  -->

  <project name="jakarta-cactus-integration-eclipse-12">

    <ant buildfile="integration/eclipse/build.xml" target="release">

      <property name="project.version" value="@@DATE@@"/>

      <depend property="cactus.anttasks.jar" project="jakarta-cactus-anttasks"/>
      <depend property="j2ee.jar" project="jakarta-servletapi"/>
      <depend property="eclipse.junit.jar" project="eclipse" id="junit"/>
      <depend property="eclipse.core.boot.jar" project="eclipse" id="boot"/>
      <depend property="eclipse.core.resources.jar" project="eclipse" id="resources"/>
      <depend property="eclipse.core.runtime.jar" project="eclipse" id="runtime"/>
      <depend property="eclipse.debug.core.jar" project="eclipse" id="dtcore"/>
      <depend property="eclipse.debug.ui.jar" project="eclipse" id="dtui"/>
      <depend property="eclipse.jdt.core.jar" project="eclipse" id="jdtcore"/>
      <depend property="eclipse.jdt.launching.jar" project="eclipse" id="launching"/>
      <depend property="eclipse.swt.jar" project="eclipse" id="swt"/>
      <depend property="eclipse.jface.jar" project="eclipse" id="jface"/>
      <depend property="eclipse.ant.core.jar" project="eclipse" id="antsupport"/>
      <depend property="eclipse.ui.workbench.jar" project="eclipse" id="workbench"/>

      <property name="eclipse.jdt.junit.jar" 
        value="integration/eclipse/lib/junitsupport-2.1.0dev.jar"/>

    </ant>
  
    <depend project="ant" inherit="runtime"/>
    <depend project="xml-xerces"/>
    <depend project="jakarta-cactus-integration-ant-12"/>
    <work nested="integration/eclipse/lib/junitsupport-2.1.0dev.jar"/>

    <license name="LICENSE.cactus"/>

    <nag from="Vincent Massol &lt;vmassol@apache.org&gt;"
      to="cactus-dev@jakarta.apache.org"/>

  </project>
  
  <!--
     ========================================================================
       Build the Cactus Eclipse Integration for J2EE 1.3
     ========================================================================
  -->

  <project name="jakarta-cactus-integration-eclipse-13">

    <ant buildfile="integration/eclipse/build.xml" target="release">

      <property name="project.version" value="@@DATE@@"/>

      <depend property="cactus.anttasks.jar" project="jakarta-cactus-anttasks"/>
      <depend property="j2ee.jar" project="jakarta-servletapi-4"/>
      <depend property="eclipse.junit.jar" project="eclipse" id="junit"/>
      <depend property="eclipse.core.boot.jar" project="eclipse" id="boot"/>
      <depend property="eclipse.core.resources.jar" project="eclipse" id="resources"/>
      <depend property="eclipse.core.runtime.jar" project="eclipse" id="runtime"/>
      <depend property="eclipse.debug.core.jar" project="eclipse" id="dtcore"/>
      <depend property="eclipse.debug.ui.jar" project="eclipse" id="dtui"/>
      <depend property="eclipse.jdt.core.jar" project="eclipse" id="jdtcore"/>
      <depend property="eclipse.jdt.launching.jar" project="eclipse" id="launching"/>
      <depend property="eclipse.swt.jar" project="eclipse" id="swt"/>
      <depend property="eclipse.jface.jar" project="eclipse" id="jface"/>
      <depend property="eclipse.ant.core.jar" project="eclipse" id="antsupport"/>
      <depend property="eclipse.ui.workbench.jar" project="eclipse" id="workbench"/>

      <property name="eclipse.jdt.junit.jar" 
        value="integration/eclipse/lib/junitsupport-2.1.0dev.jar"/>

    </ant>
    
    <depend project="ant" inherit="runtime"/>
    <depend project="xml-xerces"/>
    <depend project="jakarta-cactus-integration-ant-13"/>
    <work nested="integration/eclipse/lib/junitsupport-2.1.0dev.jar"/>
    
    <license name="LICENSE.cactus"/>

    <nag from="Vincent Massol &lt;vmassol@apache.org&gt;"
      to="cactus-dev@jakarta.apache.org"/>

  </project>

  <!--
     ========================================================================
       Build the Cactus Servlet Sample for J2EE 1.2
     ========================================================================
  -->
  <project name="jakarta-cactus-sample-servlet-12">

    <!-- Create the directories that are added using the <work> tag below so
         that JVM do not drop these directories from the CLASSPATH
         (apparently some do) -->
    <mkdir dir="samples/servlet/target-12/sample/target/classes/java"/>
    <mkdir dir="samples/servlet/target-12/sample/target/cactus/classes"/>
    <mkdir dir="samples/servlet/target-12/sample/target/conf/client"/>

    <ant buildfile="samples/servlet/build.xml" target="release.gump">

      <property name="project.version" value="@@DATE@@"/>

      <depend property="j2ee.jar" project="jakarta-servletapi"/>
      <depend property="log4j.jar" project="jakarta-log4j" id="log4j"/>
      <depend property="commons.logging.jar" project="commons-logging" 
        id="all"/>
      <depend property="commons.httpclient.jar" project="commons-httpclient"/>
      <depend property="httpunit.jar" project="httpunit"/>
      <depend property="aspectjrt.jar" project="aspectj" id="aspectjrt"/>
      <depend property="junit.jar" project="junit"/>
      <depend property="jstl.jar" project="jakarta-taglibs-standard" 
        id="jstl"/>
      <depend property="standard.jar" project="jakarta-taglibs-standard"
        id="standard"/>
      <depend property="cactus.framework.jar" 
        project="jakarta-cactus-framework-12"/>
      <depend property="cactus.anttasks.jar" 
        project="jakarta-cactus-anttasks"/>
      <depend property="cactus.antintegration.jar"
      	project="jakarta-cactus-integration-ant-12"/>
      <property name="cactus.port" value="8082"/>
      <property name="cactus.home.tomcat3x" reference="home" project="jakarta-tomcat"/>

    </ant>
  
    <depend project="ant" inherit="runtime"/>
    <depend project="xml-xerces"/>
    <depend project="jakarta-tomcat" inherit="runtime"/>
    <depend project="aspectj"/>
    <depend project="jakarta-cactus-integration-ant-12"/>

    <work nested="samples/servlet/target-12/sample/target/classes/java"/>
    <work nested="samples/servlet/target-12/sample/target/cactus/classes"/>
    <work nested="samples/servlet/target-12/sample/target/conf/client"/>

    <jar name="samples/servlet/dist-12/bin/cactus-sample-servlet"/>

    <license name="LICENSE.cactus"/>

    <nag from="Vincent Massol &lt;vmassol@apache.org&gt;"
      to="cactus-dev@jakarta.apache.org"/>
      
  </project>

  <!--
     ========================================================================
       Build the Cactus Servlet Sample for J2EE 1.3
     ========================================================================
  -->
  <project name="jakarta-cactus-sample-servlet-13">

    <!-- Create the directories that are added using the <work> tag below so
         that JVM do not drop these directories from the CLASSPATH
         (apparently some do) -->
    <mkdir dir="samples/servlet/target-13/sample/target/classes/java"/>
    <mkdir dir="samples/servlet/target-13/sample/target/cactus/classes"/>
    <mkdir dir="samples/servlet/target-13/sample/target/conf/client"/>

    <ant buildfile="samples/servlet/build.xml" target="release.gump">

      <property name="project.version" value="@@DATE@@"/>

      <depend property="j2ee.jar" project="jakarta-servletapi-4"/>
      <depend property="log4j.jar" project="jakarta-log4j" id="log4j"/>
      <depend property="commons.logging.jar" project="commons-logging" 
        id="all"/>
      <depend property="commons.httpclient.jar" project="commons-httpclient"/>
      <depend property="httpunit.jar" project="httpunit"/>
      <depend property="aspectjrt.jar" project="aspectj" id="aspectjrt"/>
      <depend property="junit.jar" project="junit"/>
      <depend property="jstl.jar" project="jakarta-taglibs-standard" 
        id="jstl"/>
      <depend property="standard.jar" project="jakarta-taglibs-standard"
        id="standard"/>
      <depend property="cactus.framework.jar" 
        project="jakarta-cactus-framework-13"/>
      <depend property="cactus.anttasks.jar" 
        project="jakarta-cactus-anttasks"/>
      <depend property="cactus.antintegration.jar"
      	project="jakarta-cactus-integration-ant-13"/>
      <property name="cactus.port" value="8082"/>
      <property name="cactus.home.tomcat4x" project="jakarta-tomcat-4.0"
        reference="home"/>

    </ant>
  
    <depend project="ant" inherit="runtime"/>
    <depend project="xml-xerces"/>
    <depend project="jakarta-tomcat-4.0" inherit="runtime"/>
    <depend project="aspectj"/>
    <depend project="jakarta-cactus-integration-ant-13"/>

    <work nested="samples/servlet/target-13/sample/target/classes/java"/>
    <work nested="samples/servlet/target-13/sample/target/cactus/classes"/>
    <work nested="samples/servlet/target-13/sample/target/conf/client"/>

    <jar name="samples/servlet/dist-13/bin/cactus-sample-servlet"/>

    <license name="LICENSE.cactus"/>

    <nag from="Vincent Massol &lt;vmassol@apache.org&gt;"
      to="cactus-dev@jakarta.apache.org"/>
      
  </project>

  <!--
     ========================================================================
       Build the Cactus Documentation
     ========================================================================
  -->
  <project name="jakarta-cactus-documentation">

    <!-- Create the directories that are added using the <work> tag below so
         that JVM do not drop these directories from the CLASSPATH
         (apparently some do) -->
    <mkdir dir="documentation/target/classes/java"/>

    <ant buildfile="documentation/build.xml" target="release">
      <property name="project.version" value="@@DATE@@"/>
      <property name="javadoc.include" value="true"/>
    </ant>

    <depend project="ant" inherit="runtime"/>
    <depend project="xml-xerces"/>
    <depend project="xml-xalan2"/>

    <!-- Dependencies to make sure this project is not built if one of the
       dependent project fails -->
    <depend project="jakarta-cactus-framework-12"/>
    <depend project="jakarta-cactus-framework-13"/>
    <depend project="jakarta-cactus-anttasks"/>
    <depend project="jakarta-cactus-sample-servlet-13"/>
    <depend project="jakarta-cactus-sample-servlet-12"/>

    <work nested="documentation/target/classes/java"/>

    <javadoc nested="documentation/dist/doc" title="Cactus Documentation"/>

    <deliver fromdir="documentation/release" tosite="jakarta.apache.org"
      todir="builds/jakarta-cactus/nightly/@@DATE@@/" />

    <license name="LICENSE.cactus"/>

    <nag from="Vincent Massol &lt;vmassol@apache.org&gt;"
      to="cactus-dev@jakarta.apache.org"/>

  </project>

  <!--
     ========================================================================
       Cactus Releases for J2EE API 1.2. Only release if the Cactus Sample 
       Servlet project has succeeded.
     ========================================================================
  -->
  <project name="jakarta-cactus-release-12">

    <jar name="samples/servlet/release-12/jakarta-cactus-sample-servlet-@@DATE@@.zip"/>

    <deliver fromdir="framework/release-12" tosite="jakarta.apache.org"
      todir="builds/jakarta-cactus/nightly/@@DATE@@/" />

    <deliver fromdir="integration/ant/release-12" tosite="jakarta.apache.org"
      todir="builds/jakarta-cactus/nightly/@@DATE@@/" />

    <deliver fromdir="samples/servlet/release-12" tosite="jakarta.apache.org"
      todir="builds/jakarta-cactus/nightly/@@DATE@@/" />

  </project>

  <!--
     ========================================================================
       Cactus Releases for J2EE API 1.3. Only release if the Cactus Sample 
       Servlet project has succeeded.
     ========================================================================
  -->
  <project name="jakarta-cactus-release-13">

    <jar name="samples/servlet/release-13/jakarta-cactus-sample-servlet-@@DATE@@.zip"/>

    <deliver fromdir="framework/release-13" tosite="jakarta.apache.org"
      todir="builds/jakarta-cactus/nightly/@@DATE@@/" />

    <deliver fromdir="integration/ant/release-13" tosite="jakarta.apache.org"
      todir="builds/jakarta-cactus/nightly/@@DATE@@/" />

    <deliver fromdir="samples/servlet/release-13" tosite="jakarta.apache.org"
      todir="builds/jakarta-cactus/nightly/@@DATE@@/" />

  </project>

</module>
