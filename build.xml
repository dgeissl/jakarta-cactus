<?xml version="1.0"?>

<!--
  =============================================================================
    Master build file for building all Cactus components (the Ant tasks,
    the framework itself, the Petals, the documentation, the samples, etc).

    See build.properties.sample for details of mandatory and optional
    properties to set.

    This script should be started with the following command line :

        ant <target>

    Run "ant -projecthelp" to get a list of available targets.
  =============================================================================
-->
<project name="Master Cactus Build" default="release" basedir=".">

    <!-- Give user a chance to override without editing this file
         (and without typing -D each time it compiles it) -->
    <property file="${basedir}/build.properties" />
    <property file="${user.home}/build.properties" />

    <!--
       ========================================================================
         Generate the release files for all the Cactus subprojects
       ========================================================================
    -->
    <target name="release" depends="clean">

        <ant antfile="anttasks/build.xml" inheritAll="false" 
            target="release"/>
        <ant antfile="framework/build.xml" inheritAll="false" 
            target="release"/>
        <ant antfile="petals/ant/build.xml" inheritAll="false" 
            target="release"/>
        <ant antfile="petals/eclipse/build.xml" inheritAll="false" 
            target="release"/>
        <ant antfile="samples/servlet/build.xml" inheritAll="false" 
            target="release"/>
        <ant antfile="documentation/build.xml" inheritAll="false" 
            target="release">
            <property name="javadoc.include" value="true"/>
        </ant>

    </target>
   
    <!--
       ========================================================================
         Clean all generated files by all Cactus subprojects.
       ========================================================================
    -->
    <target name="clean">

        <ant antfile="anttasks/build.xml" inheritAll="false" 
            target="clean"/>
        <ant antfile="framework/build.xml" inheritAll="false" 
            target="clean"/>
        <ant antfile="petals/ant/build.xml" inheritAll="false" 
            target="clean"/>
        <ant antfile="petals/eclipse/build.xml" inheritAll="false" 
            target="clean"/>
        <ant antfile="samples/servlet/build.xml" inheritAll="false" 
            target="clean"/>
        <ant antfile="documentation/build.xml" inheritAll="false" 
            target="clean"/>

    </target>

    <!--
       ========================================================================
         Generate the release files for all the Cactus subprojects and for 
         all supported J2EE APIs.
       ========================================================================
    -->
    <target name="release.all">

        <ant inheritAll="false" target="release">
            <property name="j2ee.jar" value="${j2ee.12.jar}"/>
        </ant>

        <ant inheritAll="false" target="release">
            <property name="j2ee.jar" value="${j2ee.13.jar}"/>
        </ant>

    </target>

    <!--
       ========================================================================
         Clean all generated files by all Cactus subprojects and for all
         supported J2EE APIs.
       ========================================================================
    -->
    <target name="clean.all">

        <ant inheritAll="false" target="clean">
            <property name="j2ee.jar" value="${j2ee.12.jar}"/>
        </ant>

        <ant inheritAll="false" target="clean">
            <property name="j2ee.jar" value="${j2ee.13.jar}"/>
        </ant>
        
    </target>

</project>