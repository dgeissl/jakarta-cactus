<?xml version="1.0"?>

<!DOCTYPE project [
    <!ENTITY build-share SYSTEM "file:./build-share.xml">
    <!ENTITY build-tests-resin-20 SYSTEM "file:./build-tests-resin-20.xml">
    <!ENTITY build-tests-resin-13 SYSTEM "file:./build-tests-resin-13.xml">
    <!ENTITY build-tests-orion-14 SYSTEM "file:./build-tests-orion-14.xml">
    <!ENTITY build-tests-orion-15 SYSTEM "file:./build-tests-orion-15.xml">
    <!ENTITY build-tests-tomcat-40 SYSTEM "file:./build-tests-tomcat-40.xml">
    <!ENTITY build-tests-weblogic-61 SYSTEM "file:./build-tests-weblogic-61.xml">
]>

<!--
  =============================================================================
    Build file for the Cactus Sample application. This is a sample build
    file that demonstrates how to integrate Cactus unit testing with Ant in
    order to automate the running of tests.

    The following Ant tasks must be available in your ant installation
    (i.e. the Ant task themselves and their dependent jars need to be put
    in ANT_HOME/lib) :

        junit                 [REQUIRED] For running the unit tests.

    The following properties need to be set in a ./build.properties,
    ${user.home}/build.properties, a higher level build file, on the command
    line, ... :

        servlet.jar           [REQUIRED] The path to the Servlet API jar

        cactus.jar            [REQUIRED] The path to the Cactus jar file

        junit.jar             [REQUIRED] The path to the JUnit jar file

        log4j.jar             [OPTIONAL] The path to the Log4j jar file.
                              Only needed if we want logs to be generated.

        httpclient.jar        [REQUIRED] The Commons HttpClient jar file

        aspectjrt.jar         [REQUIRED] The path to the AspectJ runtime jar. It is used by Cactus
                              for logging entries and exit of methods, configuration checking, ...)

        httpunit.jar          [REQUIRED] The path to the HttpUnit jar file.
                              Required for compiling and running the unit
                              tests.

        cactus.ant.jar        [REQUIRED] The path to the Cactus custom Ant
                              tasks jar file

        test.port             [OPTIONAL] The port that should be used for
                              starting the servers during unit testing. This
                              should be used not to interfere with other
                              running servers. The default is 8080.

    Additionally and depending on the servlet engines whith which you wish to
    run your tests, you'll need to set the following kind of properties :

        <server name>.home.<version>

    Example: For Resin 2.0, you'll need to have a "resin.home.20" property
    defined and pointing to the location where Resin 2.0 is installed.

    This script should be started with the following command line :

        ant <target>

    Run "ant usage" to get a list of available targets. The default target is
    "war"
  =============================================================================
-->
<project name="Cactus Sample" default="war" basedir="..">

    &build-share;

    <!--
       ========================================================================
         Help on usage. List available targets
       ========================================================================
    -->
    <target name="usage" depends="init">

        <echo message=""/>
        <echo message="${project.name.text} build file"/>
        <echo message="------------------------------------------------------"/>
        <echo message=""/>
        <echo message=" Available targets are :"/>
        <echo message=""/>
        <echo message=" war    --> generates the war file (default)"/>
        <echo message=" clean  --> cleans up the build directory"/>
        <echo message=" source --> generates source zip of the project"/>
        <echo message=" doc    --> generates the docs (javadoc, ...)"/>
        <echo message=" all    --> do it all at once"/>
        <echo message="            (clean, war, source, doc)"/>
        <echo message=""/>
        <echo message=" Targets for running the tests for Servlet API 2.3 :"/>
        <echo message=""/>
        <echo message=" tests_all         --> run tests on all servlet engines"/>
        <echo message=" tests_resin_20    --> run tests for Resin 2.0"/>
        <echo message=" tests_resin_13    --> run tests for Resin 1.3"/>
        <echo message=" tests_tomcat_40   --> run tests for Tomcat 4.0"/>
        <echo message=" tests_orion_14    --> run tests for Orion 1.4"/>
        <echo message=" tests_orion_15    --> run tests for Orion 1.5"/>
        <echo message=" tests_weblogic_61 --> run tests for WebLogic 6.1"/>
        <echo message=""/>

    </target>

    <!--
       ========================================================================
         Run all Cactus tests for Servlet API 2.3
       ========================================================================
    -->
    <target name="tests_all"
        depends="tests_resin_20,tests_resin_13,tests_tomcat_40,tests_orion_14,tests_orion_15,tests_weblogic_61">
    </target>

    &build-tests-resin-20;
    &build-tests-resin-13;
    &build-tests-orion-14;
    &build-tests-orion-15;
    &build-tests-tomcat-40;
    &build-tests-weblogic-61;

</project>
