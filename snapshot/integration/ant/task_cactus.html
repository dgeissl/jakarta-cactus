<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Jakarta Cactus - Cactus Ant Task</title>
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
          </head>
  <body class="composite">
    <div id="banner">
                  <a href="http://jakarta.apache.org/cactus/" id="bannerLeft">
    
                                            <img src="../../images/logocactus.gif" alt="" />
    
            </a>
                        <a href="http://jakarta.apache.org/" id="bannerRight">
    
                                            <img src="../../images/jakarta-logo.gif" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
    
            <div class="xleft">
        Last Published: 2016-11-27
                          |   
                <a href="http://www.apache.org/" class="externalLink">Apache</a>
                &gt;
      
                <a href="http://www.jakarta.apache.org/" class="externalLink">Jakarta</a>
                &gt;
      
                <a href="http://jakarta.apache.org/cactus/" class="externalLink">Cactus</a>
                          </div>
            <div class="xright">      
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
    
                   <h5>About</h5>
            <ul>
              
    <li class="none">
                    <a href="../../index.html">Overview</a>
          </li>
              
    <li class="none">
                    <a href="../../goals.html">Goals</a>
          </li>
              
    <li class="none">
                    <a href="../../features.html">Features</a>
          </li>
              
    <li class="none">
                    <a href="../../news.html">News</a>
          </li>
              
    <li class="none">
                    <a href="../../downloads.html">Downloads</a>
          </li>
              
    <li class="none">
                    <a href="http://issues.apache.org/jira/secure/BrowseProject.jspa?id=10471" class="externalLink">Bug Database</a>
          </li>
              
    <li class="none">
                    <a href="../../mail-lists.html">Mailing Lists</a>
          </li>
              
    <li class="none">
                    <a href="../../faq.html">FAQ</a>
          </li>
              
    <li class="none">
                    <a href="http://wiki.apache.org/jakarta-cactus/FrontPage" class="externalLink">Wiki</a>
          </li>
              
    <li class="none">
                    <a href="../../license.html">License</a>
          </li>
          </ul>
              <h5>Documentation</h5>
            <ul>
              
    <li class="none">
                    <a href="../../getting_started.html">Getting started</a>
          </li>
              
    <li class="none">
                    <a href="../../how_it_works.html">How it works</a>
          </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../writing/howto_ejb.html">Writing tests</a>
                </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
            
            
      
            
      
            
      
            
      
                  
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
                  
      
            
      
            
      
                  
      
            
      
            
      
              
            <li class="expanded">
                    <a href="../../integration/index.html">Running tests</a>
                  <ul>
                  
    <li class="none">
                    <a href="../../integration/manual/index.html">Manual</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/eclipse/index.html">Eclipse</a>
          </li>
                  
                
              
      
            
      
            
      
            
      
            
      
            
            
            
      
            
      
            
      
            
      
              
            <li class="expanded">
                    <a href="../../integration/ant/index.html">Ant</a>
                  <ul>
                  
    <li class="none">
                    <a href="../../integration/ant/howto_ant_cactus.html">Howto Ant-Cactus</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/howto_ant_install.html">Howto Ant-Install</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/howto_ant_primer.html">Howto Ant-Primer</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_cactifyear.html">CactifyEar Task</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_cactifywar.html">CactifyWar Task</a>
          </li>
                  
    <li class="none">
              <strong>Cactus Task</strong>
        </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_cactus1.8.html">Cactus Task 1.8</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_resin.html">Resin Task</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_runservertests.html">RunServerTests Task</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_webxmlmerge.html">WebXmlMerge Task</a>
          </li>
              </ul>
        </li>
                  
    <li class="none">
                    <a href="../../integration/integration_browser.html">Browser</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/howto_tomcat.html">Tomcat</a>
          </li>
                  
                
              
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../integration/maven/index.html">Maven</a>
                </li>
                  
                
              
      
            
      
              
        <li class="collapsed">
                    <a href="../../integration/maven2/index.html">Maven2</a>
                </li>
                  
    <li class="none">
                    <a href="../../integration/integration_jetty.html">Jetty</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/howto_ide.html">Various IDEs</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/howto_junitee.html">JUnitEE</a>
          </li>
              </ul>
        </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../participating/index.html">Participating</a>
                </li>
          </ul>
              <h5>Miscellaneous</h5>
            <ul>
              
    <li class="none">
                    <a href="../../cactusname.html">Why the name</a>
          </li>
              
    <li class="none">
                    <a href="../../mock_vs_cactus.html">Mock vs Container</a>
          </li>
              
    <li class="none">
                    <a href="http://wiki.apache.org/jakarta-cactus/TestedOn" class="externalLink">Tested On...</a>
          </li>
              
                
              
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../resources/index.html">Resources</a>
                </li>
          </ul>
              <h5>Translations</h5>
            <ul>
              
    <li class="none">
                    <a href="http://www.ressources-java.net/cactus" class="externalLink">French</a>
          </li>
              
    <li class="none">
                    <a href="http://jakarta.apache-korea.org/cactus/index.html" class="externalLink">Korean</a>
          </li>
              
    <li class="none">
                    <a href="http://www.jajakarta.org/cactus/" class="externalLink">Japanese</a>
          </li>
          </ul>
              <h5>See also</h5>
            <ul>
              
    <li class="none">
                    <a href="http://www.apachebookstore.com/" class="externalLink">Apache Bookstore</a>
          </li>
              
    <li class="none">
                    <a href="http://www.planetapache.org/" class="externalLink">Planet Apache</a>
          </li>
              
    <li class="none">
                    <a href="http://apache.org/foundation/thanks.html" class="externalLink">Apache Sponsors</a>
          </li>
          </ul>
                                                 
                        
                        
            <a href="http://jakarta.apache.org/cactus/" title="Jakarta Cactus" class="poweredBy">
                            <img alt="Jakarta Cactus" src="../../images/cactusbanner.gif" />
            </a>
                               
  

  
    
  
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2><a name="Cactus_Task"></a>Cactus Task</h2>
<p>
                The task <strong>cactus</strong> is an extension of the
                <strong>junit</strong>
                task that is included in Ant as an optional task.
                <strong>cactus</strong>
                extends <strong>junit</strong> to enable
                in-container tests. It features built-in support for a variety of
                containers, but also allows testing in custom containers.
            </p>
<p>
                Here are the different steps peformed automatically by the
                <code>cactus</code>
                task:
            </p>
<ol type="1"><li>
                    Deploy the cactified WAR/EAR into the target container,
                </li>
<li>
                    If the container is not already started, start it. Otherwise, leave
                    it running,
                </li>
<li>
                    Run the Cactus tests,
                </li>
<li>
                    If the container was started by the <code>cactus</code> task the
                    stop it. Otherwise, leave it running.
                </li>
</ol>
<p>
                Currently the following containers are supported out of the box:
                <ul><li><a href="#tomcat3x">Apache Tomcat 3.x</a></li>
<li><a href="#tomcat4x">Apache Tomcat 4.x</a></li>
<li><a href="#tomcat5x">Apache Tomcat 5.x</a></li>
<li><a href="#jboss3x">JBoss Application Server 3.x</a></li>
<li><a href="#orion1x">Orion Application Server 1.x</a></li>
<li><a href="#orion2x">Orion Application Server 2.x</a></li>
<li><a href="#resin2x">Resin Server 2.x</a></li>
<li><a href="#resin3x">Resin Server 3.x</a></li>
<li><a href="#weblogic7x">WebLogic 7.x</a></li>
</ul>
</p>
<p>
                In addition if your favorite container is not in the above list, you
                can use the <a href="#generic">Generic</a> container.
            </p>
<div class="section"><h3><a name="Parameters"></a>Parameters</h3>
<p>
                    As this task is an extension of the <strong>junit</strong> task, it
                    also supports all attributes that the <strong>junit</strong> task
                    supports. In addition, the following parameters are supported:
                </p>
<table class="bodyTable"><tr class="a"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="b"><td><strong>warfile</strong></td>
<td>
                            The web application archive that should be tested. The archive must
                            already contain everything needed for running Cactus tests (it must
                            be
                            <em><a href="task_cactifywar.html">cactified</a></em>
                            ).
                        </td>
<td>Yes, unless the <em>earfile</em> attribute is specified
                        </td>
</tr>
<tr class="a"><td><strong>earfile</strong></td>
<td>
                            The enterprise application archive that should be tested. The
                            archive must contain a web module that already contains everything
                            needed for running Cactus tests (it must be
                            <em><a href="task_cactifywar.html">cactified</a></em>
                            ).
                        </td>
<td>Yes, unless the <em>warfile</em> attribute is specified
                        </td>
</tr>
</table>
</div>
<div class="section"><h2><a name="Nested_Elements"></a>Nested Elements</h2>
<p>
                    As this task is an extension of the <strong>junit</strong> task, it
                    also supports all the nested elements supported by the
                    <strong>junit</strong>
                    task. In addition, the following nested
                    elements are supported:
                </p>
<div class="section"><h2><a name="cactusproperty"></a>cactusproperty</h2>
<p>
                        The <strong>cactusproperty</strong> element lets you specify the
                        name of a property file. All the properties specified in this file
                        will be read and set as System properties.
                    </p>
<div class="section"><h3><a name="Parameters"></a>Parameters</h3>
<note>
                            The <strong>cactusproperty</strong> element supports the following
                            parameters:
                        </note><table class="bodyTable"><tr class="b"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="a"><td>server</td>
<td>
                                    Specifies whether the properties should be added in the Cactus
                                    server side JVM (&quot;<code>true</code>&quot;) or the Cactus client side
                                    JVM (&quot;<code>false</code>&quot;).
                                </td>
<td>Yes</td>
</tr>
</table>
<p>
                            Example (used for enabling Cactus logging):
                        </p>
<div class="source"><pre>
&lt;!-- Configure the cactus task for logging --&gt;
&lt;cactusproperty server=&quot;false&quot;
    propertiesFile=&quot;${target.dir}/logging_client.properties&quot;/&gt;
&lt;cactusproperty server=&quot;true&quot;
    propertiesFile=&quot;${target.dir}/logging_server.properties&quot;/&gt;
</pre>
</div>
</div>
</div>
<div class="section"><h2><a name="containerset"></a>containerset</h2>
<p>
                        The <strong>containerset</strong> element lets you specify which
                        containers the tests should run against. Every element nested inside
                        this element corresponds to a container. See below for a list of
                        container elements supported in this element.
                    </p>
<div class="section"><h3><a name="Parameters"></a>Parameters</h3>
<note>
                            The <strong>containerset</strong> element supports the following
                            parameters:
                        </note><table class="bodyTable"><tr class="b"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="a"><td>timeout</td>
<td>
                                    Specifies the timeout in milliseconds after which starting up
                                    a container should be given up. If the timeout is reached
                                    before the container starts responding with a successful HTTP
                                    status code, the build will fail.
                                </td>
<td>No, default is
                                    <em>3 minutes</em></td>
</tr>
<tr class="b"><td>proxyport</td>
<td>
                                    By specifying this attribute it is possible to insert some
                                    application that acts as a local TCP/IP proxy between the
                                    test runner and the actual containers. Most importantly, that
                                    includes applications that record and display the HTTP
                                    transactions, which can be helpful in tracking down tricky
                                    problems.
                                </td>
<td>No</td>
</tr>
</table>
</div>
</div>
<div class="section"><h2><a name="containerclasspath"></a>containerclasspath</h2>
<p>
                        The optional <strong>containerclasspath</strong> element lets you
                        specify additional jars that will be added to the container
                        classpaths that are used to start/stop the containers. This is in
                        addition to the container jars which are automatically added by the
                        <code>&lt;cactus&gt;</code>
                        task. The
                        <code>containerclasspath</code>
                        element behaves exactly the same as the Ant
                        <code>classpath</code>
                        element. In most cases you will not need to use this element.
                    </p>
</div>
</div>
<div class="section"><h2><a name="Supported_Containers"></a>Supported Containers</h2>
<p>
                    All elements nested in the <strong>containerset</strong> element
                    represent specific containers.
                </p>
<p>
                    Specific container elements provide attributes and nested elements
                    as appropriate.
                </p>
<div class="section"><h2><a name="Common_Parameters"></a>Common Parameters</h2>
<p>
                        Here is a list of parameters that are common to all containers.
                    </p>
<table class="bodyTable"><tr class="a"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="b"><td>protocol</td>
<td>
                                Protocol to use for communication, one of http or https. Note that
                                https will only work, if a.) JSSE is installed b.) the proper
                                certificates are installed.
                            </td>
<td>No, default is http</td>
</tr>
<tr class="a"><td>server</td>
<td>
                                Host name or ip of the machine running the server. Note, that
                                the built in deployment support will not work for remote hosts.
                            </td>
<td>No, default is localhost</td>
</tr>
<tr class="b"><td>port</td>
<td>
                                The TCP port that the container should listen to
                            </td>
<td>No, default is 8080</td>
</tr>
</table>
</div>
<anchor id="generic"><div class="section"><h2><a name="generic"></a>generic</h2>
<p>
                        The <strong>generic</strong> container supports custom containers by
                        allowing you to specify targets to be called, or tasks to executed,
                        in order to start up and shut down the container.
                    </p>
<p>
                        Note that the attributes of the <code>&lt;cactus&gt;</code> and
                        <code>&lt;containerset&gt;</code>
                        elements are currently not used
                        by the <code>&lt;generic&gt;</code> element.
                    </p>
<div class="section"><h3><a name="Parameters"></a>Parameters</h3>
<table class="bodyTable"><tr class="a"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="b"><td>name</td>
<td>
                                    A name for the container that is displayed when the tests are
                                    run.
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>port</td>
<td>
                                    The TCP port that the container should listen to
                                </td>
<td>No, default is 8080</td>
</tr>
<tr class="b"><td>startuptarget</td>
<td>
                                    The name of a target that should be called to perform the
                                    starting up of the container.
                                </td>
<td>
                                    Yes, unless there's a nested <strong>startup</strong> element
                                </td>
</tr>
<tr class="a"><td>shutdowntarget</td>
<td>
                                    The name of a target that should be called to perform the
                                    shutting down of the container.
                                </td>
<td>
                                    Yes, unless there's a nested <strong>shutdown</strong> element
                                </td>
</tr>
<tr class="b"><td>if</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name exists in the current project
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>unless</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name doesn't exist in the current project
                                </td>
<td>No</td>
</tr>
</table>
</div>
<div class="section"><h2><a name="Nested_Elements"></a>Nested Elements</h2>
<p>
                            The <strong>generic</strong> container supports the following nested
                            elements:
                        </p>
<div class="section"><h3><a name="exclude"></a>exclude</h3>
<p>
                                Multiple <strong>exclude</strong> elements can be used as in
                                standard Ant <em>PatternSets</em> or <em>FileSets</em> to
                                exclude specific tests from running in the container.
                            </p>
</div>
<div class="section"><h3><a name="startup"></a>startup</h3>
<p>
                                A single <strong>startup</strong> element can be nested inside a
                                <strong>generic</strong>
                                element. Using this element, you can
                                implement the startup of the container, either by specifying a
                                target name in the <strong>target</strong> attribute, or by
                                directly embedding the required Ant tasks inside the
                                <strong>startup</strong>
                                element.
                            </p>
</div>
<div class="section"><h3><a name="shutdown"></a>shutdown</h3>
<p>
                                A single <strong>shutdown</strong> element can be nested inside a
                                <strong>generic</strong>
                                element. Using this element, you can
                                implement the shutdown of the container, either by specifying a
                                target name in the <strong>target</strong> attribute, or by
                                directly embedding the required Ant tasks inside the
                                <strong>shutdown</strong>
                                element.
                            </p>
</div>
</div>
</div>
<anchor id="jboss3x"><div class="section"><h2><a name="jboss3x"></a>jboss3x</h2>
<p>
                        The nested element <strong>jboss3x</strong> allows running the tests
                        against the JBoss 3.x application server.
                    </p>
<div class="section"><h3><a name="Parameters"></a>Parameters</h3>
<table class="bodyTable"><tr class="b"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="a"><td><strong>dir</strong></td>
<td>
                                    The installation directory of the JBoss 3.x server
                                </td>
<td>Yes</td>
</tr>
<tr class="b"><td>config</td>
<td>
                                    The name of the JBoss server configuration to use. The
                                    files in this server configuration will be copied to the
                                    tmp directory used to start the container.
                                </td>
<td>No, the default is
                                    <em>default</em></td>
</tr>
<tr class="a"><td>port</td>
<td>
                                    The TCP port that will be used to poll the server to
                                    verify if it is running. Note that this port value is
                                    not used to tell JBoss on what port it should listen
                                    to, as is the case for the other containers (this may
                                    be implemented in the future).
                                </td>
<td>No, default is 8080</td>
</tr>
<tr class="b"><td>jndiport</td>
<td>
                                    The JNDI server port on which the JBoss server has been
                                    started. This attribute is only used for shutting down JBoss
                                    and should only be used if you are running JBoss on a custom
                                    JNDI port.
                                </td>
<td>No, default is 1099</td>
</tr>
<tr class="a"><td>tmpdir</td>
<td>
                                    The directory to which the container will be installed for the
                                    tests.
                                </td>
<td>
                                    No (by default the
                                    <code>[JBOSS_HOME]/server/cactus</code>
                                    temporary directory is used)
                                </td>
</tr>
<tr class="b"><td>output</td>
<td>
                                    Name of a file to write the output of the container to. If not
                                    specified, the standard output will be used
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>append</td>
<td>
                                    Whether output should be appended to or overwrite an existing
                                    file.
                                </td>
<td>No, default is
                                    <em>false</em></td>
</tr>
<tr class="b"><td>if</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name exists in the current project
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>unless</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name doesn't exist in the current project
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>jvmArgs</td>
<td>
                                    Arguments to be passed to the JVM running the container (for
                                    instance, -Xms256m -Xmx800m)
                                </td>
<td>No</td>
</tr>
</table>
</div>
<div class="section"><h3><a name="Nested_Elements"></a>Nested Elements</h3>
<p>
                            The <strong>jboss3x</strong> container supports the following
                            nested elements:
                        </p>
<div class="section"><h3><a name="exclude"></a>exclude</h3>
<p>
                                Multiple <strong>exclude</strong> elements can be used as in
                                standard Ant PatternSets or FileSets to exclude specific tests
                                from running in the container.
                            </p>
</div>
</div>
</div>
<anchor id="orion1x"><div class="section"><h2><a name="orion1x"></a>orion1x</h2>
<p>
                        The nested element <strong>orion1x</strong> allows running the tests
                        against the Orion Application Server 1.x.
                    </p>
<div class="section"><h2><a name="Parameters"></a>Parameters</h2>
<table class="bodyTable"><tr class="a"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="b"><td><strong>dir</strong></td>
<td>
                                    The installation directory of the Orion 1.x server
                                </td>
<td>Yes</td>
</tr>
<tr class="a"><td>port</td>
<td>
                                    The TCP port that the container should listen to
                                </td>
<td>No, default is 8080</td>
</tr>
<tr class="b"><td>tmpdir</td>
<td>
                                    The directory to which the container will be installed for the
                                    tests.
                                </td>
<td>No (by default the system temporary directory is used)</td>
</tr>
<tr class="a"><td>output</td>
<td>
                                    Name of a file to write the output of the container to. If not
                                    specified, the standard output will be used
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>append</td>
<td>
                                    Whether output should be appended to or overwrite an existing
                                    file.
                                </td>
<td>No, default is
                                    <em>false</em></td>
</tr>
<tr class="a"><td>if</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name exists in the current project
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>unless</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name doesn't exist in the current project
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>jvmArgs</td>
<td>
                                    Arguments to be passed to the JVM running the container (for
                                    instance, -Xms256m -Xmx800m)
                                </td>
<td>No</td>
</tr>
</table>
</div>
<div class="section"><h2><a name="Nested_Elements"></a>Nested Elements</h2>
<p>
                            The <strong>orion1x</strong> container supports the following
                            nested elements:
                        </p>
<div class="section"><h2><a name="exclude"></a>exclude</h2>
<p>
                                Multiple <strong>exclude</strong> elements can be used as in
                                standard Ant PatternSets or FileSets to exclude specific tests
                                from running in the container.
                            </p>
</div>
</div>
</div>
<anchor id="orion2x"><div class="section"><h2><a name="orion2x"></a>orion2x</h2>
<p>
                        The nested element <strong>orion1x</strong> allows running the tests
                        against the Orion Application Server 2.x.
                    </p>
<div class="section"><h2><a name="Parameters"></a>Parameters</h2>
<table class="bodyTable"><tr class="b"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="a"><td><strong>dir</strong></td>
<td>
                                    The installation directory of the Orion 2.x server
                                </td>
<td>Yes</td>
</tr>
<tr class="b"><td>port</td>
<td>
                                    The TCP port that the container should listen to
                                </td>
<td>No, default is 8080</td>
</tr>
<tr class="a"><td>tmpdir</td>
<td>
                                    The directory to which the container will be installed for the
                                    tests.
                                </td>
<td>No (by default the system temporary directory is used)</td>
</tr>
<tr class="b"><td>output</td>
<td>
                                    Name of a file to write the output of the container to. If not
                                    specified, the standard output will be used
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>append</td>
<td>
                                    Whether output should be appended to or overwrite an existing
                                    file.
                                </td>
<td>No, default is
                                    <em>false</em></td>
</tr>
<tr class="b"><td>if</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name exists in the current project
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>unless</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name doesn't exist in the current project
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>jvmArgs</td>
<td>
                                    Arguments to be passed to the JVM running the container (for
                                    instance, -Xms256m -Xmx800m)
                                </td>
<td>No</td>
</tr>
</table>
</div>
<div class="section"><h2><a name="Nested_Elements"></a>Nested Elements</h2>
<p>
                            The <strong>orion2x</strong> container supports the following
                            nested elements:
                        </p>
<div class="section"><h2><a name="exclude"></a>exclude</h2>
<p>
                                Multiple <strong>exclude</strong> elements can be used as in
                                standard Ant PatternSets or FileSets to exclude specific tests
                                from running in the container.
                            </p>
</div>
</div>
</div>
<anchor id="resin2x"><div class="section"><h2><a name="resin2x"></a>resin2x</h2>
<p>
                        The nested element <strong>resin2x</strong> allows running the tests
                        against the Resin Server 2.x.
                    </p>
<div class="section"><h2><a name="Parameters"></a>Parameters</h2>
<table class="bodyTable"><tr class="a"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="b"><td><strong>dir</strong></td>
<td>
                                    The installation directory of the Resin 2.x server
                                </td>
<td>Yes</td>
</tr>
<tr class="a"><td>resinconf</td>
<td>
                                    The configuration file to use instead of the default one
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>port</td>
<td>
                                    The TCP port that the container should listen to
                                </td>
<td>No, default is 8080</td>
</tr>
<tr class="a"><td>tmpdir</td>
<td>
                                    The directory to which the container will be installed for the
                                    tests.
                                </td>
<td>No (by default the system temporary directory is used)</td>
</tr>
<tr class="b"><td>output</td>
<td>
                                    Name of a file to write the output of the container to. If not
                                    specified, the standard output will be used
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>append</td>
<td>
                                    Whether output should be appended to or overwrite an existing
                                    file.
                                </td>
<td>No, default is
                                    <em>false</em></td>
</tr>
<tr class="b"><td>if</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name exists in the current project
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>unless</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name doesn't exist in the current project
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>jvmArgs</td>
<td>
                                    Arguments to be passed to the JVM running the container (for
                                    instance, -Xms256m -Xmx800m)
                                </td>
<td>No</td>
</tr>
</table>
</div>
<div class="section"><h2><a name="Nested_Elements"></a>Nested Elements</h2>
<p>
                            The <strong>resin2x</strong> container supports the following
                            nested elements:
                        </p>
<div class="section"><h2><a name="exclude"></a>exclude</h2>
<p>
                                Multiple <strong>exclude</strong> elements can be used as in
                                standard Ant PatternSets or FileSets to exclude specific tests
                                from running in the container.
                            </p>
</div>
</div>
</div>
<anchor id="resin3x"><div class="section"><h2><a name="resin3x"></a>resin3x</h2>
<p>
                        The nested element <strong>resin3x</strong> allows running the tests
                        against the Resin Server 3.x.
                    </p>
<div class="section"><h2><a name="Parameters"></a>Parameters</h2>
<table class="bodyTable"><tr class="a"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="b"><td><strong>dir</strong></td>
<td>
                                    The installation directory of the Resin 3.x server
                                </td>
<td>Yes</td>
</tr>
<tr class="a"><td>resinconf</td>
<td>
                                    The configuration file to use instead of the default one
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>port</td>
<td>
                                    The TCP port that the container should listen to
                                </td>
<td>No, default is 8080</td>
</tr>
<tr class="a"><td>tmpdir</td>
<td>
                                    The directory to which the container will be installed for the
                                    tests.
                                </td>
<td>No (by default the system temporary directory is used)</td>
</tr>
<tr class="b"><td>output</td>
<td>
                                    Name of a file to write the output of the container to. If not
                                    specified, the standard output will be used
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>append</td>
<td>
                                    Whether output should be appended to or overwrite an existing
                                    file.
                                </td>
<td>No, default is
                                    <em>false</em></td>
</tr>
<tr class="b"><td>if</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name exists in the current project
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>unless</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name doesn't exist in the current project
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>jvmArgs</td>
<td>
                                    Arguments to be passed to the JVM running the container (for
                                    instance, -Xms256m -Xmx800m)
                                </td>
<td>No</td>
</tr>
</table>
</div>
<div class="section"><h2><a name="Nested_Elements"></a>Nested Elements</h2>
<p>
                            The <strong>resin3x</strong> container supports the following
                            nested elements:
                        </p>
<div class="section"><h2><a name="exclude"></a>exclude</h2>
<p>
                                Multiple <strong>exclude</strong> elements can be used as in
                                standard Ant PatternSets or FileSets to exclude specific tests
                                from running in the container.
                            </p>
</div>
</div>
</div>
<anchor id="tomcat3x"><div class="section"><h2><a name="tomcat3x"></a>tomcat3x</h2>
<p>
                        The nested element <strong>tomcat3x</strong> allows running the tests
                        against the Apache Tomcat 3.x servlet container.
                    </p>
<div class="section"><h2><a name="Parameters"></a>Parameters</h2>
<table class="bodyTable"><tr class="a"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="b"><td><strong>dir</strong></td>
<td>
                                    The installation directory of the Tomcat 3.x server
                                </td>
<td>Yes</td>
</tr>
<tr class="a"><td>serverxml</td>
<td>
                                    The server configuration file to use instead of the default one
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>port</td>
<td>
                                    The TCP port that the container should listen to
                                </td>
<td>No, default is 8080</td>
</tr>
<tr class="a"><td>tmpdir</td>
<td>
                                    The directory to which the container will be installed for the
                                    tests.
                                </td>
<td>No (by default the system temporary directory is used)</td>
</tr>
<tr class="b"><td>output</td>
<td>
                                    Name of a file to write the output of the container to. If not
                                    specified, the standard output will be used
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>append</td>
<td>
                                    Whether output should be appended to or overwrite an existing
                                    file.
                                </td>
<td>No, default is
                                    <em>false</em></td>
</tr>
<tr class="b"><td>if</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name exists in the current project
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>unless</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name doesn't exist in the current project
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>jvmArgs</td>
<td>
                                    Arguments to be passed to the JVM running the container (for
                                    instance, -Xms256m -Xmx800m)
                                </td>
<td>No</td>
</tr>
</table>
</div>
<div class="section"><h2><a name="Nested_Elements"></a>Nested Elements</h2>
<p>
                            The <strong>tomcat3x</strong> container supports the following
                            nested elements:
                        </p>
<div class="section"><h2><a name="conf"></a>conf</h2>
<p>
                                An Ant Fileset that can be used to specify the set of files that
                                should be placed into the <strong>conf</strong> directory of the
                                installation directory. This fileset should not include the
                                <code>server.xml</code>
                                file (it will be excluded if you add it)
                                as you must use the <code>serverxml</code> attribute to specify a
                                custom version of it.
                            </p>
</div>
<div class="section"><h2><a name="exclude"></a>exclude</h2>
<p>
                                Multiple <strong>exclude</strong> elements can be used as in
                                standard Ant PatternSets or FileSets to exclude specific tests
                                from running in the container.
                            </p>
</div>
</div>
</div>
<anchor id="tomcat4x"><div class="section"><h2><a name="tomcat4x"></a>tomcat4x</h2>
<p>
                        The nested element <strong>tomcat4x</strong> allows running the tests
                        against the Apache Tomcat 4.x servlet container.
                    </p>
<div class="section"><h2><a name="Parameters"></a>Parameters</h2>
<table class="bodyTable"><tr class="a"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="b"><td><strong>dir</strong></td>
<td>
                                    The installation directory of the Tomcat 4.x server
                                </td>
<td>Yes</td>
</tr>
<tr class="a"><td>serverxml</td>
<td>
                                    The server configuration file to use instead of the default one
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>contextxml</td>
<td>
                                    An optional
                                    <a href="http://jakarta.apache.org/tomcat/tomcat-4.1-doc/config/context.html" class="externalLink">
                                        context xml
                                    </a>
                                    file to use. Any file specified here will be copied into
                                    the <code>webapps/</code> directory.
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>port</td>
<td>
                                    The TCP port that the container should listen to
                                </td>
<td>No, default is 8080</td>
</tr>
<tr class="b"><td>tmpdir</td>
<td>
                                    The directory to which the container will be installed for the
                                    tests.
                                </td>
<td>No (by default the system temporary directory is used)</td>
</tr>
<tr class="a"><td>output</td>
<td>
                                    Name of a file to write the output of the container to. If not
                                    specified, the standard output will be used
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>append</td>
<td>
                                    Whether output should be appended to or overwrite an existing
                                    file.
                                </td>
<td>No, default is
                                    <em>false</em></td>
</tr>
<tr class="a"><td>if</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name exists in the current project
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>unless</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name doesn't exist in the current project
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>jvmArgs</td>
<td>
                                    Arguments to be passed to the JVM running the container (for
                                    instance, -Xms256m -Xmx800m)
                                </td>
<td>No</td>
</tr>
</table>
</div>
<div class="section"><h2><a name="Nested_Elements"></a>Nested Elements</h2>
<p>
                            The <strong>tomcat4x</strong> container supports the following
                            nested elements:
                        </p>
<div class="section"><h2><a name="conf"></a>conf</h2>
<p>
                                An Ant Fileset that can be used to specify the set of files that
                                should be placed into the <strong>conf</strong> directory of the
                                installation directory. This fileset should not include the
                                <code>server.xml</code>
                                file (it will be excluded if you add it)
                                as you must use the <code>serverxml</code> attribute to specify a
                                custom version of it.
                            </p>
</div>
<div class="section"><h2><a name="exclude"></a>exclude</h2>
<p>
                                Multiple <strong>exclude</strong> elements can be used as in
                                standard Ant PatternSets or FileSets to exclude specific tests
                                from running in the container.
                            </p>
</div>
</div>
</div>
<anchor id="tomcat5x"><div class="section"><h2><a name="tomcat5x"></a>tomcat5x</h2>
<p>
                        The nested element <strong>tomcat5x</strong> allows running the tests
                        against the Apache Tomcat 5.x servlet container.
                    </p>
<p>
                        Note: For Tomcat 5.x, there is no <code>contextxml</code> attribute as
                        it is not required. Tomcat 5.x requires the context file to be put
                        under the <code>conf/</code> directory (see the
                        <a href="http://jakarta.apache.org/tomcat/tomcat-5.0-doc/config/context.html" class="externalLink">context
                            documentation page</a>).
                        Thus you'll simply need to use the nested
                        <code>&lt;conf&gt;</code>
                        element. Alternatively you should be able to also put your context
                        file in <code>META-INF/context.xml</code>.
                    </p>
<div class="section"><h2><a name="Parameters"></a>Parameters</h2>
<table class="bodyTable"><tr class="b"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="a"><td><strong>dir</strong></td>
<td>
                                    The installation directory of the Tomcat 5.x server
                                </td>
<td>Yes</td>
</tr>
<tr class="b"><td>serverxml</td>
<td>
                                    The server configuration file to use instead of the default one
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>port</td>
<td>
                                    The TCP port that the container should listen to
                                </td>
<td>No, default is 8080</td>
</tr>
<tr class="b"><td>tmpdir</td>
<td>
                                    The directory to which the container will be installed for the
                                    tests.
                                </td>
<td>No (by default the system temporary directory is used)</td>
</tr>
<tr class="a"><td>output</td>
<td>
                                    Name of a file to write the output of the container to. If not
                                    specified, the standard output will be used
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>append</td>
<td>
                                    Whether output should be appended to or overwrite an existing
                                    file.
                                </td>
<td>No, default is
                                    <em>false</em></td>
</tr>
<tr class="a"><td>if</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name exists in the current project
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>unless</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name doesn't exist in the current project
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>jvmArgs</td>
<td>
                                    Arguments to be passed to the JVM running the container (for
                                    instance, -Xms256m -Xmx800m)
                                </td>
<td>No</td>
</tr>
</table>
</div>
<div class="section"><h2><a name="Nested_Elements"></a>Nested Elements</h2>
<p>
                            The <strong>tomcat5x</strong> container supports the following
                            nested elements:
                        </p>
<div class="section"><h2><a name="conf"></a>conf</h2>
<p>
                                An Ant Fileset that can be used to specify the set of files that
                                should be placed into the <strong>conf</strong> directory of the
                                installation directory. This fileset should not include the
                                <code>server.xml</code>
                                file (it will be excluded if you add it)
                                as you must use the <code>serverxml</code> attribute to specify a
                                custom version of it.
                            </p>
</div>
<div class="section"><h2><a name="exclude"></a>exclude</h2>
<p>
                                Multiple <strong>exclude</strong> elements can be used as in
                                standard Ant PatternSets or FileSets to exclude specific tests
                                from running in the container.
                            </p>
</div>
</div>
</div>
<anchor id="weblogic7x"><div class="section"><h2><a name="weblogic7x"></a>weblogic7x</h2>
<p>
                        The nested element <strong>weblogic7x</strong> allows running the
                        tests against the WebLogic 7.x J2EE container.
                    </p>
<div class="section"><h2><a name="Parameters"></a>Parameters</h2>
<table class="bodyTable"><tr class="b"><th>Name</th>
<th>Description</th>
<th>Required</th>
</tr>
<tr class="a"><td><strong>dir</strong></td>
<td>
                                    The installation directory of WebLogic 7.x. Note that this
                                    should not be the the bea home directory. For example:
                                    <code>c:\bea\weblogic700</code>.
                                </td>
<td>Yes</td>
</tr>
<tr class="b"><td><strong>beahome</strong></td>
<td>
                                    The bea home directory. By default Cactus tries to guess the
                                    bea home directory by taking the parent directory of the
                                    <code>dir</code>
                                    directory (i.e. where WebLogic 7.x is
                                    installed). You only need to use the <code>beahome</code> if
                                    you have put your bea home directory somewhere else.
                                </td>
<td>No, defaults to the parent directory of dir</td>
</tr>
<tr class="a"><td>configXml</td>
<td>
                                    The Weblogic <code>config.xml</code> configuration file to use
                                    instead of the default one.
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>port</td>
<td>
                                    The TCP port that the container should listen to
                                </td>
<td>No, default is 8080</td>
</tr>
<tr class="a"><td>tmpdir</td>
<td>
                                    The directory to which the container will be installed for the
                                    tests.
                                </td>
<td>No (by default the system temporary directory is used)</td>
</tr>
<tr class="b"><td>output</td>
<td>
                                    Name of a file to write the output of the container to. If not
                                    specified, the standard output will be used
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>append</td>
<td>
                                    Whether output should be appended to or overwrite an existing
                                    file.
                                </td>
<td>No, default is
                                    <em>false</em></td>
</tr>
<tr class="b"><td>if</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name exists in the current project
                                </td>
<td>No</td>
</tr>
<tr class="a"><td>unless</td>
<td>
                                    Tests will only be run in the container if a property of the
                                    given name doesn't exist in the current project
                                </td>
<td>No</td>
</tr>
<tr class="b"><td>jvmArgs</td>
<td>
                                    Arguments to be passed to the JVM running the container (for
                                    instance, -Xms256m -Xmx800m)
                                </td>
<td>No</td>
</tr>
</table>
</div>
<div class="section"><h2><a name="Nested_Elements"></a>Nested Elements</h2>
<p>
                            The <strong>tomcat4x</strong> container supports the following
                            nested elements:
                        </p>
<div class="section"><h3><a name="conf"></a>conf</h3>
<p>
                                A fileset that can be used to specify the set of files that
                                should be placed into the <strong>conf</strong> directory of the
                                installation directory. This fileset should not include the
                                <code>serverxml</code>
                                file.
                            </p>
</div>
<div class="section"><h3><a name="exclude"></a>exclude</h3>
<p>
                                Multiple <strong>exclude</strong> elements can be used as in
                                standard Ant PatternSets or FileSets to exclude specific tests
                                from running in the container.
                            </p>
</div>
</div>
</div>
</div>
<div class="section"><h2><a name="Examples"></a>Examples</h2>
<p>
                    The following example demonstrates how to run a suite of Cactus tests
                    against three contains with builtin support (JBoss 3, Resin 2 and
                    Tomcat 4).
                </p>
<div class="source"><pre>
&lt;cactus warfile=&quot;${test.dir}/test.war&quot;
    printsummary=&quot;yes&quot; failureproperty=&quot;tests.failed&quot;&gt;
  &lt;classpath&gt;
    &lt;path refid=&quot;cactus.classpath&quot;/&gt;
    &lt;pathelement location=&quot;${build.classes.dir}&quot;/&gt;
    &lt;pathelement location=&quot;${test.classes.dir}&quot;/&gt;
  &lt;/classpath&gt;
  &lt;containerset&gt;
    &lt;jboss2x dir=&quot;${jboss3x.home}&quot; config=&quot;default&quot;
        todir=&quot;${test.reports.dir}/jboss3x&quot;/&gt;
    &lt;resin2x dir=&quot;${resin2x.home}&quot; port=&quot;8080&quot;
        todir=&quot;${test.reports.dir}/resin2x&quot;/&gt;
    &lt;tomcat4x dir=&quot;${tomcat4x.home}&quot; port=&quot;8080&quot;
        todir=&quot;${test.reports.dir}/tomcat4x&quot;/&gt;
  &lt;/containerset&gt;
  &lt;formatter type=&quot;xml&quot;/&gt;
  &lt;batchtest&gt;
    &lt;fileset dir=&quot;${src.test.dir}&quot;&gt;
      &lt;include name=&quot;**/Test*.java&quot;/&gt;
      &lt;exclude name=&quot;**/TestAll.java&quot;/&gt;
    &lt;/fileset&gt;
  &lt;/batchtest&gt;
&lt;/cactus&gt;
</pre>
</div>
<p>
                    The next example shows the use of the
                    <strong>generic</strong>
                    container element for starting/stopping a custom container. You need
                    to define the two targets <em>mycontainer.start</em> and
                    <em>mycontainer.stop</em>, so that the container is started up (on
                    port 8080) before the tests are run, and shut down after the tests
                    completed. How these targets are implemented is highly dependant on
                    the container. Most likely you'll need to copy some files and use
                    the <strong>&lt;java&gt;</strong> task to invoke a container-provided
                    Java class that can start/stop the container.
                </p>
<div class="source"><pre>
&lt;cactus warfile=&quot;${test.dir}/test.war&quot;
    printsummary=&quot;yes&quot; failureproperty=&quot;tests.failed&quot;&gt;
  &lt;classpath&gt;
    &lt;path refid=&quot;cactus.runtime.classpath&quot;/&gt;
    &lt;pathelement location=&quot;${build.classes.dir}&quot;/&gt;
    &lt;pathelement location=&quot;${test.classes.dir}&quot;/&gt;
  &lt;/classpath&gt;
  &lt;containerset&gt;
    &lt;generic name=&quot;My Container&quot; port=&quot;8080&quot;&gt;
      &lt;startup target=&quot;mycontainer.start&quot;/&gt;
      &lt;shutdown target=&quot;mycontainer.stop&quot;/&gt;
    &lt;/generic&gt;
  &lt;/containerset&gt;
  &lt;formatter type=&quot;xml&quot;/&gt;
  &lt;batchtest&gt;
    &lt;fileset dir=&quot;${src.test.dir}&quot;&gt;
      &lt;include name=&quot;**/Test*.java&quot;/&gt;
      &lt;exclude name=&quot;**/TestAll.java&quot;/&gt;
    &lt;/fileset&gt;
  &lt;/batchtest&gt;
&lt;/cactus&gt;
</pre>
</div>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2001-2016
    
          The Apache Software Foundation
          
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
