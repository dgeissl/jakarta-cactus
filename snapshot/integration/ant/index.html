<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Jakarta Cactus - Ant Integration</title>
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
          </head>
  <body class="composite">
    <div id="banner">
                  <a href="http://jakarta.apache.org/cactus/" id="bannerLeft">
    
                                            <img src="../../images/logocactus.gif" alt="" />
    
            </a>
                        <a href="http://jakarta.apache.org/" id="bannerRight">
    
                                            <img src="../../images/jakarta-logo.gif" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
    
            <div class="xleft">
        Last Published: 2016-11-27
                          |   
                <a href="http://www.apache.org/" class="externalLink">Apache</a>
                &gt;
      
                <a href="http://www.jakarta.apache.org/" class="externalLink">Jakarta</a>
                &gt;
      
                <a href="http://jakarta.apache.org/cactus/" class="externalLink">Cactus</a>
                          </div>
            <div class="xright">      
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
    
                   <h5>About</h5>
            <ul>
              
    <li class="none">
                    <a href="../../index.html">Overview</a>
          </li>
              
    <li class="none">
                    <a href="../../goals.html">Goals</a>
          </li>
              
    <li class="none">
                    <a href="../../features.html">Features</a>
          </li>
              
    <li class="none">
                    <a href="../../news.html">News</a>
          </li>
              
    <li class="none">
                    <a href="../../downloads.html">Downloads</a>
          </li>
              
    <li class="none">
                    <a href="http://issues.apache.org/jira/secure/BrowseProject.jspa?id=10471" class="externalLink">Bug Database</a>
          </li>
              
    <li class="none">
                    <a href="../../mail-lists.html">Mailing Lists</a>
          </li>
              
    <li class="none">
                    <a href="../../faq.html">FAQ</a>
          </li>
              
    <li class="none">
                    <a href="http://wiki.apache.org/jakarta-cactus/FrontPage" class="externalLink">Wiki</a>
          </li>
              
    <li class="none">
                    <a href="../../license.html">License</a>
          </li>
          </ul>
              <h5>Documentation</h5>
            <ul>
              
    <li class="none">
                    <a href="../../getting_started.html">Getting started</a>
          </li>
              
    <li class="none">
                    <a href="../../how_it_works.html">How it works</a>
          </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../writing/howto_ejb.html">Writing tests</a>
                </li>
              
                
              
      
            
      
            
            
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
                  
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
                  
      
            
      
            
      
                  
      
            
      
            
      
              
            <li class="expanded">
                    <a href="../../integration/index.html">Running tests</a>
                  <ul>
                  
    <li class="none">
                    <a href="../../integration/manual/index.html">Manual</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/eclipse/index.html">Eclipse</a>
          </li>
                  
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
            <li class="expanded">
              <strong>Ant</strong>
                <ul>
                  
    <li class="none">
                    <a href="../../integration/ant/howto_ant_cactus.html">Howto Ant-Cactus</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/howto_ant_install.html">Howto Ant-Install</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/howto_ant_primer.html">Howto Ant-Primer</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_cactifyear.html">CactifyEar Task</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_cactifywar.html">CactifyWar Task</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_cactus.html">Cactus Task</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_cactus1.8.html">Cactus Task 1.8</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_resin.html">Resin Task</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_runservertests.html">RunServerTests Task</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/ant/task_webxmlmerge.html">WebXmlMerge Task</a>
          </li>
              </ul>
        </li>
                  
    <li class="none">
                    <a href="../../integration/integration_browser.html">Browser</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/howto_tomcat.html">Tomcat</a>
          </li>
                  
                
              
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../integration/maven/index.html">Maven</a>
                </li>
                  
                
              
      
            
      
              
        <li class="collapsed">
                    <a href="../../integration/maven2/index.html">Maven2</a>
                </li>
                  
    <li class="none">
                    <a href="../../integration/integration_jetty.html">Jetty</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/howto_ide.html">Various IDEs</a>
          </li>
                  
    <li class="none">
                    <a href="../../integration/howto_junitee.html">JUnitEE</a>
          </li>
              </ul>
        </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../participating/index.html">Participating</a>
                </li>
          </ul>
              <h5>Miscellaneous</h5>
            <ul>
              
    <li class="none">
                    <a href="../../cactusname.html">Why the name</a>
          </li>
              
    <li class="none">
                    <a href="../../mock_vs_cactus.html">Mock vs Container</a>
          </li>
              
    <li class="none">
                    <a href="http://wiki.apache.org/jakarta-cactus/TestedOn" class="externalLink">Tested On...</a>
          </li>
              
                
              
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../resources/index.html">Resources</a>
                </li>
          </ul>
              <h5>Translations</h5>
            <ul>
              
    <li class="none">
                    <a href="http://www.ressources-java.net/cactus" class="externalLink">French</a>
          </li>
              
    <li class="none">
                    <a href="http://jakarta.apache-korea.org/cactus/index.html" class="externalLink">Korean</a>
          </li>
              
    <li class="none">
                    <a href="http://www.jajakarta.org/cactus/" class="externalLink">Japanese</a>
          </li>
          </ul>
              <h5>See also</h5>
            <ul>
              
    <li class="none">
                    <a href="http://www.apachebookstore.com/" class="externalLink">Apache Bookstore</a>
          </li>
              
    <li class="none">
                    <a href="http://www.planetapache.org/" class="externalLink">Planet Apache</a>
          </li>
              
    <li class="none">
                    <a href="http://apache.org/foundation/thanks.html" class="externalLink">Apache Sponsors</a>
          </li>
          </ul>
                                                 
                        
                        
            <a href="http://jakarta.apache.org/cactus/" title="Jakarta Cactus" class="poweredBy">
                            <img alt="Jakarta Cactus" src="../../images/cactusbanner.gif" />
            </a>
                               
  

  
    
  
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2><a name="Ant_Integration"></a>Ant Integration</h2>
<p>
                Cactus provides strong integration with the popular build tool
                <a href="http://ant.apache.org/" class="externalLink">Ant</a>. This integration consists of a handful
                of tasks that support the running of tests from an Ant build file.
            </p>
<div class="section"><h2><a name="Background"></a>Background</h2>
<p>
                    A strong principle of <em>eXtreme Programming</em> (XP) is the
                    continuous integration aspect (see the
                    <a href="http://www.martinfowler.com/articles/continuousIntegration.html" class="externalLink">
                        Continuous Integration
                    </a>
                    article by Martin Fowler). The
                    traditional approach to the development of complex software has been
                    to separate the development process into phases of coding, testing and
                    integration. The continuous integration principle is to basically code,
                    test and integrate at the same time, so that at almost any point in
                    time, you have a working product.
                </p>
<p>
                    In order to achieve this, you need to be able to automatically build
                    your entire application, including running the unit and acceptance
                    tests. Thus, tools such as Ant or
                    <a href="http://maven.apache.org/" class="externalLink">Maven</a>
                    are the foundation for continuous integration. You can build on that
                    foundation by using a dedicated continuous integration tool like
                    <a href="http://cruisecontrol.sourceforge.net/" class="externalLink">CruiseControl</a>,
                    <a href="http://jakarta.apache.org/gump/" class="externalLink">Gump</a>
                    or
                    <a href="http://www.urbancode.com/html/default.html" class="externalLink">AntHill</a>.
                </p>
<p>
                    Ant is written in Java and provides a wide variety of tasks that
                    support the development of Java applications (though it is in no way
                    restricted to development). In addition, many third-party tasks are
                    available, and it is quite easy to extend Ant with custom tasks.
                </p>
</div>
<div class="section"><h2><a name="Ant_Resources"></a>Ant Resources</h2>
<p>
                    This documentation assumes good knowledge of the basic concepts of
                    Ant. Here are several resources that can help you get up to speed
                    if you haven't been using Ant yet:
                    <ul><li>
                            The <a href="http://ant.apache.org/manual/index.html" class="externalLink">Ant Manual</a> is the
                            definitive source about Ant.
                        </li>
<li><a href="http://ant.apache.org/ant_in_anger.html" class="externalLink">
                                Ant in Anger
                            </a>
                            discusses best practices and common pitfalls
                            with Ant usage.
                        </li>
<li>
                            The book <a href="http://www.manning.com/hatcher/index.html" class="externalLink">
                            Java Development With Ant
                        </a> by Erik Hatcher and Steve
                            Loughran is very much recommended if you plan to use Ant
                            intensively.
                        </li>
<li>
                            The document
                            <a href="http://wiki.apache.org/ant/TheElementsOfAntStyle" class="externalLink">
                                The Elements of Ant Style
                            </a>
                            in the Apache Wiki lists some
                            general rules for using Ant effectively in any kind of project.
                        </li>
</ul>
<p>
                        A full list of resources is maintained by the Ant team at
                        <a href="http://ant.apache.org/resources.html" class="externalLink">
                            http://ant.apache.org/resources.html
                        </a></p>
</p>
</div>
<div class="section"><h2><a name="Installing_the_Cactus_Ant_Tasks"></a>Installing the Cactus Ant Tasks</h2>
<p>
                    The Ant tasks provided by Cactus are distributed together with the
                    main distribution of Cactus, which you can get from the
                    <a href="../../downloads.html">download</a>
                    area. After downloading
                    and expanding the archive, you'll find several JAR files in the
                    <code>lib</code>
                    directory. See the
                    <a href="../manual/howto_classpath.html">Classpath Guide</a>
                    for
                    information about which of the JARs you need for what.
                </p>
<p>
                    It is recommended that you copy these JARs into the project for which
                    you are writing Cactus tests. A common pattern is to have a
                    <code>lib</code>
                    directory in the project directory, and put all the
                    JARs there.
                    <br />
<b>WARNING!: Since Cactus 1.8 you need the two
                        <code>cargo-ant.jar</code>
                        and <code>cargo-uberjar.jar</code> jars
                        in your classpath, since cactus relies on the cargo project.
                    </b><br />

                    So your project might look something like this:
                    <div class="source"><pre>
  [your project]
    |- doc
    |  ...
    |- lib
    |   |- cactus.core.framework.uberjar.&lt;VERSION&gt;.jar
    |   |- cactus.integration.shared.api.&lt;VERSION&gt;.jar
    |   |- cactus.integration.ant.&lt;VERSION&gt;.jar
    |   |- cactus-ant.jar
    |   |- commons-httpclient.jar
    |   |- commons-logging.jar
    |   |- junit.jar
    |   |- aspectjrt.jar
    |   |- cargo-ant.jar
    |   |- cargo-uberjar.jar
    |- src
    |   |- java
    |   |  ...
    |   |- test
    |   |  ...
    |- build.xml
</pre>
</div>
</p>
<p>
                    Of course, you can put them anywhere you want as long as you
                    can correctly locate them from within your build file. Another
                    option is to put all the libraries in the
                    <code>lib</code>
                    directory of your Ant installation, so that they get added to
                    the classpath automatically. This option is not recommended, however,
                    as it quickly leads to pollution of the classpath used by Ant.
                </p>
<p>
                    There's one step left to enable your project to run Cactus tests
                    from within Ant: you'll need to introduce the Cactus tasks to Ant.
                    This is done with a <code>&lt;taskdef&gt;</code>:
                    <div class="source"><pre>
&lt;!-- Define the Cactus tasks --&gt;
&lt;taskdef resource=&quot;cactus.tasks&quot;&gt;
  &lt;classpath&gt;
    &lt;pathelement location=&quot;lib/cactus.core.framework.uberjar.&lt;VERSION&gt;.jar&quot;/&gt;
    &lt;pathelement location=&quot;cactus.integration.shared.api.&lt;VERSION&gt;.jar&quot;/&gt;
    &lt;pathelement location=&quot;cactus.integration.ant.&lt;VERSION&gt;.jar&quot;/&gt;
    &lt;pathelement location=&quot;cargo-ant.jar&quot;/&gt;
    &lt;pathelement location=&quot;cargo-uberjar.jar&quot;/&gt;
    &lt;pathelement location=&quot;lib/commons-httpclient.jar&quot;/&gt;
    &lt;pathelement location=&quot;lib/commons-logging.jar&quot;/&gt;
    &lt;pathelement location=&quot;lib/aspectjrt.jar&quot;/&gt;
  &lt;/classpath&gt;
&lt;/taskdef&gt;
</pre>
</div>
</p>
<p>
                    As you can see, you'll need to add the JARs required by Cactus to the
                    <code>&lt;classpath&gt;</code>
                    of the task definition. Note that we
                    don't include the JUnit library, because it usually needs to be
                    installed in the <code>lib</code> directory of your Ant installation
                    (see the Ant FAQ for details).
                </p>
<note>
                    If you get an error at this point, make absolutely sure that you've
                    correctly set up the classpath for the task definition. Run Ant with
                    the <code>-verbose</code> or the <code>-debug</code> options to find
                    out which libraries or classes could not be found, or what else may
                    be going wrong.
                </note></div>
<div class="section"><h2><a name="Using_the_Cactus_Ant_Tasks"></a>Using the Cactus Ant Tasks</h2>
<p>
                    After you have defined the Cactus tasks you'll need to actually use
                    them in the build file to run the Cactus tests. Cactus provides a
                    couple of tasks that support you with running the tests from an Ant
                    build. Each of the tasks is independant or complementary to the
                    others. You'll need to decide on what tasks to used depending on your
                    requirements.
                    <table class="bodyTable"><caption>Ant tasks provided by Cactus</caption><tr class="a"><th>CactifyWar</th>
<td>
                                This task can enhance a provided web application archive (WAR),
                                and add the elements required to run Cactus tests against it.
                                This includes the JARs required by Cactus on the server-side,
                                as well as the definitions of the test redirectors in the
                                deployment descriptor.
                            </td>
</tr>
<tr class="b"><th>CactifyEar</th>
<td>
                                This task can enhance a provided Enterprise application archive (EAR),
                                and add the elements required to run Cactus tests against it. It can
                                also add EJB references to allow testing of local EJB:s.
                            </td>
</tr>
<tr class="a"><th>Cactus</th>
<td>
                                This task extends the standard <code>&lt;junit&gt;</code> task
                                with the capability of running in-container tests.
                            </td>
</tr>
<tr class="b"><th>RunServerTests</th>
<td>
                                This task is an alternative to the
                                <code>&lt;cactus&gt;</code>
                                task that is more generic but harder to use. In contrast to
                                the <code>&lt;cactus&gt;</code> task, it is not an extension of
                                the standard <code>&lt;junit&gt;</code> task.
                            </td>
</tr>
<tr class="a"><th>WebXmlMerge</th>
<td>
                                This task can merge the definitions from two web deployment
                                descriptors into a new descriptor, and can thus be used to
                                add the definition of the Cactus redirectors to an existing
                                descriptor. The same functionality is provided by the
                                <code>&lt;cactifywar&gt;</code>
                                task, so if you want to cactify
                                an entire WAR, you should use that task instead.
                            </td>
</tr>
</table>
</p>
<p>
                    Typically, the sequence for executing Cactus tests from an Ant build
                    will be the following:
                    <ol type="1"><li>
                            Compile the test classes (using the standard tasks like
                            <code>&lt;javac&gt;</code>)
                        </li>
<li>
                            Cactify the web-application (using the
                            <code>&lt;cactifywar&gt;</code>
                            task, or the
                            <code>&lt;webxmlmerge&gt;</code>
                            task in combination with builtin
                            Ant tasks like <code>&lt;war&gt;</code> and
                            <code>&lt;unwar&gt;</code>)
                        </li>
<li>
                            Start the target container, deploy the application, run the tests
                            and stop the container (using either <code>&lt;cactus&gt;</code> or
                            <code>&lt;runservertests&gt;</code>)
                        </li>
</ol>
</p>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2001-2016
    
          The Apache Software Foundation
          
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
