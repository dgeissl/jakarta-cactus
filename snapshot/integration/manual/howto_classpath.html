<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Jakarta Cactus - Setting the Cactus CLASSPATH</title>
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
          </head>
  <body class="composite">
    <div id="banner">
                  <a href="http://jakarta.apache.org/cactus/" id="bannerLeft">
    
                                            <img src="../../images/logocactus.gif" alt="" />
    
            </a>
                        <a href="http://jakarta.apache.org/" id="bannerRight">
    
                                            <img src="../../images/jakarta-logo.gif" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
    
            <div class="xleft">
        Last Published: 2016-11-27
                          |   
                <a href="http://www.apache.org/" class="externalLink">Apache</a>
                &gt;
      
                <a href="http://www.jakarta.apache.org/" class="externalLink">Jakarta</a>
                &gt;
      
                <a href="http://jakarta.apache.org/cactus/" class="externalLink">Cactus</a>
                          </div>
            <div class="xright">      
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
    
                   <h5>About</h5>
            <ul>
              
    <li class="none">
                    <a href="../../index.html">Overview</a>
          </li>
              
    <li class="none">
                    <a href="../../goals.html">Goals</a>
          </li>
              
    <li class="none">
                    <a href="../../features.html">Features</a>
          </li>
              
    <li class="none">
                    <a href="../../news.html">News</a>
          </li>
              
    <li class="none">
                    <a href="../../downloads.html">Downloads</a>
          </li>
              
    <li class="none">
                    <a href="http://issues.apache.org/jira/secure/BrowseProject.jspa?id=10471" class="externalLink">Bug Database</a>
          </li>
              
    <li class="none">
                    <a href="../../mail-lists.html">Mailing Lists</a>
          </li>
              
    <li class="none">
                    <a href="../../faq.html">FAQ</a>
          </li>
              
    <li class="none">
                    <a href="http://wiki.apache.org/jakarta-cactus/FrontPage" class="externalLink">Wiki</a>
          </li>
              
    <li class="none">
                    <a href="../../license.html">License</a>
          </li>
          </ul>
              <h5>Documentation</h5>
            <ul>
              
    <li class="none">
                    <a href="../../getting_started.html">Getting started</a>
          </li>
              
    <li class="none">
                    <a href="../../how_it_works.html">How it works</a>
          </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../writing/howto_ejb.html">Writing tests</a>
                </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
                  
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
                  
      
            
      
            
      
                  
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../integration/index.html">Running tests</a>
                </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../participating/index.html">Participating</a>
                </li>
          </ul>
              <h5>Miscellaneous</h5>
            <ul>
              
    <li class="none">
                    <a href="../../cactusname.html">Why the name</a>
          </li>
              
    <li class="none">
                    <a href="../../mock_vs_cactus.html">Mock vs Container</a>
          </li>
              
    <li class="none">
                    <a href="http://wiki.apache.org/jakarta-cactus/TestedOn" class="externalLink">Tested On...</a>
          </li>
              
                
              
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../../resources/index.html">Resources</a>
                </li>
          </ul>
              <h5>Translations</h5>
            <ul>
              
    <li class="none">
                    <a href="http://www.ressources-java.net/cactus" class="externalLink">French</a>
          </li>
              
    <li class="none">
                    <a href="http://jakarta.apache-korea.org/cactus/index.html" class="externalLink">Korean</a>
          </li>
              
    <li class="none">
                    <a href="http://www.jajakarta.org/cactus/" class="externalLink">Japanese</a>
          </li>
          </ul>
              <h5>See also</h5>
            <ul>
              
    <li class="none">
                    <a href="http://www.apachebookstore.com/" class="externalLink">Apache Bookstore</a>
          </li>
              
    <li class="none">
                    <a href="http://www.planetapache.org/" class="externalLink">Planet Apache</a>
          </li>
              
    <li class="none">
                    <a href="http://apache.org/foundation/thanks.html" class="externalLink">Apache Sponsors</a>
          </li>
          </ul>
                                                 
                        
                        
            <a href="http://jakarta.apache.org/cactus/" title="Jakarta Cactus" class="poweredBy">
                            <img alt="Jakarta Cactus" src="../../images/cactusbanner.gif" />
            </a>
                               
  

  
    
  
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2><a name="Setting_up_Cactus_Classpaths"></a>Setting up Cactus Classpaths</h2>
<p>
                You must understand that your Cactus tests are started by a JUnit
                Test Runner (in the client JVM) and that the Cactus TestCase that you
                have extended will connect to the Cactus Redirector (in the server
                JVM), where your <code>testXXX()</code> methods will be executed. See
                <a href="../../how_it_works.html">How it works</a>
                to understand the
                mechanism.
            </p>
<p>
                Please also check the <a href="../../integration/index.html">TestRunner
                Howto
            </a> tutorial which explains all the different ways to
                start a JUnit Test Runner.
            </p>
<note><strong>It is very important that you understand what files you need
                    to put in the client and server classpaths, as 99% of Cactus
                    errors come from an incorrect classpath !
                </strong></note><p><img src="../../images/classpath.jpg" alt="Classpaths" /></p>
<div class="section"><h2><a name="Client_side_classpath"></a>Client side classpath</h2>
<p>
                    The Cactus tests are started by running a JUnit Test Runner (For
                    explanations on how JUnit works see the
                    <a href="http://junit.sourceforge.net" class="externalLink">JUnit web site</a>).
                    As pictured in figure 1, you need to have the following jars and
                    classes in your client side classpath:
                </p>
<ul><li><strong><code>junit.jar</code></strong>
                        : obviously this is needed
                        for the JUnit Test Runner and because the Cactus
                        <code>XXXTestCase</code>
                        classes extend the JUnit
                        <code>org.junit.framework.TestCase</code>
                        class.
                    </li>
<li><strong><code>cactus.jar</code></strong>
                        : well, this is the
                        Cactus jar containing the core Cactus framework. Depending
                        on the J2EE version you are using it is named
                        <code>cactus.core.framework.uberjar.javaEE.[J2EE_VERSION]-[CACTUS_VERSION].jar</code></li>
<li><strong>your test classes</strong>: these are
                        your test classes that extend the Cactus
                        <code>XXXTestCase</code>
                        classes,
                    </li>
<li><strong><code>servlet.jar or j2ee.jar</code></strong>
                        : these are
                        the Servlet API / J2EE API interfaces. This
                        is needed on the client side classpath because your test cases
                        extend one or several of <code>XXXTestCase</code> which use class
                        variables that are Servlet / J2EE objects
                        (<code>HttpSevletRequest</code>, <code>PageContext</code>, ...).
                        You can get this jar either from your servlet engine or from the
                        <a href="http://java.sun.com" class="externalLink">Sun Web Site</a>
                        (
                        <a href="http://java.sun.com/products/servlet/download.html" class="externalLink">
                            Servlet download page
                        </a>
                        or
                        <a href="http://java.sun.com/j2ee/download.html" class="externalLink">J2EE download
                            page</a>).
                    </li>
<li><strong><code>httpclient.jar</code></strong>
                        : needed for
                        Cactus Cookie handling.
                    </li>
<li><strong><code>commons-logging.jar</code></strong>
                        : Cactus uses
                        the Jakarta Commons Logging facade framework to provide seamless
                        Cactus logging using any existing Logging framework (Log4j,
                        LogKit, JDK 1.4 Logging, etc). It is also needed for Commons
                        HttpClient.
                    </li>
<li><strong><code>logging framework jar</code>(optional)
                        </strong>
                        : The
                        logging framework to use (Log4j jar, LogKit jar, etc). It is
                        optional as it is only needed for internal Cactus logging and in
                        addition, the Commons Logging framework provides a simple logger
                        that logs on the console.
                    </li>
<li><strong><code>httpunit.jar</code></strong>
                        ,
                        <strong><code>Tidy.jar</code></strong>
                        and
                        <strong><code>xerces.jar</code>
                            (optional)
                        </strong>
                        : only needed if you
                        wish to use
                        <a href="http://httpunit.sourceforge.net" class="externalLink">HttpUnit</a>
                        in your <code>endXXX()</code> methods (see the
                        <a href="../../writing/howto_httpunit.html">HttpUnit Howto</a>
                        tutorial).
                        The 3 jars mentioned above are part of the HttpUnit distribution.
                    </li>
<li><strong><code>aspectjrt.jar</code></strong>
                        :
                        <a href="http://www.eclipse.org/aspectj/" class="externalLink">AspectJ</a>
                        runtime jar.
                    </li>
</ul>
<note>
                    If you have the habit of using class variables for the classes
                    to test (as opposed to declaring them within the
                    <code>testXXX()</code>
                    method), you'll also need to put your classes
                    under test in the client side classpath.
                </note><p>
                    In addition to the above mentioned jars and classes, you may have
                    to put the
                    <strong><code>cactus.properties</code></strong>
                    configuration file in your classpath (Only if you are using it to
                    configure Cactus of course). Details are described in the
                    <a href="../../integration/manual/howto_config.html">Config Howto</a>
                    tutorial).
                </p>
<note>
                    If you are using Log4J as the logging framework, you will also
                    need to put a <code>log4j.properties</code> Log4j configuration
                    file in your client side classpath (See the
                    <a href="../../integration/manual/howto_config.html">Config Howto</a>
                    tutorial).
                </note></div>
<div class="section"><h2><a name="Server_side_classpath"></a>Server side classpath</h2>
<p>
                    The server side part is a webapp. It can be packaged as a .war file
                    or as expanded war. It should have the following structure, which
                    will ensure that the classpath is correct:
                </p>
<ul><li><strong><code>WEB-INF/lib/cactus.core.framework.uberjar.javaEE.[J2EE_VERSION]-[CACTUS_VERSION].jar
                            </code></strong>
                        : the
                        Cactus core framework jar,
                    </li>
<li><strong><code>WEB-INF/lib/junit.jar</code></strong>
                        : this is
                        needed because the Cactus <code>XXXTestCase</code> extends
                        the JUnit <code>org.junit.framework.TestCase</code> class.
                    </li>
<li><strong><code>WEB-INF/lib/aspectjrt.jar</code></strong>
                        :
                        <a href="http://www.eclipse.org/aspectj/" class="externalLink">AspectJ</a>
                        runtime jar.
                    </li>
<li><strong><code>WEB-INF/lib/commons-logging.jar</code></strong>
                        :
                        Cactus uses the Jakarta Commons Logging facade framework to provide
                        seamless Cactus logging using any existing Logging framework (Log4j,
                        LogKit, JDK 1.4 Logging, etc). It is also needed for Commons
                        HttpClient.
                    </li>
<li><strong><code>WEB-INF/lib/logging framework jar</code>
                            (optional)
                        </strong>
                        : The logging framework to use (Log4j jar,
                        LogKit jar, etc). It is optional as it is only needed for internal
                        Cactus logging and in addition, the Commons Logging framework
                        provides a simple logger that logs on the console.
                    </li>
<li><strong><code>WEB-INF/classes/&lt;your test classes&gt;</code></strong>
                        : obviously as their <code>testXXX()</code> methods will
                        get executed in the container.
                    </li>
<li><strong><code>WEB-INF/classes/&lt;your classes under test&gt;</code></strong>
                        : will be called by your test classes.
                    </li>
</ul>
<note>
                    If you have several webapps that use cactus you can put all Cactus
                    jars in a place loaded by your container System classloader (provided
                    your container correctly sets the Context classloader). The location
                    is container-dependent; for example for Tomcat 4.x, you can put the
                    jars in <code>TOMCAT_HOME/common/lib</code>.
                </note><note>
                    If you are using Log4J as the logging framework, you will also
                    need to put a <code>log4j.properties</code> Log4j configuration
                    file in your server side classpath (usually in
                    <code>WEB-INF/classes</code>).
                </note></div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2001-2016
    
          The Apache Software Foundation
          
  

  
    
  
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
