<!--
  =============================================================================
    Build file fragments used by multiple components
  =============================================================================
-->

    <!--
       ========================================================================
         Initialize Checkstyle.
       ========================================================================
    -->
    <target name="init.checkstyle.check">

        <path id="checkstyle.classpath">
            <pathelement location="${antlr.jar}"/>
            <pathelement location="${checkstyle.jar}"/>
            <pathelement location="${commons-beanutils.jar}"/>
            <pathelement location="${commons-collections.jar}"/>
            <pathelement location="${commons-logging.jar}"/>
            <pathelement location="${regexp.jar}"/>
            <!-- Includes system classpath for jars that are in ANT_HOME/lib 
                 such as aspectrt.jar, etc -->
            <pathelement path="${java.class.path}"/>
        </path>

        <condition property="checkstyle.available">
            <and>
                <available
                    classname="antlr.Parser"
                    classpathref="checkstyle.classpath"/>
                <available
                    classname="org.apache.commons.beanutils.BeanUtils"
                    classpathref="checkstyle.classpath"/>
                <available
                    classname="org.apache.commons.collections.CollectionUtils"
                    classpathref="checkstyle.classpath"/>
                <available
                    classname="org.apache.commons.logging.Log"
                    classpathref="checkstyle.classpath"/>
                <available
                    classname="org.apache.regexp.RE"
                    classpathref="checkstyle.classpath"/>
            </and>
        </condition>

    </target>

    <target name="init.checkstyle"
        depends="init.checkstyle.check"
        if="checkstyle.available">

        <taskdef resource="checkstyletask.properties"
            classpathref="checkstyle.classpath"/>

    </target>
