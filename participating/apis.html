<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2017-02-16 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Jakarta Cactus &#x2013; Public API/SPI vs internal classes</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../../" id="bannerLeft">
                                                <img src="../images/logocactus.gif" alt="Cactus" />
                </a>
                                            <a href="../../../" id="bannerRight">
                                                <img src="../images/jakarta-logo.gif" alt="Apache" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
                <div class="xleft">
        <span id="publishDate">Last Published: 2017-02-16</span>
                  &nbsp;| <span id="projectVersion">Version: 1.8.2-SNAPSHOT</span>
                          |                           <a href="http://www.apache.org/" class="externalLink" title="Apache">Apache</a>
        &gt;
                          <a href="http://www.jakarta.apache.org/" class="externalLink" title="Jakarta">Jakarta</a>
        &gt;
                          <a href="../../" title="Cactus">Cactus</a>
        &gt;
    Public API/SPI vs internal classes
              </div>
            <div class="xright">      
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
                                <h5>About</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../goals.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
                          <a href="../features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../news.html" title="News">News</a>
            </li>
                  <li class="none">
                          <a href="../downloads.html" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="http://issues.apache.org/jira/secure/BrowseProject.jspa?id=10471" class="externalLink" target="_blank" title="Bug Database">Bug Database</a>
            </li>
                  <li class="none">
                          <a href="../mail-lists.html" title="Mailing Lists">Mailing Lists</a>
            </li>
                  <li class="none">
                          <a href="../faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/jakarta-cactus/FrontPage" class="externalLink" target="_blank" title="Wiki">Wiki</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                            <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="../getting_started.html" title="Getting started">Getting started</a>
            </li>
                  <li class="none">
                          <a href="../how_it_works.html" title="How it works">How it works</a>
            </li>
                                                                                                                                                                                                                                      <li class="collapsed">
                          <a href="../writing/howto_ejb.html" title="Writing tests">Writing tests</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="../integration/index.html" title="Running tests">Running tests</a>
                  </li>
                                                                                                                                                                                                                              <li class="expanded">
                          <a href="../participating/index.html" title="Participating">Participating</a>
                    <ul>
                      <li class="none">
                          <a href="../participating/contributors.html" title="About Us">About Us</a>
            </li>
                      <li class="none">
                          <a href="../participating/todo.html" title="Roadmap">Roadmap</a>
            </li>
                      <li class="none">
                          <a href="http://issues.apache.org/jira/browse/CACTUS?report=com.atlassian.jira.plugin.system.project:openissues-panel" class="externalLink" title="TODO/Open Issues">TODO/Open Issues</a>
            </li>
                      <li class="none">
                          <a href="../participating/coding_conventions.html" title="Coding Conventions">Coding Conventions</a>
            </li>
                      <li class="none">
            <strong>Public API/SPIs</strong>
          </li>
                      <li class="none">
                          <a href="../../../site/cvsindex.html" title="SVN">SVN</a>
            </li>
                      <li class="none">
                          <a href="../participating/howto_build.html" title="Build From Source">Build From Source</a>
            </li>
                      <li class="none">
                          <a href="../participating/release_checklist.html" title="Release Checklist">Release Checklist</a>
            </li>
                      <li class="none">
                          <a href="../participating/logos.html" title="Logos">Logos</a>
            </li>
              </ul>
        </li>
          </ul>
                       <h5>Miscellaneous</h5>
                  <ul>
                  <li class="none">
                          <a href="../cactusname.html" title="Why the name">Why the name</a>
            </li>
                  <li class="none">
                          <a href="../mock_vs_cactus.html" title="Mock vs Container">Mock vs Container</a>
            </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/jakarta-cactus/TestedOn" class="externalLink" title="Tested On...">Tested On...</a>
            </li>
                                                                                                                                            <li class="collapsed">
                          <a href="../resources/index.html" title="Resources">Resources</a>
                  </li>
          </ul>
                       <h5>Translations</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.ressources-java.net/cactus" class="externalLink" target="_blank" title="French">French</a>
            </li>
                  <li class="none">
                          <a href="http://jakarta.apache-korea.org/cactus/index.html" class="externalLink" target="_blank" title="Korean">Korean</a>
            </li>
                  <li class="none">
                          <a href="http://www.jajakarta.org/cactus/" class="externalLink" target="_blank" title="Japanese">Japanese</a>
            </li>
          </ul>
                       <h5>See also</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.apachebookstore.com/" class="externalLink" target="_blank" title="Apache Bookstore">Apache Bookstore</a>
            </li>
                  <li class="none">
                          <a href="http://www.planetapache.org/" class="externalLink" target="_blank" title="Planet Apache">Planet Apache</a>
            </li>
                  <li class="none">
                          <a href="http://apache.org/foundation/thanks.html" class="externalLink" target="_blank" title="Apache Sponsors">Apache Sponsors</a>
            </li>
          </ul>
                                                                                                                                     <a href="../../" title="Jakarta Cactus" class="poweredBy">
        <img class="poweredBy"  alt="Jakarta Cactus" src="../images/cactusbanner.gif"     />
      </a>
                     
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        

    

        <div class="section">
<h2><a name="Cactus_API_design_rules"></a>Cactus API design rules</h2>

            
<blockquote>
                Most of these rules are extracted from the excellent
                <a class="externalLink" href="http://www.eclipse.org/articles/Article-API%20use/eclipse-api-usage-rules.html">How to Use the
                    Eclipse API
                </a>
                article
                by Jim des Rivieres.
            </blockquote>

            
<div class="section">
<h3><a name="Public_APIsSPIs"></a>Public APIs/SPIs</h3>

                
<p>
                    To try to draw the line more starkly, the code base for the platform
                    is separated into API/SPI and non-API/non-SPI packages, with all
                    API/SPI elements being declared in designated API/SPI packages.
                </p>
                
<div class="source">
<pre>
  org.apache.cactus.foo.*          - API
  org.apache.cactus.spi.foo.*      - SPI
  org.apache.cactus.internal.foo.* - not API; internal implementation packages
  org.apache.cactus.sample.*       - not API; these are examples
</pre></div>
                
<ul>
                    
<li>
                        <b>API/SPI package</b>: a Java package that contains at
                        least one API/SPI class or API/SPI interface. The names of API/SPI
                        packages are advertised in the documentation for that component;
                        where feasible, all other packages containing only implementation
                        details have &quot;internal&quot; in the package name. The names of API/SPI
                        packages may legitimately appear in client code. For the Cactus
                        project, these are:
                    </li>

                    
<li>
                        <b>API/SPI class or interface</b>: a public class or
                        interface in an API package, or a public or protected class or
                        interface member declared in, or inherited by, some other API
                        class or interface. The names of API classes and interfaces may
                        legitimately appear in client code.
                    </li>
                    
<li>
                        <b>API/SPI method or constructor</b>: a public or
                        protected method or constructor either declared in, or inherited
                        by, an API/SPI class or interface. The names of API/SPI methods
                        may legitimately appear in client code.
                    </li>
                    
<li>
                        <b>API/SPI field</b>: a public or protected field either
                        declared in, or inherited by, an API/SPI class or interface. The
                        names of API/SPI fields may legitimately appear in client code.
                    </li>
                </ul>
                
<p>
                    Everything else is considered internal implementation detail and off
                    limits to all clients. Legitimate client code must never reference
                    the names of non-API/non-SPI elements (not even using Java
                    reflection). In some cases, the Java language's name accessibility
                    rules are used to disallow illegal references. However, there are
                    many cases where this is simply not possible. Observing this one
                    simple rule avoids the problem completely:
                </p>
                
<ul>
                    
<li>
                        Stick to officially documented APIs/SPIs. Only reference packages
                        that are documented in the published API/SPI Javadoc for the
                        component. Never reference a package belonging to another component
                        that has &quot;internal&quot; in its name --- these are never API/SPI. Never
                        reference a package for which there is no published API/SPI Javadoc
                        --- these are not API/SPI either.
                    </li>
                </ul>

            </div>

            
<div class="section">
<h3><a name="No_public_methods_in_internal_packages"></a>No public methods in internal packages</h3>

                
<p>
                    In order to preserve binary compatibility, no user public API/SPI
                    must be located in internal packages.
                </p>

            </div>

            
<div class="section">
<h3><a name="No_public_class_exposed_as_much_as_possible"></a>No public class exposed as much as possible</h3>

                
<p>
                    Only interfaces should be exposed in the public API/SPI (as much as
                    possible). This will satisfy binary compatibility and allow future
                    extensibility. Of course, in some cases, it is not possible. For
                    example, <tt>ServletTestCase</tt> has to be a class as it
                    contains logic required to transform a JUnit test case into a Cactus
                    test case. Same for <tt>ServletTestSuite</tt> as the way to use
                    it in a JUnit <tt>suite()</tt> method is to create an instance
                    of it.
                </p>

            </div>

        </div>

    

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2001&#x2013;2017
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All rights reserved.    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
